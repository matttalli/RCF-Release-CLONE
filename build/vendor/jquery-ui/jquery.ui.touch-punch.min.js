/*!
 * jQuery UI Touch Punch 0.2.3
 * + custom change line 38 to only preventDefault on cancelable events
 * + merge of click bug pr https://github.com/furf/jquery-ui-touch-punch/pull/196/files so short touch event do not suppress click events on android
 * + custom fix for RCF-7281 to only hook into touchmove / touchend events from within touchstart event, and trigger simulated events
 *   on DOM element under cursor position, to work around touch events not being streamed if dom element that initially received touch event is removed
 * Copyright 2011-2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){t.touchPunch="loaded";var e="ontouchend"in document,o="onpointerdown"in document;if(e||o){var n=t.ui.mouse.prototype,i=n._mouseInit,u=n._mouseDestroy,h=!1;n._touchStart=function(t){t.target.addEventListener("touchmove",this._touchMoveBound),t.target.addEventListener("touchend",this._touchEndBound),!h&&this._mouseCapture(t.changedTouches[0])&&(h=!0,this._touchMoved=!1,this._startedMove=t.timeStamp,s(t,"mouseover"),s(t,"mousemove"),s(t,"mousedown"))},n._touchMove=function(t){h&&(this._touchMoved=!0,s(t,"mousemove"))},n._touchEnd=function(t){if(t.target.removeEventListener("touchmove",this._touchMoveBound),t.target.removeEventListener("touchend",this._touchEndBound),h){s(t,"mouseup"),s(t,"mouseout");var e=t.timeStamp-this._startedMove;(!this._touchMoved||e<500)&&s(t,"click"),h=!1}},n._mouseInit=function(){this._touchStartBound=this._touchStart.bind(this),this._touchMoveBound=this._touchMove.bind(this),this._touchEndBound=this._touchEnd.bind(this),!e&&o&&this.element.css("touch-action","none"),this.element[0].addEventListener("touchstart",this._touchStartBound),i.call(this)},n._mouseDestroy=function(){this.element[0].removeEventListener("touchstart",this._touchStartBound),u.call(this)}}function s(t,e){if(!(t.touches.length>1)){t.cancelable&&t.preventDefault();var o=t.changedTouches.item(0),n=document.createEvent("MouseEvents");n.initMouseEvent(e,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),document.elementFromPoint(Math.max(0,Math.min(o.clientX,window.innerWidth-1)),Math.max(0,Math.min(o.clientY,window.innerHeight-1))).dispatchEvent(n)}}}(jQuery);
