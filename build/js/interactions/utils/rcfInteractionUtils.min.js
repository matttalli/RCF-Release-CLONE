(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/utils/rcfInteractionUtils"],{336:function(t,e,n){"use strict";var r=n(436);n.d(e,"c",(function(){return r.a}));var a=n(437);n.d(e,"b",(function(){return a.a}));var c=n(378);n.d(e,"a",(function(){return c.a}))},338:function(t,e,n){"use strict";e.a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!t.verification&&"1"==t.verification[e]}},339:function(t,e,n){"use strict";var r=n(342),a=n(436);var c=n(393),o=n(337);var i=(t,e)=>e?Object(o.a)(t,e):t,s=n(154);var u=(t,e)=>{const n=i(t,e);return Object(s.a)(n)};var d=(t,e,n,r,o)=>{let i=u(t.$selector,o);const s=t.getUserAnswers(o);t.reset(),function(t,e){const{$activity:n,$selector:r}=t,c={id:n[0].id,answers:e};Object(a.a)(r,c)}(t,s),Object(c.a)(i,e,n,r)},l=(n(6),n(15),n(16),n(407));function f(t,e,n,a){let c=u(t.$selector,a);Object(r.a)(c);Object(l.a)(c,e).forEach(t=>n(t))}var b=t=>t.data("user-answer"),p=n(4);var O=(t,e,n)=>{const r=b(t.$selector);if(t.reset(),!Object(p.y)(r)){let a=u(t.$selector,n);Object(c.a)(a,r,!1,e)}},v=(n(48),n(5)),j=n.n(v);var g=(t,e,n)=>u(t.$selector,n).get().map(t=>{const n=j()(t);return e(n)});n(86);var m=(t,e,n)=>!u(t.$selector,n).get().some(t=>{const n=j()(t);return!e(n)});n.d(e,"a",(function(){return r.a})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return O})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return m}))},340:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6),n(11);var r=n(60),a=n(516);function c(t,e){const n=e?"correctAnswer":"incorrectAnswer",c=e?"correct":"wrong",o=e?r.a.t("components.marking.correct"):r.a.t("components.marking.incorrect"),i=t.find(".mark");t.addClass(n),t.attr("aria-invalid",e?"false":"true"),i.attr("aria-label","".concat(o)),i.addClass(c),Object(a.a)(i,e)}},341:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return c}));function r(t){t.addClass("populated")}function a(t){t.removeClass("populated")}function c(t,e){t.toggleClass("populated",e)}},342:function(t,e,n){"use strict";var r=n(419),a=n(365),c=n(5),o=n.n(c);var i=n(379),s=n(553);n(6),n(11);n(13);var u=t=>{t.filter("[aria-invalid]").removeAttr("aria-invalid");t.find("[aria-invalid]").removeAttr("aria-invalid")};function d(t){const e=Object(r.a)(t);Object(a.a)(e),function(t){t.each((t,e)=>{const n=o()(e);(function(t){return t.hasClass("dev-markable-container")})(n)&&Object(s.a)(n);const r=Object(i.a)(n);Object(s.a)(r)})}(t),function(t){t.removeClass("noGivenAnswer"),t.find(".noGivenAnswer").removeClass("noGivenAnswer")}(t),u(t)}n.d(e,"a",(function(){return d}))},344:function(t,e,n){"use strict";var r=n(433);n(6),n(11);var a=n(378);function c(t){t.attr("disabled","disabled")}function o(t){Object(r.a)(function(t){return t.find("input[type=checkbox].example")}(t))}function i(t){t.removeAttr("disabled")}var s=n(434);n(515),n(13);function u(t){return t.filter(":checked")}n(336);n(5);function d(t){return t.find("input[type=checkbox]:not(.example)")}var l=n(435);function f(t){return t.filter(":not(:checked)")}var b=n(438);n.d(e,"a",(function(){return r.a})),n.d(e,"b",(function(){return a.a})),n.d(e,"c",(function(){return c})),n.d(e,"i",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"j",(function(){return s.a})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return f})),n.d(e,"k",(function(){return l.a})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return b.a}))},347:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(99);function a(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.c)(t,"moved",e?"Y":"N")}},348:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),a=n(104);function c(t,e){const n=Object(r.i)(t).get(0),c=n.id;t.trigger(a.a,{eventName:e,activityId:c});const o=new CustomEvent(a.a,{detail:{event:e,activityId:c},bubbles:!0,cancelable:!0,composed:!1});n.dispatchEvent(o)}},350:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(4);function a(t){return!Object(r.y)(t.closest(".wordBox"))}},351:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(36),a=n(530);function c(t){return Object(a.a)(t)&&Object(r.b)()}},352:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return o})),n.d(e,"l",(function(){return d})),n.d(e,"m",(function(){return l})),n.d(e,"j",(function(){return f})),n.d(e,"i",(function(){return b})),n.d(e,"k",(function(){return p})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return v})),n.d(e,"a",(function(){return j}));n(6),n(11),n(15),n(16);function r(t,e){return t.find("*[data-rcfinteraction='".concat(e,"']")).first()}function a(t,e){return t.$selector.find(e)}function c(t){return t.find(".jsonObject")}function o(t){return t.hasClass("complete")}const i=["start","playing","gameOver","gameWon","complete","nextQuestion"];function s(t,e){i.filter(t=>t!==e).forEach(e=>t.removeClass(e)),t.addClass(e)}function u(t){s(t,"complete")}function d(t){s(t,"playing")}function l(t){s(t,"start")}function f(t){s(t,"gameWon")}function b(t){s(t,"gameOver")}function p(t){s(t,"nextQuestion")}function O(t){t.find("div").removeClass("active")}function v(t){t.removeClass("active").first().addClass("active")}function j(t){return t.find(".dev-prompts")}},353:function(t,e,n){"use strict";n(25),n(64),n(6),n(13),n(15),n(65),n(16);var r=n(4),a=n(517);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=(t,e)=>{let n=[];return n=e.answers.reduce((e,n)=>{const c=n.elm;if(Object(r.y)(c))return e;const i=Object(a.a)(t,c);return Object(r.y)(i)||e.push(o(o({},n),{},{$interaction:i})),e},[]),n}},357:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(156);function a(t){Object(r.a)(t)}},358:function(t,e,n){"use strict";function r(t){t.prop("checked",!0)}n.d(e,"a",(function(){return r}))},364:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(377),a=n.n(r);function c(t){a.a.update(t)}},365:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(516);function a(t){t.removeClass("correct wrong"),t.removeAttr("aria-label"),Object(r.a)(t)}},369:function(t,e,n){"use strict";var r=n(4);e.a=(t,e)=>{Object(r.i)(t).toggleClass("droppableItemDragging",e)}},370:function(t,e,n){"use strict";function r(t){return t.hasClass("populated")}n.d(e,"a",(function(){return r}))},371:function(t,e,n){"use strict";function r(t){return t.closest(".dev-markable-container")}n.d(e,"a",(function(){return r}))},372:function(t,e,n){"use strict";function r(t){t.prop("checked",!1)}n.d(e,"a",(function(){return r}))},374:function(t,e,n){"use strict";var r=n(17),a=n(99),c=n(567),o=n(336),i=n(357),s=n(341),u=n(420),d=n(527),l=n(568);e.a=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t.parent();Object(i.a)(n),Object(s.a)(t),t.removeClass("selected inline"),Object(d.a)(t),Object(l.a)(t),t.html(""),Object(r.b)(t,"data-audiolink data-audiolinkid"),Object(a.b)(t,"wordItemID");const f=Object(u.a)(t);Object(c.a)(f),e&&Object(o.a)(t)}},378:function(t,e,n){"use strict";function r(t){t.removeData("user-answer")}n.d(e,"a",(function(){return r}))},379:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(11);function r(t){return t.hasClass("dev-markable-container")?t:t.find(".dev-markable-container")}},380:function(t,e,n){"use strict";e.a=t=>{const e=t.closest(".activity");return["disabled","marking","showFeedback"].some(t=>e.hasClass(t))}},381:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}));const r=t=>{t.prop("readonly",!0)},a=t=>{t.prop("readonly",!1)},c=t=>{t.attr("onclick","return false;")},o=t=>{t.removeAttr("onclick")}},388:function(t,e,n){"use strict";n(6),n(11);var r=n(338),a=n(340),c=n(60);var o=(t,e)=>{const n=t.find(".markedTextInput"),r=n.attr("aria-label"),a=e?c.a.t("components.marking.correct"):c.a.t("components.marking.incorrect");n.attr("aria-label","".concat(r,", ").concat(a))};function i(t){const e=t.$interaction,n=Object(r.a)(t),c=e.find(".dev-markable-container");Object(a.a)(c,n),o(e,n)}n.d(e,"a",(function(){return i}))},392:function(t,e,n){"use strict";var r=n(207),a=n(4);e.a=(t,e)=>{const n=Object(a.i)(t),c=t.closest("[data-rcfinteraction]");Object(r.a)(n)||1!==c.length||c.toggleClass("hasDroppableItemDragging",e)}},393:function(t,e,n){"use strict";n(6),n(15),n(16);var r=n(353);e.a=(t,e,n,a)=>{Object(r.a)(t,e).forEach(t=>a(t,n))}},394:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(11);function r(t,e){return t.find("input[type='radio'][data-rcfid='".concat(e,"']"))}},396:function(t,e,n){"use strict";n(6),n(11);e.a=t=>{t.find("option:selected").addClass("selected"),t.find("option:not(:selected)").removeClass("selected")}},399:function(t,e,n){"use strict";n(102),n(6),n(11);var r=n(5),a=n.n(r),c=n(4),o=n(642),i=n(17),s=n(448),u=n(99),d=function(t,e){const n=t.hasClass("dragItem"),r=Object(c.v)(t),a=Object(u.a)(t,"wordItemID"),o=n?r:a,s=Object(i.a)(t,"data-audiolink")||"",d=Object(i.a)(t,"data-audiolinkid")||"";""!==s&&(Object(i.c)(e,"data-audiolink",s),Object(i.c)(e,"data-audiolinkid",d));Object(u.c)(e,"wordItemID",o),Object(u.c)(t,"moved","Y")};var l=n(632),f=n(404);var b=n(374),p=n(556),O=n(341),v=n(527),j=n(60),g=n(363),m=n(370),h=n(528);var y=(t,e,n)=>{const r=Object(h.a)(t,n),a=t.attr("title"),c=e.text();Object(m.a)(t)?Object(g.a)(t,j.a.t("interactions.droppable.screenReader.droppedItemInPopulatedTarget",{targetText:r,itemText:c,targetTitle:a})):Object(g.a)(t,j.a.t("interactions.droppable.screenReader.droppedItemInEmptyTarget",{itemText:c,targetTitle:a}))},w=n(569);function C(t,e,n,r){const u=!e.hasClass("dragItem"),j=Object(c.v)(e),g=Object(s.a)(e),m=Object(s.a)(t),h=u?g:j,C=n.width(),k=t.hasClass("capitalise");let x=0,T=a.a.trim(e.html());Object(c.y)(m)||Object(p.a)(m,r),y(t,e,r),Object(w.a)(t,e),d(e,t),u&&(h&&(T=a.a.trim(r.getWordItem(h).html())),Object(b.a)(e)),t.html(""),Object(O.a)(t),t.removeClass("inline"),Object(v.a)(t),x=t.width(),t.html(T),Object(O.b)(t),Object(v.b)(t),function(t){const e=Object(l.a)(t);Object(f.a)(e)&&t.draggable("option","disabled",!1)}(t),k&&Object(o.a)(t);const I=t.find(".playing");Object(c.y)(I)||(I.removeClass("playing"),I.trigger("rcf.stop.audio")),t.find(".playing").removeClass("playing"),t.toggleClass("inline",C>x);const P=t.find(".inlinePlayerContainer");if(!Object(c.y)(P)){const t="audio_"+Object(c.u)(10);Object(i.c)(P,"data-audiolinkid",t)}}n.d(e,"a",(function(){return C}))},400:function(t,e,n){"use strict";var r=n(418);function a(t){return t.hasClass("complexCategorise")}function c(t){return t.hasClass("restricted")}n.d(e,"a",(function(){return r.a})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c}))},401:function(t,e,n){"use strict";n(102),n(6),n(13),n(48);var r=n(5),a=n.n(r);n(11);var c=t=>{const e=t.find("img").length>0,n=t.find(".inlinePlayerContainer").length>0,r=t.find(".imageAudio").length>0;return e||n||r};var o=(t,e)=>{if(c(t))return!1;const n=e.length;if(n<1)return!1;return n===e.map((t,e)=>a()(e).text().trim()).get().filter(t=>1===t.length).length};e.a=(t,e)=>{o(t,e)&&t.addClass("hasOnlySingleCharacterTokens")}},402:function(t,e,n){"use strict";e.a=t=>{const e=t.data("originalAriaLabel");t.attr("aria-label","".concat(e))}},403:function(t,e,n){"use strict";var r=n(377),a=n.n(r);e.a=t=>{a()(t),a.a.update(t)}},404:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(17),a=n(4),c=n(174),o=n(36);function i(t){const e=Object(r.a)(t,"data-usingdragdrop");if(!Object(a.y)(e))return"y"===e;const n=Object(a.i)(t),i="y"==(Object(r.a)(n,"data-desktopdraggable")||"y"),s=Object(c.a)(n),u=Object(o.c)(),d=s||!u&&i;return Object(r.c)(t,"data-usingdragdrop",d?"y":"n"),d}},405:function(t,e,n){"use strict";function r(t){return t.hasClass("dev-droppable")&&t.hasClass("dragTarget")}n.d(e,"a",(function(){return r}))},407:function(t,e,n){"use strict";var r=n(353),a=(n(6),n(13),n(4)),c=n(8);var o=t=>t.filter(t=>t.type===c.a.composite||!Object(a.y)(t.verification));e.a=(t,e)=>{const n=Object(r.a)(t,e);return o(n)}},408:function(t,e,n){"use strict";var r=n(5),a=n.n(r),c=n(29),o=(n(6),n(11),n(17)),i=n(4),s=n(357),u=n(369),d=n(392);var l=n(518),f=n(554);function b(t,e){const n=Object(c.a)();t.draggable({cancel:".inlinePlayer",cursor:"pointer",distance:5,scroll:!0,scrollSensitivity:n.draggingScrollSensitivity,scrollSpeed:10,helper:t=>{const e=a()(t.currentTarget);return Object(f.a)(e)},start:t=>{!function(t,e){const n=Object(o.a)(t,"data-audiolink"),r=Object(i.i)(t).find(".dev-droppable.selected"),a=t.siblings();Object(i.y)(r)||Object(s.a)(r),Object(u.a)(t,!0),Object(d.a)(t,!0),Object(s.a)(t),Object(s.a)(a),e.removeWordItem(t),Object(i.y)(n)||t.trigger("rcf.play.audio",[n])}(a()(t.currentTarget),e)},stop:t=>{const n=a()(t.target);Object(l.a)(n)?e.setNextWordItemActive(n):e.addWordItem(n),Object(u.a)(n,!1),Object(d.a)(n,!1)}})}n.d(e,"a",(function(){return b}))},416:function(t,e,n){"use strict";var r=n(5),a=n.n(r);e.a=(t,e)=>{t.each((t,n)=>{const r=a()(n),c=r.attr(e),o="original-".concat(e);r.data(o,c)})}},418:function(t,e,n){"use strict";function r(t){return t.closest(".categorise")}n.d(e,"a",(function(){return r}))},419:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(11);function r(t){return t.find(".mark")}},422:function(t,e,n){"use strict";n(6),n(11);e.a=t=>t.find(".rcfDroppable:not(.example) .dragTarget.movable")},423:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i}));n(101);var r=n(8);const a=["$interaction"];const c=t=>t.data("previousAttemptedAnswers"),o=t=>{t.removeData("previousAttemptedAnswers")},i=(t,e)=>{var n;if(null!==(n=e.value)&&void 0!==n&&n.completion){if([r.b.won,r.b.lost].includes(e.value.completion)){const{$interaction:n}=e;((t,e)=>{t.data("previousAttemptedAnswers",e)})(t,function(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(e,a))}}else o(t)}},424:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(59);function r(t){const e=window.top.navigator.userAgent;!!(e.match(/iPhone/i)||e.match(/iPod/i)||e.match(/iPad/i))&&t.css("-webkit-appearance","caret")}},428:function(t,e,n){"use strict";var r=n(5),a=n.n(r),c=n(154),o=n(60);e.a=t=>{Object(c.a)(t).each((t,e)=>{const n=a()(e),r=n.data("originalAriaLabel");n.attr("data-preset-answer")?n.attr("aria-label","".concat(r,", ").concat(o.a.t("interactions.typein.preset"))):n.attr("aria-label","".concat(r,", ").concat(o.a.t("interactions.typein.empty")))})}},429:function(t,e,n){"use strict";function r(t){t.val("")}n.d(e,"a",(function(){return r}))},433:function(t,e,n){"use strict";function r(t){t.prop("checked",!0)}n.d(e,"a",(function(){return r}))},434:function(t,e,n){"use strict";function r(t){return!0===t.prop("checked")}n.d(e,"a",(function(){return r}))},435:function(t,e,n){"use strict";function r(t){t.prop("checked",!1)}n.d(e,"a",(function(){return r}))},436:function(t,e,n){"use strict";function r(t,e){t.data("user-answer",e)}n.d(e,"a",(function(){return r}))},437:function(t,e,n){"use strict";function r(t){return t.data("user-answer")}n.d(e,"a",(function(){return r}))},438:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(338),a=n(8);function c(t,e,n,c){return!(n!==a.d.byItem||!c||!Object(r.a)(t,e))||!(n!==a.d.byList||!c||!Object(r.a)(t))||n===a.d.byItem&&!c||n===a.d.byList&&!c}},440:function(t,e,n){"use strict";n(6),n(15),n(16);var r=n(523),a=n(442);e.a=(t,e)=>{const n=t.$interaction,c=Object(a.a)(n);c.removeClass("incorrect"),c.val("");t.value.forEach(t=>{const a=t.elm,c=t.value;e&&t.verification&&"0"==t.verification[0]||Object(r.a)(n,a,c)})}},441:function(t,e,n){"use strict";n(6),n(11);e.a=(t,e)=>t.find("input.cwWord[data-wordid*='|".concat(e,"|']"))},442:function(t,e,n){"use strict";n(6),n(11);e.a=t=>t.find("input.cwWord:not(.example)")},443:function(t,e,n){"use strict";n(6),n(13),n(48);var r=n(562),a=n(99),c=n(4),o=n(8);e.a=t=>{const e=(Object(a.a)(t,"data-words")||[]).filter(t=>"y"!=t.isExample);return{elm:Object(c.v)(t)||"",type:o.a.composite,markType:o.d.byItem,value:e.map(e=>{const n=e.id;return{elm:n,type:o.a.simple,value:Object(r.a)(t,n)}})}}},444:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(5),a=n.n(r),c=n(442);function o(t){let e=!0;return Object(c.a)(t).each((t,n)=>{(a()(n).val()||"").length<1&&(e=!1)}),e}},445:function(t,e,n){"use strict";n(6),n(11);e.a=t=>t.find(".crosswordClueContainer")},446:function(t,e,n){"use strict";n(6),n(11);var r=n(4),a=n(421),c=n(373),o=n(359);e.a=t=>{const e=Object(r.i)(t),n=t.find(".crosswordPopup"),i=Object(a.a)(e);Object(c.a)(i),Object(o.a)(n)}},447:function(t,e,n){"use strict";n(6),n(11);e.a=t=>{t.find("input.cwWord.editing").removeClass("editing")}},448:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(99);function a(t){return Object(r.a)(t,"wordItemID")}},449:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(99),a=n(347),c=n(374),o=n(518),i=n(341),s=n(369),u=n(527);function d(t){Object(o.a)(t)?Object(c.a)(t):(Object(i.b)(t),Object(u.b)(t),t.html(Object(r.a)(t,"html"))),Object(a.a)(t,!1),Object(r.b)(t,"html"),Object(s.a)(t,!1)}},450:function(t,e,n){"use strict";var r=n(60),a=n(350),c=n(370),o=n(363);e.a=t=>{const e=t.text(),n=t.attr("title");Object(a.a)(t)?Object(o.a)(t,r.a.t("interactions.droppable.screenReader.deselectedItem",{itemText:e})):Object(c.a)(t)?Object(o.a)(t,r.a.t("interactions.droppable.screenReader.deselectedPopulatedTarget",{itemText:e,targetTitle:n})):Object(o.a)(t,r.a.t("interactions.droppable.screenReader.deselectedEmptyTarget",{targetTitle:n}))}},451:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(5),a=n.n(r),c=n(352);function o(t,e,n,r){t.on("click","".concat(e," ").concat(n),t=>{const n=a()(t.currentTarget).closest(e);Object(c.l)(n),r(n)})}},453:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(4),a=n(17);function c(t,e){t.trigger("rcf.stop.audio");const n=Object(a.a)(e,"data-audiolink")||"";Object(r.y)(n)||e.trigger("rcf.play.audio",[n])}},463:function(t,e,n){"use strict";n(6),n(11);e.a=(t,e)=>{var n;const r=t.find(".teacherScoreInput"),a=t.find(".scoreContainer.reviewFeedbackScore .scoreResult"),c=t.find(".scoreContainer.reviewFeedbackScore .scorePercentage"),o=Number(t.attr("data-maxscore")||1),i=t.find(".scoreContainer .noMarks"),s=t.find(".scoreContainer .score");i.hide(),s.hide();const u=null===(n=e.value)||void 0===n||null===(n=n.teacher)||void 0===n?void 0:n.score;if(void 0!==u&&u>=0){const t=parseInt(u/o*100);r.val(u),a.text(u),c.text(" (".concat(t,"%)")),s.show()}else i.show()}},464:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(59),n(100),n(6),n(11);var r=n(4),a=n(70);function c(t,e,n){var c;const o=t.find(".reviewTeacherInteractionComment"),i=t.find(".teacherInteractionCommentTextArea"),s=t.find(".dev-teacher-comment-container"),u=(null==e||null===(c=e.value)||void 0===c||null===(c=c.teacher)||void 0===c?void 0:c.comment)||"";n===a.a.reviewTeacherFeedback&&s.toggleClass("noComment",Object(r.y)(u)),Object(r.y)(u)||(i.val(u),o.html(Object(r.h)(u).replace(/(?:\r\n|\r|\n)/g," <br/>")))}},465:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(11);function r(t){return t.find("textarea.rcfTextArea")}},466:function(t,e,n){"use strict";var r=n(429),a=n(364),c=n(341);e.a=t=>{Object(r.a)(t),Object(a.a)(t),Object(c.a)(t)}},469:function(t,e,n){"use strict";n(6),n(11);var r=n(5),a=n.n(r);var c=t=>{t.closest("div").find(".scoreValidationErrors").html("&#160;"),t.removeClass("invalid")};var o=t=>{const e=t.currentTarget,n=e.getAttribute("min")||"",r=e.getAttribute("max")||"",o=Number(e.getAttribute("step")||.5),i=e.closest("form");e.validity.badInput?e.value="":e.validity.rangeOverflow?e.value=r:e.validity.rangeUnderflow?e.value=n:e.validity.stepMismatch?e.value="".concat(Math.floor(Number(e.value)/o)*o):e.value.length>0&&(e.value="".concat(Number(e.value))),e.setCustomValidity(""),c(a()(e)),i.reportValidity()};var i=(t,e)=>{t.addClass("invalid");t.closest("div").find(".scoreValidationErrors").html(e)};var s=t=>{const e=t.currentTarget,n=e.getAttribute("min")||"",r=e.getAttribute("max")||"",o=e.getAttribute("step")||.5,s=e.closest("form"),u=a()(e);let d="";e.validity.badInput?d="Please enter a number":e.validity.rangeUnderflow?d="Please enter a number greater than or equal to ".concat(n,"."):e.validity.rangeOverflow?d="Please enter a number less than or equal to ".concat(r,"."):e.validity.stepMismatch&&(d="Please enter a number that is a multiple of ".concat(o,".")),e.setCustomValidity(d),d.length>0?i(u,d):c(u),s.reportValidity()};e.a=t=>{const e=t.find('input[type="number"]');e.off("focus").off("input").off("blur").off("invalid"),e.on("focus",t=>t.currentTarget.select()),e.on("input",s),e.on("blur",o),e.on("invalid",t=>t.preventDefault())}},470:function(t,e,n){"use strict";n(6),n(11),n(15),n(16);var r=n(5),a=n.n(r);var c=(t,e)=>{const n=t.find('input.cwWord[data-wordid*="|'.concat(e,'|"]'));return"across"===a()(n.get().find(t=>"none"!==a()(t).attr("data-direction"))).attr("data-direction")?"horizontal":"vertical"},o=n(4);var i=(t,e,n)=>{const r=t.find('input.cwWord[data-wordid*="|'.concat(e,'|"]')),i=r.closest("td:not(.example)"),s=c(t,e),u=r.last().parent();let d=u.find(".relSpan.marks");Object(o.y)(d)&&(d=a()("\x3c!--\n--\x3e\n<span class='relSpan marks'></span>"),u.append(d));const l=n?"correctAnswer":"incorrectAnswer";i.addClass(l),d.append('<span class="mark '.concat(s," ").concat(n?"correct":"wrong",'"></span>'))};e.a=t=>{const e=t.$interaction;e.find(".mark").remove();t.value.forEach(t=>{const n=t.elm,r="1"==t.verification[0];i(e,n,r)})}},472:function(t,e,n){"use strict";var r=n(5),a=n.n(r),c=n(336),o=n(445),i=n(524),s=n(446),u=n(442);var d=t=>{const e=Object(u.a)(t),n=Object(o.a)(t);e.removeClass("incorrect"),e.val(""),Object(c.a)(e),Object(i.a)(n),Object(s.a)(t)},l=n(342),f=n(447);e.a=t=>{Object(l.a)(t),Object(f.a)(t),t.each((t,e)=>d(a()(e)))}},473:function(t,e,n){"use strict";n(6),n(11),n(15),n(16);var r=n(4),a=n(353),c=n(364);var o=(t,e,n,o)=>{const i=Object(r.i)(t);if(e.id!==i.attr("id"))throw"Invalid JSON answers provided for teacher feedback mode";Object(a.a)(t,e).forEach(t=>o(t,n));const s=t.find(".rcfTextArea");Object(c.a)(s)};e.a=(t,e,n,r,a,c)=>{r(t,n),o(t,n,e,a),c&&c()}},474:function(t,e,n){"use strict";var r=n(4);n(6),n(11);function a(t){const e=Object(r.j)(t),n=function(t){return t.find(".inlinePlayer")}(t);!Object(r.y)(n)&&n.hasClass("playing")?t.trigger("rcf.stop.audio"):t.trigger("rcf.play.audio",[e])}n.d(e,"a",(function(){return a}))},475:function(t,e,n){"use strict";n(6),n(11);var r=n(99),a=n(556),c=n(156),o=n(557),i=n(60),s=n(363),u=n(558);var d=t=>{const e=Object(u.a)(t);Object(s.a)(e,i.a.t("interactions.droppable.screenReader.clearedItemFromPopulatedTarget",{itemText:t.text(),targetTitle:e.attr("title")}))};e.a=(t,e,n)=>{if(Object(r.a)(t,"wordItemBelongsToWordBox")){const e=Object(r.a)(t,"wordItemID"),c=n.$wordBox.find('[data-rcfid="'.concat(e,'"]'));Object(a.a)(e,n),c.focus()}else{const t=Object(o.a)(e);Object(c.a)(t),t.focus()}d(t),t.remove()}},511:function(t,e,n){"use strict";var r=n(60);e.a=t=>{const e=t.data("originalAriaLabel");t.attr("aria-label","".concat(e,", ").concat(r.a.t("interactions.typein.empty")))}},512:function(t,e,n){"use strict";var r=n(428);e.a=t=>{Object(r.a)(t)}},515:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(5),a=n.n(r),c=n(434),o=n(433),i=n(435);function s(t){const e=a()(t.currentTarget);return t.preventDefault(),Object(c.a)(e)?Object(i.a)(e):Object(o.a)(e),!1}},516:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6),n(11);var r=n(5),a=n.n(r);const c=(t,e)=>{const n="boolean"==typeof e?e?"correct":"incorrect":"";(t=>{let e=t.find(".dev-mark-label");return 0===e.length&&(e=a()('<span class="dev-mark-label visually-hidden"></span>'),e.appendTo(t)),e})(t).text(n)}},517:function(t,e,n){"use strict";n(6),n(13);e.a=(t,e)=>t.filter("[data-rcfid='".concat(e,"']"))},518:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(99);function a(t){return"Y"===Object(r.a)(t,"moved")}},519:function(t,e,n){"use strict";n(6),n(11);e.a=t=>t.find(".keyboardPlaceholder").length>0},520:function(t,e,n){"use strict";n(25),n(101),n(6),n(13),n(15),n(48),n(16);var r=n(5),a=n.n(r);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=(t,e,n)=>{const r=e.value.filter(t=>t.value.includes(n));if(r.length<1)return o(o({},e),{},{$interaction:a()([])});return o(o({$interaction:t},e),{},{value:r.map(t=>o(o({},t),{},{value:[n]}))})}},523:function(t,e,n){"use strict";var r=n(5),a=n.n(r),c=n(441);e.a=(t,e,n)=>{Object(c.a)(t,e).each((t,e)=>{const r=a()(e);r.hasClass("example")||r.val(n.charAt(t))})}},524:function(t,e,n){"use strict";n(6),n(11);e.a=t=>{t.find("li.selected").removeClass("selected")}},525:function(t,e,n){"use strict";var r=n(441);e.a=(t,e,n)=>{Object(r.a)(t,e).toggleClass("editing",n)}},526:function(t,e,n){"use strict";n(6),n(11);e.a=(t,e)=>{t.find("li[data-wordid='".concat(e,"']")).addClass("selected")}},527:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n(60);const a=t=>{t.attr("aria-roledescription",r.a.t("interactions.droppable.dragItem.ariaRoleDescription"))},c=t=>{t.removeAttr("aria-roledescription")}},528:function(t,e,n){"use strict";var r=n(99);e.a=(t,e)=>{const n=Object(r.a)(t,"wordItemID");return e.getWordItem(n).text()}},529:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(347),a=n(567),c=n(448);function o(t,e){const n=Object(c.a)(t),o=e.getWordItem(n);Object(r.a)(o,!1),e.addWordItem(o),Object(r.a)(t),e.makeItemActiveIfNoneAlreadyActive(o),Object(a.a)(t)}},530:function(t,e,n){"use strict";var r=n(17);e.a=t=>"y"===Object(r.a)(t,"data-dropdownListOutput")},531:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6),n(11);var r=n(4),a=n(351);function c(t){const e=Object(r.i)(t),n=Object(a.a)(e),c=t.find("option.selected");if(c.length>0)c.prop("selected",!0);else{const e=t.find("select");e.prop("selectedIndex",-1),e.val("")}if(n){t.rcfSelectMenu("refresh")}}},532:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(352);function a(t){let e;const n=Object(r.b)(t),a=n.text();try{e=JSON.parse(a)}catch(t){throw"Error getting game settings ! \n\n"+t}return console.log("gameSettings",e),n.text(""),e}},533:function(t,e,n){"use strict";function r(t,e,n){return e/(t/n)}n.d(e,"a",(function(){return r}))},536:function(t,e,n){"use strict";var r=n(8);e.a=t=>t.hasClass("playing")?r.b.inProgress:t.hasClass("gameWon")?r.b.won:t.hasClass("nextQuestion")?r.b.inProgress:t.hasClass("gameOver")?r.b.lost:r.b.notStarted},541:function(t,e,n){"use strict";e.a=t=>{const e=t[0];return e?e.selectionStart:0}},549:function(t,e,n){"use strict";var r=n(179);var a=t=>{t.addClass("selected"),Object(r.a)(t)},c=n(60),o=n(350),i=n(370),s=n(363);var u=t=>{const e=t.text(),n=t.attr("title");Object(o.a)(t)?Object(s.a)(t,c.a.t("interactions.droppable.screenReader.selectedItem",{itemText:e})):Object(i.a)(t)?Object(s.a)(t,c.a.t("interactions.droppable.screenReader.selectedPopulatedTarget",{itemText:e,targetTitle:n})):Object(s.a)(t,c.a.t("interactions.droppable.screenReader.selectedEmptyTarget",{targetTitle:n}))};function d(t){a(t),u(t)}n.d(e,"a",(function(){return d}))},550:function(t,e,n){"use strict";n(59),n(100);e.a=t=>{let e="";return e=t.replace(/<lang ([a-zA-Z]{2}(?:-[a-zA-Z]{2})?)>/gm,'<span lang="$1">'),e=e.replace(/<\/lang>/gm,"</span>"),e}},551:function(t,e,n){"use strict";n(59),n(100);e.a=t=>{let e;return e=t.replace(/<(?: *?)script(?:.*?)>/gm,""),e=e.replace(/<(?: *?)\/(?: *?)script(?:.*?)>/gm,""),e}},553:function(t,e,n){"use strict";function r(t){t.removeClass("correctAnswer incorrectAnswer")}n.d(e,"a",(function(){return r}))},554:function(t,e,n){"use strict";function r(t){return t.clone()}n.d(e,"a",(function(){return r}))},555:function(t,e,n){"use strict";n(6),n(11);var r=n(4),a=n(357),c=n(549),o=n(519),i=n(475);e.a=(t,e,n)=>{const s=e.find(".selected"),u=t.siblings();if(Object(o.a)(e)){const t=e.find(".keyboardPlaceholder");Object(i.a)(t,e,n)}Object(r.y)(s)||Object(a.a)(s),Object(r.y)(u)||Object(a.a)(u),Object(c.a)(t)}},556:function(t,e,n){"use strict";function r(t,e){const n=e.getWordItem(t);e.addWordItem(n),e.makeItemActiveIfNoneAlreadyActive(n)}n.d(e,"a",(function(){return r}))},557:function(t,e,n){"use strict";n(6),n(11);e.a=t=>t.find(".dragTarget.selected")},558:function(t,e,n){"use strict";e.a=t=>t.parent()},559:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(5),a=n.n(r),c=n(474),o=n(4);function i(t){t.on("click",".clickAndStickable .inlinePlayerContainer[data-audiolink]",(function(t){const e=a()(this);Object(c.a)(e),Object(o.F)(t)})),t.on("click",".clickAndStickable .imageAudio[data-audiolink]",(function(){const t=a()(this);Object(c.a)(t)}))}},562:function(t,e,n){"use strict";n(48);var r=n(5),a=n.n(r),c=n(441);e.a=(t,e)=>Object(c.a)(t,e).map((t,e)=>a()(e).val()||" ").get().join("").toUpperCase()},563:function(t,e,n){"use strict";var r=n(564);e.a=t=>Object(r.a)(t,"data-wordsjson")},564:function(t,e,n){"use strict";var r=n(17);e.a=(t,e)=>{const n=Object(r.a)(t,e)||"";return n.length>0?JSON.parse(n):void 0}},565:function(t,e,n){"use strict";var r=n(99);e.a=(t,e)=>{Object(r.c)(t,"data-words",e)}},566:function(t,e,n){"use strict";var r=n(17);e.a=t=>{Object(r.b)(t,"data-wordsjson"),Object(r.b)(t,"data-hiddenwordsjson")}},567:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(404),a=n(632);function c(t){const e=Object(a.a)(t);Object(r.a)(e)&&(t.draggable("option","disabled")||t.draggable("option","disabled",!0))}},568:function(t,e,n){"use strict";var r=n(5),a=n.n(r);e.a=t=>{t.each((t,e)=>{const n=a()(e),r=n.data("originalTitle");n.attr("title",r)})}},569:function(t,e,n){"use strict";n(59),n(100);var r=n(60);e.a=(t,e)=>{const n=t.data("originalTitle").replace(", ".concat(r.a.t("interactions.droppable.dropTarget.empty")),""),a=e.text();t.attr("title","".concat(n,", ").concat(a))}},570:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(175);function a(t){return Object(r.a)(t)}},574:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(17);function a(t){let e="";return e=Object(r.a)(t,"id")||"",e+=Object(r.a)(t,"data-seed")||Math.random(),Math.seedrandom(e),e}},587:function(t,e,n){"use strict";var r=n(4);e.a=t=>{const e=t.closest("span.typeinGroup");return Object(r.v)(e)}},602:function(t,e,n){"use strict";n(101);var r=n(376),a=(n(6),n(11),n(5)),c=n.n(a);var o=t=>c()(t.target),i=n(405),s=n(570),u=n(350);const d=(t,e)=>{const n=f(e),r=n.index(t);if(r>0){return n.eq(r-1)}},l=(t,e)=>{const n=f(e),r=n.index(t);if(r<n.length-1){return n.eq(r+1)}},f=t=>t.find(".ui-draggable:not(.example, .dragged)");var b=t=>t.find(".dragTarget.selected").length>0,p=n(73);var O=t=>{t.hasClass("collapsed")&&(t.removeClass("collapsed"),Object(p.a)(t))};var v=(t,e,n)=>{const r=o(t);if(O(n),Object(i.a)(r)&&Object(s.a)(r)){n.find(".dragItem:not(.dragged)").first().focus()}else if(Object(u.a)(r)&&b(e)){const t=l(r,e);t&&t.length>0&&t.hasClass("dragItem")&&t.focus()}};var j=t=>t.find(".dragTarget.selected:not(.populated)");var g=(t,e,n)=>{const r=o(t);if(O(n),Object(u.a)(r)&&b(e)){const t=d(r,e);if(t&&t.hasClass("dragItem"))t.focus();else{j(e).focus()}}},m=(n(13),n(357));var h=t=>t.hasClass("keyboardPlaceholder"),y=n(60),w=n(370),C=n(528);var k=(t,e,n)=>{const r=t.attr("title"),a=e.text();if(Object(w.a)(t)){const e=Object(C.a)(t,n);return y.a.t("interactions.droppable.screenReader.dropItemInPopulatedTarget",{targetText:e,placeholderText:a,targetTitle:r})}return y.a.t("interactions.droppable.screenReader.dropItemInEmptyTarget",{placeholderText:a,targetTitle:r})};var x=(t,e,n,r)=>{const a=t.parent();if(r){const r=d(a,e);if(r&&r.length>0&&r.hasClass("dragTarget")){const e=k(r,t,n);t.attr("title",e),r.prepend(t),t.focus()}}else{const r=l(a,e);if(r&&r.length>0&&r.hasClass("dragTarget")){const e=k(r,t,n);t.attr("title",e),r.prepend(t),t.focus()}}},T=n(99),I=n(4);var P=(t,e,n)=>{const r=Object(u.a)(t),a=r?Object(I.v)(t):Object(T.a)(t,"wordItemID"),o=c()('<span class="keyboardPlaceholder selected" tabindex="0">'.concat(t.text(),"</span>")),i=k(e,o,n);o.attr("title",i),Object(T.c)(o,"wordItemID",a),Object(T.c)(o,"wordItemBelongsToWordBox",r),e.prepend(o),o.focus()};const A=(t,e)=>{Object(m.a)(t),e.removeWordItem(t),e.setNextWordItemActive(t)};var S=(t,e,n,r,a)=>{const c=n.$wordBox.has(t.get(0)).length>0,o=e.find(".dragTarget:not(.example)");if(c){const e=o.filter(".last-focus"),r=a?o.last():o.first();e.length>0?(A(t,n),P(t,e,n)):r&&(A(t,n),P(t,r,n))}else if(h(t)){x(t,e,n,a)}else{const r=a?d(t,e):l(t,e);r&&-1!==o.index(r)&&P(t,r,n)}};var D=(t,e)=>!(!Object(u.a)(t)||!e.hasClass("collapsed"));var E=(t,e,n)=>{const r=f(e),a=r.index(t);if(a>0){const t=r.eq(a-1);D(t,n)&&O(n),t.focus()}};var W=(t,e,n)=>{const r=o(t);r.hasClass("selected")?Object(i.a)(r)&&!Object(w.a)(r)||S(r,e,n,t,!0):b(e)||E(r,e,n.$wordBox)};var $=(t,e,n)=>{const r=f(e),a=r.index(t);if(a<r.length-1){const t=r.eq(a+1);D(t,n)&&O(n),t.focus()}};var B=(t,e,n)=>{const r=o(t);r.hasClass("selected")?Object(i.a)(r)&&!Object(w.a)(r)||S(r,e,n,t,!1):b(e)||$(r,e,n.$wordBox)},R=n(549),N=n(399),M=n(420),F=n(557),L=n(558);var q=t=>t.hasClass("ui-draggable-handle"),H=n(450);var U=(t,e,n)=>{const r=o(t),a=Object(F.a)(e);if(!r.hasClass("ui-draggable-disabled")&&r.hasClass("selected"))if(h(r)){const t=r,a=Object(L.a)(t),c=Object(T.a)(t,"wordItemBelongsToWordBox"),o=Object(T.a)(t,"wordItemID"),i=c?n.getWordItem(o):e.find(".dragTarget.selected").first();a.is(i)||Object(N.a)(Object(M.a)(a),Object(M.a)(i),i,n),a.focus(),t.remove(),Object(m.a)(a)}else Object(m.a)(r),Object(H.a)(r);else b(e)&&Object(u.a)(r)?(n.removeWordItem(r),n.setNextWordItemActive(r),Object(N.a)(Object(M.a)(a),Object(M.a)(r),r,n),a.focus(),Object(m.a)(a)):r.is(a)?(Object(m.a)(a),Object(H.a)(a)):q(r)&&Object(R.a)(r)},V=n(175),_=n(529),G=n(449),J=n(156);var K=t=>j(t).length>0,z=n(475),Q=n(363);var Y=(t,e)=>{const n=Object(C.a)(t,e);Object(Q.a)(t,y.a.t("interactions.droppable.screenReader.clearedItemFromPopulatedTarget",{itemText:n,targetTitle:t.attr("title")}))};var Z=(t,e,n)=>{const r=o(t),a=Object(u.a)(r),c=Object(V.a)(r),s="Tab"===t.key;if(a&&c)Object(m.a)(r),Object(H.a)(r);else if(a&&K(e)){const t=j(e);Object(J.a)(t),t.focus(),Object(H.a)(t)}else if(h(r)){const t=r;Object(z.a)(t,e,n)}else Object(i.a)(r)&&Object(w.a)(r)&&!s?(Y(r,n),Object(_.a)(Object(M.a)(r),n),Object(G.a)(r)):Object(i.a)(r)&&c&&(Object(J.a)(r),Object(H.a)(r))},X=n(380);var tt=(t,e,n)=>{const a=Object(r.a)(t);if(!Object(X.a)(e)||["ArrowLeft","ArrowRight"].includes(a.key))switch(a.key){case" ":case"Enter":U(a,e,n);break;case"ArrowUp":g(a,e,n.$wordBox);break;case"ArrowDown":v(a,e,n.$wordBox);break;case"ArrowLeft":W(a,e,n);break;case"ArrowRight":B(a,e,n);break;case"Escape":case"Backspace":case"Tab":Z(a,e,n)}};var et=t=>{const e=Object(r.a)(t),n=o(e);c()(t.delegateTarget).find(".ui-droppable").removeClass("last-focus"),n.addClass("last-focus")};e.a=(t,e,n)=>{e.on("keydown",e=>{tt(e,t,n)}),t.on("keydown",".rcfDroppable:not(.example) .ui-draggable",e=>{tt(e,t,n)}),t.on("focus",".rcfDroppable:not(.example) .ui-draggable",et)}},612:function(t,e,n){"use strict";var r=n(36),a=(n(6),n(11),n(5)),c=n.n(a),o=n(445);var i=t=>{t.on("click","td.word:not(.example)",t=>{const e=c()(t.currentTarget).find("input");e.hasClass("example")||e.focus()})},s=(n(15),n(16),n(447)),u=n(524),d=n(526),l=(n(13),n(17));var f=t=>(Object(l.a)(t,"data-wordid")||"").split("|").filter(t=>t.length>0),b=n(525);var p=(t,e)=>{t.on("focus","input.cwWord",n=>{const r=c()(n.currentTarget),a=f(r);Object(s.a)(t),Object(u.a)(e),a.forEach(n=>{Object(b.a)(t,n,!0),Object(d.a)(e,n)})})},O=n(99),v=n(382);const j=t=>t.which>=37&&t.which<=40||"Tab"===t.key,g=t=>t.ctrlKey||t.shiftKey||t.altKey||t.metaKey,m=(t,e,n)=>{const r=t.find("td[data-cellid='r".concat(e,"c").concat(n,"']")).find("input");r.length>0&&(r.select(),r.focus())},h=(t,e)=>{const n=e.closest("td");let r=e.attr("data-direction"),a=Object(O.a)(t,"current-orientation")||"none";return"none"===a&&"none"===r&&(a="across",r="across",Object(O.c)(t,"current-orientation",r)),r!==a&&"none"!==r?Object(O.c)(t,"current-orientation",r):r=a,{orientation:r,currentCol:Number(n.attr("data-col")||0),currentRow:Number(n.closest("tr").attr("data-row")||0)}};var y=t=>{const e=Object(o.a)(t);i(t),p(t,e),t.on("keydown","input.cwWord",e=>{const n=e,r=c()(e.currentTarget);console.log(new Date,"keydown:",n.key,":",n.which);let{orientation:a,currentCol:o,currentRow:i}=h(t,r);if(j(n)||"Backspace"==n.key||g(n)){if(e.preventDefault(),j(n))switch(n.which){case 37:o--;break;case 38:i--;break;case 39:o++;break;case 40:i++}else"Backspace"==n.key&&(r.hasClass("example")||r.val(""),"down"===a?i--:"across"===a&&o--);m(t,i,o)}}),t.on("keyup","input.cwWord",e=>{const n=e,r=c()(e.currentTarget);if((r.val()||"").length<1)return;let{orientation:a,currentCol:o,currentRow:i}=h(t,r);Object(v.a)(n.which)&&"Dead"!==n.key&&39!==n.which&&!g(n)&&("down"===a?i++:"across"===a&&o++,m(t,i,o),e.preventDefault(),e.stopImmediatePropagation())})},w=(n(102),n(441)),C=n(562),k=n(359);var x=(t,e,n)=>{const r=t.find(".crosswordPopup"),a=t.find(".clue[data-wordid=".concat(n,"]")),c=r.find(".crosswordMobileTypein"),o=r.find(".crosswordClueLabel"),i=Object(w.a)(t,n);let s=Object(C.a)(t,n).trim();const u=i.length;s.length<u&&(s=i.get(0).value),c.attr("maxlength",u),c.val(s),o.html(a.html()+" (".concat(u,")")),Object(O.c)(r,"data-wordid",n),Object(k.c)(e,r,i.eq(0)),c.focus()};var T=t=>{const e=Object(o.a)(t);e.on("click","li.clue:not(.example)",n=>{const a=c()(n.currentTarget);e.find(".selected").removeClass("selected"),a.addClass("selected");const o=Object(l.a)(a,"data-wordid")||"";Object(d.a)(e,o),Object(s.a)(t),Object(b.a)(t,o,!0),Object(r.c)()&&x(t,n,o)})},I=n(4),P=n(421);n(59),n(100);var A=t=>{t.on("click","input.cwWord:not(.example)",e=>{const n=c()(e.currentTarget);if("none"===n.attr("data-direction"))return;const r=n.attr("data-wordid").replace(/\|/g,"");x(t,e,r),Object(I.F)(e)})},S=n(523);var D=(t,e)=>{const n=e.find(".crosswordMobileTypein").val(),r=Object(O.a)(e,"data-wordid")||"";Object(S.a)(t,r,n)},E=n(446);var W=t=>{const e=t.find(".crosswordPopup");e.on("click",".okButton",()=>{D(t,e),Object(E.a)(t)}),e.on("click",".cancelButton",()=>{Object(E.a)(t)}),e.on("keyup",n=>{(n.key&&"Enter"===n.key||13===n.keyCode||13===n.which)&&(D(t,e),Object(E.a)(t)),(n.key&&"Escape"===n.key||27===n.keyCode||27===n.which)&&Object(E.a)(t)})},$=n(373);var B=t=>{const e=t.find(".crosswordPopup"),n=Object(I.i)(t),r=Object(P.a)(n);A(t),W(t),r.on("click",()=>{Object($.a)(r),Object(k.a)(e)})},R=n(442);var N=t=>{Object(R.a)(t).attr("readonly","")};e.a=t=>{T(t),Object(r.b)()?y(t):(B(t),N(t))}},613:function(t,e,n){"use strict";var r=n(422),a=n(5),c=n.n(a),o=n(29),i=n(17),s=n(4),u=n(448);n(6),n(11);var d=n(347),l=n(99),f=n(357),b=n(369);var p=n(449);function O(t,e){const n=Object(o.a)();t.draggable({cancel:".inlinePlayer",distance:5,hoverClass:"dragOverDrop",scroll:!0,disabled:!0,scrollSensitivity:n.draggingScrollSensitivity,scrollSpeed:10,helper:n=>function(t,e,n){const r=Object(u.a)(t);if(Object(s.y)(r))return c()([]);const a=n.getWordItem(r),o=a.clone().removeClass("dragged"),d=t.width()+1,l=n.$wordBox;Math.abs(d-a.width())>10?e.draggable("option","cursorAt",{left:25,top:5}):e.draggable("option","cursorAt",null),l.prepend(o);const f=Object(i.a)(o,"id")||"";return Object(i.c)(o,"id",f+"_clone"),o}(c()(n.currentTarget),t,e),start:t=>{!function(t){const e=Object(i.a)(t,"data-audiolink"),n=t.html(),r=Object(s.i)(t).find(".dev-droppable.selected");Object(s.y)(r)||Object(f.a)(r),Object(b.a)(t,!0),Object(d.a)(t,!1),Object(l.c)(t,"html",n),t.removeClass("selected populated"),t.parent().removeClass("selected"),t.html(""),Object(s.y)(e)||t.trigger("rcf.play.audio",[e])}(c()(t.currentTarget))},stop:t=>{const e=c()(t.target);Object(p.a)(e)}})}var v=n(399);var j=n(408),g=n(529);e.a=(t,e)=>{const n=e.getWordItems(),a=e.$wordBox,o=Object(r.a)(t);Object(j.a)(n,e),O(o,e),function(t,e){t.droppable({cursor:"pointer",tolerance:"intersect",hoverClass:"dragOverDrop",accept:".dragTarget",drop:(t,n)=>{const r=n.draggable;Object(g.a)(r,e)}})}(a,e),function(t,e){t.droppable({accept:".dragItem, .dragTarget",hoverClass:"dragOverDrop",revert:"invalid",greedy:"true",tolerance:"pointer",drop:(t,n)=>{const r=n.draggable,a=c()(t.target),o=n.helper,i=Object(s.v)(a.parent())||"",u=Object(s.v)(r)||"",d=Object(s.i)(a).find(".dev-droppable.selected");Object(s.y)(d)||Object(f.a)(d),Object(v.a)(a,r,o,e),a.trigger("rcf.droppable.answer.changed",[i,u])}})}(o,e)}},616:function(t,e,n){"use strict";n(6),n(11);var r=n(5),a=n.n(r),c=n(4),o=n(529),i=n(449),s=n(405),u=n(357),d=n(519),l=n(475),f=n(450);var b=(t,e)=>{let n=t.find(".dev-droppable.selected");if(Object(d.a)(t)){const n=t.find(".keyboardPlaceholder");Object(l.a)(n,t,e)}if(Object(c.y)(n))return;if(!Object(s.a)(n))return Object(f.a)(n),void Object(u.a)(n);const r=n;Object(o.a)(r,e),Object(i.a)(r)},p=n(555),O=n(399),v=n(370),j=n(549),g=n(570);var m=(t,e,n)=>{const r=t.find(".dev-droppable.selected");if(Object(d.a)(t)){const e=t.find(".keyboardPlaceholder");Object(l.a)(e,t,n)}if(Object(c.y)(r))return void(Object(v.a)(e)&&Object(j.a)(e));if(Object(g.a)(r)&&Object(g.a)(e))return Object(u.a)(e),void Object(f.a)(e);const a=Object(s.a)(r);if(a)return Object(u.a)(r),void(Object(v.a)(e)&&Object(j.a)(e));n.removeWordItem(r),n.setNextWordItemActive(r),Object(O.a)(e,r,r,n),a&&Object(i.a)(r),Object(u.a)(r),Object(f.a)(r);const o=Object(c.v)(e.parent())||"",b=Object(c.v)(r)||"";o&&b&&e.trigger("rcf.droppable.answer.changed",[o,b])},h=n(559);const y=t=>t.hasClass("audioPlayButton")||t.hasClass("audioPauseButton"),w=t=>t.hasClass("imageAudio");e.a=(t,e,n)=>{const r=t.find(".rcfDroppable.clickAndStickable:not(.example)");e.on("click",e=>{e.originalEvent&&e.originalEvent.rcfHandled||b(t,n)}),Object(h.a)(e),e.on("click",".clickAndStickable:not(.example,.selected)",t=>{const e=a()(t.currentTarget);e.hasClass("ui-draggable-draggable")||(Object(p.a)(e,r,n),t.originalEvent&&(t.originalEvent.rcfHandled=!0))}),t.on("click",".rcfDroppable.clickAndStickable:not(.example) .dragTarget",e=>{const r=a()(e.currentTarget),c=a()(e.target);y(c)&&!w(c)||r.hasClass("ui-draggable-draggable")||m(t,r,n)})}},617:function(t,e,n){"use strict";n(6),n(11);var r=n(5),a=n.n(r),c=n(60),o=n(4),i=n(341),s=n(380),u=n(531),d=n(396),l=n(420);var f=t=>{const e=t.get(0).offsetHeight,n=t.data("heightCache");if(n&&n.offsetHeight===e)return n.boundingHeight;const r=t.get(0).getBoundingClientRect().height;return t.data("heightCache",{offsetHeight:e,boundingHeight:r}),r};const b=(t,e)=>{const n=t.find(".ui-menu-clear-option"),r=n.index(),a=0===r,c=r===t.children().length-1;e&&!c?n.detach().appendTo(t):e||a||n.detach().prependTo(t)};var p=t=>{const e=Object(o.i)(t),n=t.parent(),r=Object(l.a)(t);r.rcfSelectMenu({width:null,appendTo:n,position:{within:e,collision:"fit flip",using:function(t,e){const n=a()(this),c=r.rcfSelectMenu("widget"),o="bottom"===e.vertical,i=f(c);t.top=!0===o?t.top+i:t.top-i,b(r.rcfSelectMenu("menuWidget"),o),n.css(t),n.toggleClass("ui-selectmenu-menu-flipped",o),c.toggleClass("ui-selectmenu-menu-flipped",o)}},create:()=>{const t=r.data("customRcfSelectMenu");t._renderMenu=(e,n)=>{a.a.each(n,(function(n,r){t._renderItemData(e,r)}));const o=a()(e),i=o.parent(),s=o.find("li"),u=o.find("li:first-child"),d=u.children();r.closest("select").find("option:selected").addClass("selected"),s.each((t,e)=>{const r=a()(e);r.attr("data-index",t),n[t].element[0].selected?r.addClass("selected").attr("aria-selected","true"):r.attr("aria-selected","false")}),i.addClass("hasClear"),u.addClass("ui-menu-clear-option"),d.attr("aria-label",c.a.t("interactions.dropDown.clearOption"))}},close:()=>{r.rcfSelectMenu("widget").removeClass("ui-selectmenu-menu-flipped")},change:(t,e)=>{const a=e.item.index,c=n.find(".ui-menu-item[data-index=".concat(a,"]")),o=!c.hasClass("ui-menu-clear-option"),l=c.closest(".dropDown");Object(i.c)(l,o),Object(s.a)(c)?Object(u.a)(r):(Object(d.a)(l),c.siblings().removeClass("selected").attr("aria-selected","false"),c.addClass("selected").attr("aria-selected","true"))}})};e.a=t=>{t.find("select").each((t,e)=>{const n=a()(e);p(n)})}},622:function(t,e,n){"use strict";n(6),n(11);var r=n(339),a=(n(59),n(100),n(5)),c=n.n(a),o=n(60);var i=t=>{t.each((t,e)=>{const n=c()(e),r=n.attr("aria-label").replace(", ".concat(o.a.t("components.marking.correct")),"").replace(", ".concat(o.a.t("components.marking.incorrect")),"");n.attr("aria-label","".concat(r))})};e.a=t=>{Object(r.a)(t);const e=t.find(".markedTextInput");i(e)}},623:function(t,e,n){"use strict";n(6),n(11);var r=n(5),a=n.n(r),c=n(523),o=n(4),i=n(525),s=n(526),u=n(524),d=n(447);var l=(t,e,n)=>{const r=a()(t.currentTarget);if((Object(o.v)(r)||"")!==e.elm)return;const l=e.value.find(t=>t.elm===n);l&&(Object(u.a)(r),Object(s.a)(r,l.elm),Object(c.a)(r,l.elm,l.value),Object(d.a)(r),Object(i.a)(r,l.elm,!0))};e.a=(t,e)=>{t.on("rcf.single.answer","*[data-rcfinteraction='".concat(e,"']"),l)}},625:function(t,e,n){"use strict";var r=n(348),a=n(574);var c=n(104);function o(t,e){Object(r.a)(e,c.b.isStartScreen),function(t){!(!window.Phaser&&1)||(t.addClass("missingLibrary"),t.html("<h2>PhaserJS library missing</h2><h3>This activity requires the use of the PhaserJS game library</h3>"))}(e),Object(a.a)(t),e[0].oncontextmenu=t=>t.preventDefault()}n.d(e,"a",(function(){return o}))},626:function(t,e,n){"use strict";var r=n(5),a=n.n(r),c=n(4),o=n(14);e.a=()=>{const t=a()("style#balloonFont");if(!Object(c.y)(t))return;const e="".concat(Object(o.a)(),"fonts/"),n="".concat(e,"Castledown/Castledown-Fun-Web.woff2"),r=function(){let t=document.createElement("style");return t.id="balloonFont",t.appendChild(document.createTextNode("")),document.head&&document.head.appendChild(t),t.sheet}();r.insertRule("@font-face {\n\t\t\t\tfont-family: 'castledown';\n\t\t\t\tsrc: url('".concat(n,"') format('woff2');\n\t\t\t\tfont-weight: normal;\n\t\t\t\tfont-style: normal;\n\t\t\t}"),r.cssRules.length)}},632:function(t,e,n){"use strict";var r=n(4);function a(t){const e=t.closest(".itemComplexDroppableBlock");const n=Object(r.i)(t);return!Object(r.y)(e)?e:n}n.d(e,"a",(function(){return a}))},645:function(t,e,n){"use strict";n(25),n(59),n(100),n(6),n(13),n(15),n(16);var r=n(29);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=t=>{const e=Object(r.a)().mediaFormats.audio.format;if(t.settings=c(c({},t.settings),{},{audioFormat:e}),"mp3"!==e){(t.questions||[]).filter(t=>t.audio).forEach(t=>{t.audio=t.audio.replace(/mp3$/,e)})}}},646:function(t,e,n){"use strict";n(6),n(11);var r=n(60),a=n(348),c=n(352),o=n(4),i=n(104);e.a=t=>{const e=r.a.language,n=Object(o.i)(t);Object(c.m)(t),Object(a.a)(n,i.b.isStartScreen),t.removeClass("paused");const s=t.find(".stagingScreen.startScreen .startGameButton");s.attr("lang",e),s.focus()}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/utils/rcfInteractionUtils.js.map