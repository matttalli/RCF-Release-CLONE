(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/utils/tileMaze/rcfTileMazeSharedUtils"],{345:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return f})),n.d(e,"f",(function(){return m})),n.d(e,"d",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return g}));n(6),n(11);var r=n(5),i=n.n(r);const o=t=>t.find(".tileMazeStageContainer").first(),a=t=>t.find(".tileMazeContainer").first(),s=()=>i()(".tileMazeCollection ul"),c=t=>{o(t).addClass("disabled")},u=t=>{o(t).removeClass("disabled")},l=()=>{s().empty()},d=t=>{i()(".nextQuestionText").html("").append(t)},f=(t,e)=>{const n=i()(".invalidTileMaze");n.removeClass("hidden"),n.find("h3").html(e),a(t).addClass("hidden")},m=(t,e)=>t.find(".prompt.tileMazePrompt[data-rcfid='".concat(e,"']")),h=t=>t.find(".tileMazePrompt.active .inlinePlayerContainer, .tileMazePrompt.active .imageAudio"),p=t=>{t.find(".tileMazeStageContainer .lives .life:not(.dead):first").addClass("dead")},b=t=>{t.find(".tileMazeStageContainer .lives .life.dead").removeClass("dead")},v=t=>{t.find("canvas").first().attr("tabindex","0")},g=(t,e)=>{t.find(e).first().focus()}},349:function(t,e,n){"use strict";n.d(e,"o",(function(){return r})),n.d(e,"p",(function(){return i})),n.d(e,"q",(function(){return o})),n.d(e,"r",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"n",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"m",(function(){return f})),n.d(e,"s",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"l",(function(){return b})),n.d(e,"j",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return y}));const r={start:"start",finish:"finish",platforms:["platform_1","platform_2","platform_3"],backgrounds:["background_1","background_2","background_3","empty"],player:"idle_1",empty:"empty",failPlatforms:["fail_platform_1","fail_platform_2","fail_platform_3"]},i={alternative:"alternativeSpriteSheet",default:"defaultSpriteSheet"},o=150,a=-o/2+10,s=3,c=40,u=2*c,l=3*c,d=3*o,f=3,m=350,h=36,p=26,b=16/p,v=120,g=110,O=32,j=2,y={idle:.08,bounceBack:.03,fail:.05,moveVertical:.35,moveHorizontal:.35}},383:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));const r={disableGameStage:"rcf.tilemaze.disable",enableGameStage:"rcf.tilemaze.enable",loseLife:"rcf.tilemaze.lose.life",gameOver:"rcf.tilemaze.game.over",gameWon:"rcf.tilemaze.game.won",questionComplete:"rcf.tilemaze.question.complete"},i=t=>{t.trigger(r.loseLife)}},452:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(349);function i(t){return{x:t.row*r.q+r.q/2,y:t.column*r.q+r.q/2+r.n}}},454:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=Object.freeze({resetQuestions:"resetQuestions",replayQuestion:"replayQuestion"})},457:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(15),n(16);function r(t,e){Object.keys(e).forEach(n=>{t[n]=e[n]})}},468:function(t,e,n){"use strict";var r=n(334),i=(n(25),n(31),n(6),n(13),n(15),n(16),n(452)),o=n(4);var a=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.08;return t.playing&&t.stop(),new Promise(r=>{t.animationSpeed=n,t.textures=e,t.onComplete=()=>{r(),t.onComplete=void 0},t.gotoAndPlay(0)})};n(48);var s=(t,e)=>e.map(e=>t.textures[e]);var c=t=>({idle:s(t,["idle_1","idle_2","idle_1"]),moveVertical:s(t,["vertical_action_1","vertical_action_1","vertical_action_2","vertical_action_2","vertical_action_2","vertical_action_3","vertical_action_3"]),moveHorizontal:s(t,["horizontal_action_1","horizontal_action_1","horizontal_action_2","horizontal_action_2","horizontal_action_2","horizontal_action_2","horizontal_action_3","horizontal_action_3"]),fail:s(t,["fail_1","fail_2","transparent"]),bounceBack:s(t,["bounce_back"])}),u=n(349);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=class{constructor(t){d(this,"camera",void 0),d(this,"_sprite",void 0),d(this,"timeOut",void 0),d(this,"animationTextures",void 0),this.animationTextures=c(t),this.sprite=new r.AnimatedSprite(this.animationTextures.idle),this.sprite.updateAnchor=!0,this.sprite.loop=!1,this.camera=new r.Sprite(r.Texture.EMPTY),this.camera.addChild(this.sprite)}get gridPosition(){return this.sprite.tileLocation}set gridPosition(t){const{x:e,y:n}=Object(i.a)(t);this.camera.position.set(e,n-u.d),this.sprite.position.set(0,u.d),this.camera.tileLocation=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}set sprite(t){this._sprite=t}get sprite(){return this._sprite}get canMove(){return!this.sprite.playing||this.sprite.textures===this.animationTextures.idle}playIdleAnimation(){const t=this;t.sprite.textures!==this.animationTextures.idle&&(t.sprite.playing&&t.sprite.stop(),t.sprite.textures=this.animationTextures.idle),this.timeOut=setTimeout(()=>{t.sprite.animationSpeed=u.a.idle,t.sprite.gotoAndPlay(0),t.playIdleAnimation()},1e3*Object(o.t)(1.5,3))}async playBounceBackAnimation(){return a(this.sprite,this.animationTextures.bounceBack,u.a.bounceBack)}async playFailAnimation(){return a(this.sprite,this.animationTextures.fail,u.a.fail)}async playVerticalMoveAnimation(){return a(this.sprite,this.animationTextures.moveVertical,u.a.moveVertical)}async playHorizontalMoveAnimation(){return a(this.sprite,this.animationTextures.moveHorizontal,u.a.moveHorizontal)}stopAnimation(){0!=parseInt(this.timeOut)&&(clearTimeout(this.timeOut),this.timeOut=0),this.sprite.stop(),this.sprite.textures=this.animationTextures.idle,this.sprite.gotoAndStop(0)}close(){this.stopAnimation(),this.sprite.destroy({children:!0,texture:!0,baseTexture:!1})}};let m;n.d(e,"c",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return b}));const h=t=>(m=new f(t),m),p=()=>m,b=()=>{m&&(m.close(),m=void 0)}},534:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(468);function i(t){const e=Object(r.c)();e&&e.stopAnimation(),t.removeChildren()}},535:function(t,e,n){"use strict";var r=n(348),i=n(345),o=n(352),a=n(104);e.a=t=>{const e=Object(i.g)(t);Object(o.m)(e),Object(r.a)(t,a.b.isStartScreen),Object(i.c)(t,".tileMazeContainer .startGameButton")}},538:function(t,e,n){"use strict";function r(t,e,n,r){const i=[],{column:o,row:a}=e;return a+1<r&&!t[o][a+1].used&&i.push({column:o,row:a+1}),a-1>=0&&!t[o][a-1].used&&i.push({column:o,row:a-1}),o+1<n&&!t[o+1][a].used&&i.push({column:o+1,row:a}),o-1>=0&&!t[o-1][a].used&&i.push({column:o-1,row:a}),i}n.d(e,"a",(function(){return r}))},540:function(t,e,n){"use strict";n(25),n(31),n(6),n(13),n(15),n(16);var r=n(648),i=n(349),o=n(452);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=(t,e)=>{const{x:n,y:c}=Object(o.a)(e),u=t.camera.y,l=0===Math.abs(u-c);return t.stopAnimation(),l?t.playHorizontalMoveAnimation():t.playVerticalMoveAnimation(),new Promise(o=>{t.camera.tileLocation=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e),r.a.get(t.camera).to({x:n,y:c-i.d},i.s).call(()=>{t.playIdleAnimation(),o()})})}},576:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(59),n(100);var r=n(17),i=n(209);function o(t){let e,n=Object(r.a)(t,"data-questionsjson")||"";const o=Object(i.a)();try{e="audio/ogg"!==o?JSON.parse(n):JSON.parse(n,(t,e)=>e.toString().endsWith(".mp3")?e.replace(".mp3",".ogg"):e)}catch(t){throw console.error(n),"Error getting game settings ! \n\n"+t}return Object(r.b)(t,"data-questionsjson"),console.log("game data:",e),e}},577:function(t,e,n){"use strict";var r=n(349);e.a=t=>Math.max(t.height(),r.k)},578:function(t,e,n){"use strict";var r=n(334),i=n(17);e.a=(t,e,n)=>{n.height(e);const o=new r.Application({backgroundColor:16777215,width:t,height:e,antialias:!0});return Object(i.b)(n,"style"),o.renderer.view.style.touchAction="auto",o.renderer.plugins.interaction.autoPreventDefault=!1,o}},579:function(t,e,n){"use strict";var r=n(643);e.a=(t,e,n)=>new r.a({interaction:t.renderer.plugins.interaction,screenWidth:e,screenHeight:n,passiveWheel:!1}).clamp({direction:"all"}).clampZoom({minWidth:450,maxWidth:900,minHeight:450,maxHeight:900}).pinch().wheel({smooth:5})},580:function(t,e,n){"use strict";function r(t,e){const n=Array.from(Array(t),()=>new Array(e));let r=0;for(let i=0;i<t;i++)for(let t=0;t<e;t++)n[i][t]={used:!1,drawMe:!1,label:"",type:"distractor",position:{column:i,row:t},associatedIndex:-1,stepIndex:-1,showing:!0,id:r,itemId:"",path:!1},r++;return n}n.d(e,"a",(function(){return r}))},581:function(t,e,n){"use strict";function r(t,e){return{column:Math.round(t/2),row:Math.round(e/2)}}n.d(e,"a",(function(){return r}))},582:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(6),n(15),n(48),n(86),n(16);function r(t){const e=t.length-1,n=t[0].length-1,r=[],i=[];for(let e=0;e<t.length;e++)t[e].some(t=>t.path)&&r.push(e);const o=r[r.length-1];t.splice(o+2,e-o-1),t.splice(0,r[0]-1);const a=t[0].map((e,n)=>t.map(t=>t[n]));for(let t=0;t<a.length;t++)a[t].some(t=>t.path)&&i.push(t);const s=i[i.length-1];for(let e=0;e<t.length;e++)t[e].splice(s+2,n-s-1),t[e].splice(0,i[0]-1);t.forEach((t,e)=>{t.forEach((t,n)=>{t.position={column:e,row:n}})})}},584:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return l}));n(101);const r=t=>"distractor"===t.type,i=t=>"start"===t.type,o=t=>"finish"===t.type,a=(t,e)=>t.includes(e),s=(t,e)=>e===t[t.length-1],c=(t,e)=>{const{stepIndex:n}=t,{stepIndex:r}=e;return r<=n},u=(t,e)=>{const{stepIndex:n}=t,{stepIndex:r}=e;return r>n+1},l=(t,e)=>{for(let n=0;n<t.length;n++)for(let r=0;r<t[0].length;r++)if(t[n][r].id===e)return t[n][r]}},585:function(t,e,n){"use strict";n(31);var r=n(540),i=n(383),o=n(345);e.a=async(t,e,n)=>{Object(o.k)(n),await Object(r.a)(t,e),Object(o.l)(n),Object(i.a)(n)}},586:function(t,e,n){"use strict";n(31);var r=n(585);e.a=async(t,e,n)=>{await t.playFailAnimation(),await Object(r.a)(t,e,n)}},601:function(t,e,n){"use strict";var r=n(334),i=n(345),o=n(383),a=n(5),s=n.n(a),c=n(574);var u=t=>{Object(i.j)(t)},l=n(348),d=(n(31),n(25),n(6),n(13),n(15),n(16),n(452));function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=(t,e,n)=>{const i=new r.Sprite(t.textures[e]),{x:o,y:a}=Object(d.a)(n);return i.position.set(o,a),i.tileLocation=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n),i},p=n(349),b=n(4);var v=t=>{switch(t){case"start":return p.o.start;case"finish":return p.o.finish;case"background":return p.o.backgrounds[Object(b.t)(0,4)];default:return p.o.platforms[Object(b.t)(0,3)]}};var g=(t,e)=>{const n=v(e.type),r=h(t,n,e.position);return r.interactive=!0,r.buttonMode=!0,r};var O=(t,e)=>{for(let n=0;n<t.length;n++)for(let r=0;r<t[0].length;r++){if(t[n][r].type===e)return{column:n,row:r}}return{column:0,row:0}},j=n(533);var y=(t,e)=>{let n=Math.min(p.j,t);n=Math.max(n,t*p.l);return{width:n,height:Object(j.a)(t,e,n)}};var w=(t,e)=>{const n=new r.TextStyle({fontFamily:"rcfGameFont, castledown",fontSize:e,fill:0,align:"center",wordWrap:!0,wordWrapWidth:p.j,lineHeight:e,dropShadow:!0,dropShadowDistance:1,dropShadowColor:"#FFFFFF"}),i=new r.Text(t,n);i.anchor.set(.5,.5),i.position.set(0,p.r);const{width:o,height:a}=y(i.width,i.height);return i.width=o,i.height=a,i};var C=t=>{const e=new r.Graphics;return e.lineStyle(0),e.beginFill(16777215,1),e.drawCircle(0,0,t/2),e.endFill(),e};var x=(t,e)=>{t.anchor.set(.5),t.mask=e,t.addChild(e),t.position.set(0,p.r-p.c),t.width=p.e,t.height=p.e};var P=()=>{let t=C(2*(p.e+2*p.b));return t.cacheAsBitmap=!0,t.scale.set(.5),t.position.set(0,p.r-p.c),t};var S=(t,e,n)=>{const i=new r.Container;i.addChild(n),i.addChild(e);const o=t.generateTexture(i);return n.destroy(),i.destroy(),o};var T=(t,e)=>{let n=C(t.width);x(t,n);const r=P();return t.texture=S(e,t,r),t.mask=void 0,n.destroy(),t},_=n(534);var z=(t,e,n,r)=>{const{column:i,row:o}=r.tileLocation,a=((n[i+e]||[])[o+t]||{}).sprite;a&&a.emit("pointerup")};var M=(t,e,n)=>{const r=Object(i.g)(t),o=Object(i.h)(t);r.off("keydown"),r.keydown(t=>{let r=0,i=0;switch(t.which){case 37:i=-1;break;case 38:r=-1;break;case 39:i=1;break;case 40:r=1;break;default:return}t.preventDefault(),o.hasClass("disabled")||t.originalEvent.repeat||0===i&&0===r||z(i,r,e,n)})};var k=(t,e,n)=>Math.abs(e.x-t.x)>.6*n.screenWidth||Math.abs(e.y-t.y)>.6*n.screenHeight;var Q=(t,e)=>{t.snap(e.x,e.y,{time:0,removeOnComplete:!0})};var G=(t,e,n)=>{const r=v("background"),i=h(e,r,n);t.addChild(i)};var A=(t,e,n,i)=>{const o=new r.Sprite(e.textures[p.o.empty]);o.position.set(-.5*n,-.5*i),o.anchor.set(0,0),o.width=2*n,o.height=2*i,t.addChild(o)};var E=t=>new r.Sprite(t.textures[p.o.failPlatforms[Object(b.t)(0,3)]]).texture;var F=n(352),L=n(453);var I=(t,e)=>{const n=Object(F.a)(t),r=Object(i.f)(n,e);Object(F.f)(n),Object(F.g)(r)};var D=(t,e,n,r,o,a)=>{const s=Object(i.g)(e),{currentGrid:c,spriteTileClicked:u}=r;Object(i.b)(),Object(F.l)(s),I(s,c.id);const l=Object(i.d)(e);!function(t,e,n,r,o,a,s){const{grid:c,isMathsGame:u}=n,l=c[0].length*p.q,f=c.length*p.q+p.g,m=u?p.h:p.i;e.worldWidth=l,e.worldHeight=f,Object(_.a)(e);const h=O(c,"start"),b=O(c,"finish"),v=Object(d.a)(h),j=Object(d.a)(b);A(e,o,l,f),a.gridPosition=h,a.playIdleAnimation();let y=0;k(v,j,e)?(y=1250,Q(e,j)):Q(e,v);let C=[];for(let n=0;n<c.length;n++)for(let u=0;u<c[0].length;u++){const l=c[n][u];if(G(e,o,l.position),l.drawMe){const n=g(o,l);if(l.platformTexture=n.texture,l.failPlatformTexture=E(o),l.sprite=n,n.on("pointerup",async()=>{Object(i.k)(r),await s(n,a,c,C,r),Object(i.l)(r)}),l.image){const e=T(l.image,t.renderer);n.addChild(e)}l.label&&n.addChild(w(l.label,m)),e.addChild(n)}}e.addChild(a.camera),Object(i.k)(r),setTimeout(()=>{Object(i.l)(r),e.follow(a.camera,{speed:7,acceleration:20}),M(r,c,a.camera)},y)}(t,n,c,e,o,a,u),Object(i.l)(e),Object(L.a)(e,l)},N=n(104);var q=(t,e,n,r,o,a)=>{D(t,r,e,n,o,a),u(r),Object(l.a)(r,N.b.isPlaying),Object(i.c)(r,"canvas")},W=n(96),B=n(454),H=n(423);var V=(t,e,n,r,o,a)=>{e.on("click",".tileMazeContainer .startGameButton, .tileMazeContainer .replayGameButton",u=>{const l=Object(c.a)(e);W.a.log("Current seed: ".concat(l));const d=Object(i.g)(e);Object(H.a)(d);const f=s()(u.currentTarget).data("mode")||B.a.resetQuestions;r.initialiseStateForNewGame(f),q(t,n,r,e,o,a)})};var J=(t,e)=>{t.on(o.b.loseLife,async()=>{Object(i.i)(t),e.loseLife(),e.noLivesLeft()&&(e.recordGameFinishTime(),await Object(b.E)(100),t.trigger(o.b.gameOver))})};var R=async t=>{const e=Object(i.g)(t);Object(i.k)(t),Object(F.j)(e),Object(i.c)(t,".tileMazeContainer .gameWonScreen .replayGameButton"),await Object(b.E)(100),Object(l.a)(t,N.b.isGameWonScreen)};var U=t=>{t.on(o.b.gameWon,async()=>{await R(t)})};var Y=async t=>{const e=Object(i.g)(t);Object(i.k)(t),Object(F.i)(e),Object(i.c)(t,".tileMazeContainer .gameOverScreen .replayGameButton"),await Object(b.E)(100),Object(l.a)(t,N.b.isGameOverScreen)};var Z=t=>{t.on(o.b.gameOver,async()=>{await Y(t)})};var K=async(t,e,n)=>{const r=1e3*p.m;Object(F.k)(e),Object(i.m)(n),Object(l.a)(t,N.b.isQuestionCompleteScreen),await Object(b.E)(r)};var X=async(t,e,n,r,a,s)=>{const c=Object(i.g)(e);e.on(o.b.questionComplete,async()=>{if(Object(i.k)(e),r.addQuestionPoints(),await Object(b.E)(100),r.incrementQuestionNumber(),await K(e,c,r.createQuestionCompleteText()),!r.moreQuestionsToShowInCurrentGame())return r.recordGameFinishTime(),void e.trigger(o.b.gameWon);r.initialiseStateForNewQuestion(),await Object(b.E)(10),D(t,e,n,r,a,s)})};var $=t=>{t.on("contextmenu",".tileMazeContainer",t=>{Object(b.F)(t)})},tt=n(151);var et=(t,e,n)=>{const r=Object(i.h)(t);Object(tt.b)("tileMaze",()=>{const t=e.renderer.screen.height;e.renderer.resize(r.width(),t),n.resize(r.width(),t)})};n.d(e,"b",(function(){return nt})),n.d(e,"a",(function(){return rt}));const nt=(t,e,n,r,i,o,a)=>{V(t,i,n,e,o,a),X(t,i,n,e,o,a),J(i,e),U(i),Z(i),$(i),et(i,t,n)},rt=t=>{t.off(o.b.loseLife),t.off(o.b.gameWon),t.off(o.b.gameOver),t.off(o.b.questionComplete),t.off("contextmenu",".tileMazeContainer"),t.off("click",".tileMazeContainer .startGameButton, .tileMazeContainer .replayGameButton");Object(i.g)(t).off("keydown")}},615:function(t,e,n){"use strict";n(32),n(31),n(261),n(33);var r=n(345),i=n(334),o=n(349),a=n(575);var s=t=>new Promise(e=>{if(!t.alternativeSprite){const t=i.Loader.shared.resources[o.p.default];return e(t.spritesheet)}const n=i.Loader.shared.resources[o.p.alternative],r=new i.Spritesheet(n.texture,a);r.parse(()=>{e(r)})}),c=n(37);var u=(t,e)=>{const n=e.baseTexture.resource.source.src,r=c.a.createElement("style");r.id="tileMazeOverrides",r.innerHTML="\n\t\t.tileMazeContainer .tileMazeStageContainer .lives .life {\n\t\t\tbackground-image: url(".concat(n,");\n\t\t}\n\t"),t.get(0).insertAdjacentElement("beforeend",r)},l=n(601),d=n(535),f=n(626),m=n(455),h=n.n(m),p=n(468);e.a=async(t,e,n,i,o)=>{Object(f.a)();const a=new h.a("rcfGameFont"),c=new h.a("castledown");await Promise.allSettled([a.load(null,100),c.load(null,100)]);const m=await s(n),b=Object(p.a)(m);u(t,m),Object(r.a)(t),Object(d.a)(t),Object(l.b)(i,e,o,n,t,m,b)}},620:function(t,e,n){"use strict";n(25);var r=n(644),i=n(4),o=n(349);var a=(t,e)=>0===t?e:Math.min(e,t),s=n(537),c=n(454);function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=class{constructor(t,e,n,o){u(this,"numberOfLives",void 0),u(this,"gameQuestionNumber",void 0),u(this,"numberOfQuestionsToShowPerGame",void 0),u(this,"gridForCurrentQuestion",void 0),u(this,"questionIterator",void 0),u(this,"currentQuestion",void 0),u(this,"startTime",void 0),u(this,"finishTime",void 0),u(this,"_mazeGeneration",void 0),u(this,"_spriteTileClicked",void 0),u(this,"_createQuestionCompleteText",void 0),u(this,"totalPoints",void 0);const{questions:s}=t,c=Object(i.J)(s);this.numberOfQuestionsToShowPerGame=a(parseInt(t.show),s.length),this.questionIterator=Object(r.a)(c),this.mazeGeneration=e,this.spriteTileClicked=n,this.createQuestionCompleteText=o}initialiseStateForNewQuestion(){const t=this.questionIterator.next();t.done||(this.currentQuestion=t.value,this.buildGridForCurrentQuestion())}initialiseStateForNewGame(t){this.numberOfLives=o.f,this.gameQuestionNumber=0,this.startTime=new Date,this.finishTime=null,this.totalPoints=0,t===c.a.resetQuestions?this.initialiseStateForNewQuestion():this.buildGridForCurrentQuestion()}recordGameFinishTime(){this.finishTime=new Date}get gameDuration(){const t=this.finishTime||new Date,e=(t-(this.startTime||t))/1e3;return console.log("duration : ",e),Object(i.x)(e)}get currentGrid(){return this.gridForCurrentQuestion}set mazeGeneration(t){this._mazeGeneration=t}get mazeGeneration(){return this._mazeGeneration}set spriteTileClicked(t){this._spriteTileClicked=t}get spriteTileClicked(){return this._spriteTileClicked}set createQuestionCompleteText(t){this._createQuestionCompleteText=t}get createQuestionCompleteText(){return this._createQuestionCompleteText}incrementQuestionNumber(){this.gameQuestionNumber++}moreQuestionsToShowInCurrentGame(){return this.gameQuestionNumber<this.numberOfQuestionsToShowPerGame}get lives(){return this.numberOfLives}get numberCorrect(){return this.gameQuestionNumber}get numberOfQuestionsInGame(){return this.numberOfQuestionsToShowPerGame}addQuestionPoints(){this.totalPoints+=Object(s.a)()}get totalGamePoints(){return this.totalPoints}loseLife(){this.numberOfLives--}noLivesLeft(){return this.numberOfLives<1}buildGridForCurrentQuestion(){this.gridForCurrentQuestion=this._mazeGeneration([this.currentQuestion])[0]}}},621:function(t,e,n){"use strict";n(31);var r=n(14),i=(n(32),n(33),n(334));var o=async(t,e,n)=>new Promise((r,o)=>{let a="";i.Loader.shared.onError.add((t,e,n)=>{a+="".concat(n.url,"\n")}),i.Loader.shared.add([{name:t,url:e},...n]).load(()=>{a&&o("Missing Assets:\n".concat(a)),r()})}),a=n(349);e.a=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{alternativeSprite:n}=t;n?await o(a.p.alternative,n,e):await o(a.p.default,"".concat(Object(r.a)(),"images/tileMazeAssets/spritesheet.json"),e)}},627:function(t,e,n){"use strict";var r=(t,e)=>Math.abs(t.row-e.row)+Math.abs(t.column-e.column);e.a=(t,e)=>1===r(t,e)},628:function(t,e,n){"use strict";n(6),n(15),n(16);var r=n(583);var i=t=>{let e=[];return t.forEach(t=>{t.forEach(t=>{t.used||e.push(t)})}),e},o=n(457),a=n(4),s=n(539);e.a=(t,e)=>{i(t).forEach(t=>{const{value:n,correct:i,stepIndex:c,image:u,audio:l,id:d}=e[Object(a.t)(0,e.length)],f=!!n||!!u||!!l;Object(o.a)(t,{used:!0,drawMe:f,label:n,stepIndex:c+1,type:i?"correctItem":"distractor",path:!1,image:Object(s.a)(u),audio:l?r.a.Sound.from(l):void 0,itemId:d})})}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/utils/tileMaze/rcfTileMazeSharedUtils.js.map