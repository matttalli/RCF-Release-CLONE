(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/utils/ordering/rcfOrderableInteractions"],{395:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a}));const r="selected",i="active",c="disabled",a=":not([data-fixed=y][data-rank])"},426:function(e,t,n){"use strict";n(6),n(13),n(11),n(48);var r=n(5),i=n.n(r),c=n(99),a=(n(15),n(86),n(16),n(4));function o(e,t){return(n,r)=>n===e&&t===r}function s(e,t,n){const r=e.eq(t).filter(":not(.fixed)");Object(a.y)(r)||r.addClass(n?"correctPosition":"incorrectPosition")}function d(e){const t=Object(c.a)(e,"correct-answers"),n=e.find(".orderingItem:not(.suffix)"),r=n.map((e,t)=>i()(t).attr("data-ordervalue")).get();n.removeClass("correctPosition incorrectPosition"),e.filter(".complex").each((e,c)=>{i()(c);!function(e,t,n,r){const i=JSON.parse(t);r.forEach((e,t)=>{const r=i.some(n=>n.some(o(e,t)));s(n,t,r)})}(0,t,n,r)}),e.filter(":not(.complex)").each((e,c)=>{i()(c);!function(e,t,n,r){const i=JSON.parse(t);r.forEach((e,t)=>{const r=i.some(o(e,t));s(n,t,r)})}(0,t,n,r)})}n.d(t,"a",(function(){return d}))},467:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"showAnswer",(function(){return y})),n.d(r,"showMarkedAnswer",(function(){return l})),n.d(r,"getUserAnswer",(function(){return b})),n.d(r,"isComplete",(function(){return w})),n.d(r,"reset",(function(){return O}));n(25);var i=n(367),c=(n(6),n(11),n(15),n(16),n(5)),a=n.n(c),o=n(4),s=n(340),d=n(379);var f=n(8);function l(e){const t=e.$interaction,n=Object(i.d)(t);n===f.d.byItem?function(e,t){const n=e.find(".orderingItem:not(.fixed)");(Array.isArray(t.value)?t.value:[t.value]).forEach((e,r)=>{const i=a()(n.get(r));if(Object(o.y)(i))return;const c=!!t.verification&&"1"==t.verification[r],f=Object(d.a)(i);Object(s.a)(f,c)})}(t,e):n==f.d.byList&&function(e,t){const n=!!t.verification&&"1"==t.verification[0],r=Object(d.a)(e);Object(s.a)(r,n)}(t,e)}n(48);var u=e=>e.find(".rcfOrderingContainer:not(.positionable, .example) .orderingItem:not(.fixed)").get().map(e=>Object(i.f)(a()(e)));var b=e=>{const t=u(e);return{elm:Object(o.v)(e)||"",type:Object(i.b)(e),markType:Object(i.d)(e),value:t}},g=n(426);function O(e){e.each((e,t)=>{!function(e){const t=Object(i.g)(e);Object(i.r)(t),Object(i.B)(t),Object(i.n)(t),Object(i.t)(t),Object(i.s)(e),Object(i.w)(t,!1),Object(i.k)(t)&&Object(g.a)(t)}(a()(t))})}var j=n(17),m=(n(59),n(100),n(13),n(638)),v=n(639);var h=(e,t)=>{const n=t.value;if(Object(o.y)(n))return;const r={},i=Object(m.a)(e);n.forEach((t,n)=>{const c=t.replace(/"/g,'\\"');Object(o.y)(r[c])&&(r[c]=1);let a=Object(v.a)(e,c);if(a.length<1)throw"Error ! Cannot find orderable elements with data-ordervalue of [".concat(c,"]");if(i||(a=a.filter("[data-fixed!='y']")),a.length>1){const e=r[c];a=a.eq(e-1),r[c]=e+1}Object(j.c)(a,"data-showanswer",n)})};function p(e,t){var n;(n=t,Array.isArray(n.value[0])?n.value[0]:Array.isArray(n.value)?n.value:[]).forEach((t,n)=>{!function(e,t,n){const r=e.find("[data-rcfid='".concat(t,"']"));Object(o.y)(r)||Object(j.c)(r,"data-showanswer",""+n)}(e,t,n)})}function y(e){const t=e.$interaction,n=Object(j.a)(t,"data-rcfinteraction")||"ordering",r=t.find(".orderingItem").closest(".rcfOrderingContainer"),c="positioning"===n;switch(Object(i.q)(t),e.type){case f.a.sequence:h(t,e);break;case f.a.complexOrdering:p(t,e)}Object(i.s)(r),Object(i.A)(t),Object(i.i)(t)&&Object(i.j)(t),c||Object(i.p)(t),Object(i.k)(t)&&Object(g.a)(t),Object(i.w)(t,!0),c&&t.find(".orderingItem").addClass("dragged")}const w=(e,t)=>!1;var x=n(439);function A(e,t){const n=a()(t);if(n.closest(".orderingContainer").hasClass("example"))return;const r=Object(i.c)(n),c=n,o=n.find(".orderingItem:not([data-fixed=y])");c.sortable({cancel:'.orderingItem[data-fixed="y"]',placeholder:"draggablePlaceHolder",forcePlaceholderSize:!0,dragOnEmpty:!1,tolerance:"pointer",helper:"original",cursor:"pointer",scrollSpeed:10,axis:r,change:function(){const e=a()(this);e.hasClass("positionable")||Object(i.o)(e)},start:function(e,t){const n=a()(this);t.placeholder.html("&nbsp;"),Object(i.m)(n),Object(x.a)(t.item),Object(x.b)(t.item)},stop:function(e,t){const n=a()(this),r=Object(i.g)(n);a()(t.item).addClass("dragged").focus(),Object(i.i)(r)&&Object(i.j)(r),Object(i.k)(r)&&Object(g.a)(r)}}),o.on("mousedown",e=>{a()(e.currentTarget).focus()})}var P=n(395);var C=e=>e.find(".orderingItem:not([data-fixed=y])");var k=(e,t)=>{const n=a()(t);C(n).on("click",e=>{if(!e.originalEvent)return;const t=a()(e.target),n=a()(e.currentTarget);if(!n.hasClass("orderingItem")||t.hasClass("audioPlayButton")||t.hasClass("clickAndStickNavigation"))return;const r=n;r.hasClass(P.d)?Object(x.a)(r):Object(x.c)(r)})},I=(n(101),n(619)),S=n(363),T=n(60);var E=e=>e.find(".orderingItem");n(102);var $=function(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};var D=function(e){let t;return t=e.hasClass("imageAnswer")?e.find("img").attr("alt")||"":e.text().trim(),$(t)};var N=function(e,t){let n="".concat(T.a.t("interactions.ordering.screenReader.newOrder"),": ");e.each((t,r)=>{const i=a()(r),c=D(i);n+="".concat(c," ").concat(t<e.length-1?"; ":"")}),Object(S.a)(t,n)};var R=(e,t)=>{const n=a()(t),r={enter:"Enter",space:" ",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",escape:"Escape"},i=Object.values(r),c=E(n);c.attr("tabindex","-1"),c.first().attr("tabindex","0"),n.on("keydown",'.orderingItem, [data-rcfinteraction="imageAudio"]',e=>{const t=a()(e.target).closest(".orderingItem");if(0===t.length)return;i.includes(e.key)&&(e.preventDefault(),e.stopPropagation());const o=D(t),s=c.length;if(e.key===r.enter){const t=a()(e.target);if(t.is('[data-rcfinteraction="imageAudio"], .audioPlayButton'))return void t.trigger("click");if(t.is(".orderingItem")){const e=t.find('[data-rcfinteraction="imageAudio"]'),n=t.find(".audioPlayButton");e.length?e.trigger("click"):n.length?n.trigger("click"):t.is("[data-audiolink]")&&t.trigger("click")}}if([r.left,r.up].includes(e.key))if(t.hasClass(P.d)){Object(I.b)(t,n,P.c);const e=E(n).index(t)+1;Object(S.a)(t,$("".concat(T.a.t("interactions.ordering.screenReader.movedToPosition",{orderingItemText:o,newPosition:e,totalItems:s}))))}else{const e=t.prev(".orderingItem");e&&e.length&&(c.attr("tabindex","-1"),e.attr("tabindex","0").focus())}if([r.right,r.down].includes(e.key))if(t.hasClass(P.d)){Object(I.a)(t,n,P.c);const e=E(n).index(t)+1;Object(S.a)(t,$("".concat(T.a.t("interactions.ordering.screenReader.movedToPosition",{orderingItemText:o,newPosition:e,totalItems:s}))))}else{const e=t.next(".orderingItem");e&&e.length&&(c.attr("tabindex","-1"),e.attr("tabindex","0").focus())}if(e.key===r.space){const e=n.hasClass("example");if(t.hasClass("fixed")||e){let e="".concat(o," ").concat(T.a.t("interactions.ordering.screenReader.fixedItem"));return t.data("last-announcement-had-space")?t.data("last-announcement-had-space",!1):(e+="â€‹",t.data("last-announcement-had-space",!0)),void Object(S.a)(t,e)}if(t.hasClass(P.d)){Object(x.a)(t),t.removeData("original-index");const e=E(n);N(e,n)}else t.data("original-index",t.index()),Object(x.c)(t),Object(S.a)(t,"".concat(o," ").concat(T.a.t("interactions.ordering.screenReader.itemSelected")))}if(e.key===r.escape&&t.hasClass(P.d)){const e=t.data("original-index");if(void 0!==e){const r=E(n);0===e?r.first().before(t):r.eq(e-1).after(t)}Object(x.a)(t),t.removeData("original-index"),Object(S.a)(t,"Move cancelled.")}})};var q=(e,t)=>{a()(t).on("keydown",(function(e){if("Tab"===e.key){const e=a()(this).find(".".concat(P.d));e.length&&Object(x.a)(e)}}))};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=n(641);function M(e,t,n){const r=Object(i.e)(t,n),c=Object(i.h)(r);e.$activity=t,e.$selector=r,e.correctAnswers=e.getUserAnswers(),Object(i.v)(r),Object(i.x)(c),Object(i.l)(c),Object(i.s)(c),Object(i.u)(r),Object(L.a)(r),e.originalAnswers=e.getUserAnswers();const s=Object(i.a)(c),d=s.find("li").find('[data-rcfinteraction="imageAudio"]'),f=s.find("li").find(".audioPlayButton");d.removeAttr("tabindex"),f.attr("tabindex","-1"),e.$orderingSelector=s,function(e,t){t.$activity.on("rcf.single.answer",'*[data-rcfinteraction="'.concat(e,'"]'),(t,n)=>{const r=a()(t.currentTarget);if(n.elm!=Object(o.v)(r))return;"positioning"===e&&r.find(".orderingItem").addClass("dragged");y(U(U({},n),{},{$interaction:r}))})}(n,e),function(e){e.each(A),e.each(k),e.each(R),e.each(q)}(c),Object(i.y)(e)}n(106),n(86);var H=n(335);function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return z}));class z extends H.a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ordering";super(e,r),_(this,"$orderingSelector",void 0),_(this,"correctAnswers",void 0),_(this,"originalAnswers",void 0),M(this,e,t)}isComplete(){return(e=this).getUserAnswers().some((t,n)=>JSON.stringify(t)!==JSON.stringify(e.originalAnswers[n]));var e}reset(){O(this.$orderingSelector)}}},640:function(e,t,n){"use strict";var r=n(5),i=n.n(r),c=n(522),a=n(619),o=n(395);t.a=e=>{const t=i()(e.currentTarget),n=t.parent();if(t.hasClass("clickAndStickNavigation"))if(t.hasClass("previousItem")){1===Object(c.b)(n,o.c).length&&Object(a.b)(n,n.parent(),o.c)}else{if(!t.hasClass("nextItem"))return;1===Object(c.a)(n,o.c).length&&Object(a.a)(n,n.parent(),o.c)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/utils/ordering/rcfOrderableInteractions.js.map