(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfCategoriseSelectable"],{689:function(e,t,a){"use strict";a.r(t);a(25),a(6),a(11);var c=e=>e.find(".interactiveText[data-interactivetexttype^='selectableCat']:not(.example)");var r=e=>e.find(".eSpan.selectableCat:not(.example)"),s=(a(15),a(16),a(5)),n=a.n(s),i=a(17);var o=(e,t)=>e.find(".interactiveText_popup[data-interactivetext-rcfid='".concat(t,"']"));var l=(e,t)=>e.find("[data-catid='".concat(t,"']")).text(),v=a(99),b=a(4);var d=e=>{const t=Object(b.i)(e);e.each((e,a)=>{const c=n()(a),r=Object(b.v)(c)||"",s=(Object(i.a)(c,"data-cats")||"").split("|"),d=o(t,r);let g={categoryClassString:"",categories:{}};s.forEach((e,t)=>{const a="cat_".concat(t+1);g.categories[e]={index:a,title:l(d,e)},g.categoryClassString+=a+" "}),Object(v.c)(c,"categories",g)})};var g=e=>Object(v.a)(e,"chosen-answer"),h=a(560),f=a(359),u=a(521);var j=e=>e.closest(".interactiveText");var m=e=>{const t=Object(b.i)(e),a=j(e);e.removeClass("selecting"),a.each((e,a)=>{const c=n()(a),r=Object(b.v)(c)||"",s=o(t,r);Object(f.a)(s)}),Object(u.a)(t)};var O=(e,t,a,c)=>{const r=Object(b.v)(e)||"",s=Object(b.i)(e),n=o(s,r),i=n.find(".clear"),l=a.find(".selectableCatItem"),d=g(a);t.removeClass("selecting"),a.addClass("selecting"),i.toggle(!Object(b.y)(d)),Object(v.c)(n,"selectable-element",a);const u=Object(h.a)(s);Object(f.b)(n),Object(f.c)(c,n,l),u.one("click",()=>{m(t),a.removeClass("selecting")})};var p=(e,t)=>{e.on("click",".interactiveText .eSpan.selectableCat:not(.example)",e=>{const a=n()(e.currentTarget),c=j(a);O(c,t,a,e),Object(b.F)(e)})};var w=(e,t)=>{const a=Object(b.i)(e),c=Object(b.v)(e)||"";return o(a,c).find('.interactiveTextSpanPopup[data-catid="'.concat(t,'"]')).html()};var y=e=>{const t=Object(v.a)(e,"categories")||{categoryClassString:"",categories:{}};return{categoryClassString:t.categoryClassString,categories:t.categories}};var C=(e,t)=>{const a=e.find(".answer"),c=j(e),r=y(c);if(r.categoryClassString.length>0&&e.removeClass(r.categoryClassString),"-99"===t||t.length<1)return Object(v.b)(e,"chosen-answer"),e.removeClass("selected answered selecting"),a.html(""),void a.hide();Object(v.c)(e,"chosen-answer",t),e.removeClass("selecting"),e.addClass("answered");const s=r.categories[t],n=s?s.index:"";n.length>0&&e.addClass(n);const i=w(c,t);a.html(" (".concat(i,")")),a.show()};var x=e=>{const t=e.closest(".interactiveText_popup"),a=Object(i.a)(e,"data-catid")||"",c=Object(v.a)(t,"selectable-element");Object(b.y)(c)||C(c,a)};var T=(e,t)=>{e.on("click",".interactiveText_popup span",e=>{x(n()(e.currentTarget)),m(t),Object(b.F)(e)})};const $=e=>e.hasClass("type_selectableCat")||e.hasClass("type_selectableCatWords");var E=e=>{e.on("rcf.single.answer",".interactiveText[data-rcfinteraction='interactiveText']",(function(e,t,a){const c=n()(this);if(t.elm!==Object(b.v)(c))return;if(!$(c))return;const r=t.value.find(e=>e.elm===a);if(Object(b.y)(r))return;const s=r.value;if(s.length>0){const e=c.find("[data-rcfid='".concat(a,"']"));C(e,s)}}))};var S=(e,t)=>{p(e,t),T(e,t),E(e)};var _=(e,t)=>{e.$activity=t,e.$interactiveTextElements=c(t),e.$selector=r(e.$interactiveTextElements),Object(b.y)(e.$selector)||(d(e.$interactiveTextElements),S(e.$activity,e.$selector))},A=a(342);a(13);var k=e=>{let t=!0;return e.each((e,a)=>{const c=n()(a),s=r(c),i=s.filter(".answered"),o=s.not(".distractor").length;i.length<o&&(t=!1)}),t},P=(a(48),a(8));var F=e=>r(e).filter(".answered:not(.selecting)").map((e,t)=>{const a=n()(t),c=Object(v.a)(a,"chosen-answer")||"",r={elm:Object(b.v)(a)||"",type:P.a.simple,value:c};return a.hasClass("distractor")&&(r.isDistractor=!0),r}).get();var M=e=>({elm:Object(b.v)(e)||"",type:P.a.composite,value:F(e)});var R=e=>e.map((e,t)=>{const a=n()(t);return M(a)}).get(),U=a(353),D=a(517),I=a(436);var N=e=>{const t=Object(v.a)(e,"categories");r(e).filter(".answered").each((e,a)=>{const c=n()(a),r=c.find(".answer"),s=Object(v.a)(c,"chosen-answer");c.removeClass("answered ".concat(t.categoryClassString)),Object(I.a)(c,s),Object(v.b)(c,"chosen-answer"),r.text(""),r.hide()})},W=a(338);var q=(e,t,a)=>{if(N(e),!Array.isArray(t.value))return;t.value.forEach(t=>{if(a&&Object(W.a)(t)||!a){const a=t.elm,c=t.value,r=e.find("[data-rcfid='".concat(a,"']"));C(r,c)}})};var z=(e,t,a)=>{Object(U.a)(e,t).forEach(t=>{const c=t.elm,r=Object(D.a)(e,c);q(r,t,a)})},B=a(437);var G=e=>{const t=(Object(v.a)(e,"categories")||{categoryClassString:""}).categoryClassString,a=r(e),c=a.find(".answer");a.removeClass("answered selecting ".concat(t)),Object(v.b)(a,"chosen-answer"),c.html(""),c.hide()};var H=e=>{G(e);r(e).each((e,t)=>{const a=n()(t),c=Object(B.a)(a)||"";Object(b.y)(c)||C(a,c)})};var J=e=>{e.each((e,t)=>{const a=n()(t);H(a)})},K=a(407),L=a(340);var Q=e=>{const t=e.$interaction;e.value.forEach(e=>{const a=e.elm,c=t.find("[data-rcfid='".concat(a,"']")),r=!!e.verification&&"1"==e.verification[0];Object(L.a)(c,r)})};var V=(e,t)=>{const a=r(e);Object(A.a)(a);Object(K.a)(e,t).forEach(e=>Q(e))},X=a(378);var Y=e=>{const t=r(e);Object(X.a)(t)};var Z=e=>{e.each((e,t)=>{const a=n()(t);G(a),Y(a)})};function ee(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var c=a.call(e,t||"default");if("object"!=typeof c)return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",(function(){return te}));class te{constructor(e){ee(this,"$activity",void 0),ee(this,"$selector",void 0),ee(this,"$interactiveTextElements",void 0),_(this,e)}clearMarkedAnswers(){Object(A.a)(this.$selector)}isComplete(){return k(this.$interactiveTextElements)}getUserAnswers(){return R(this.$interactiveTextElements)}showAnswers(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this.$selector),z(this.$interactiveTextElements,e,t)}showUserAnswers(){m(this.$selector),J(this.$interactiveTextElements)}showMarkedAnswers(e){m(this.$selector),V(this.$interactiveTextElements,e)}reset(){m(this.$selector),Z(this.$interactiveTextElements)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfCategoriseSelectable.js.map