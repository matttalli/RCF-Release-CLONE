(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfWordSnake"],{727:function(e,t,n){"use strict";n.r(t);n(59),n(100),n(6),n(13),n(11),n(48);var a=n(5),i=n.n(a),s=n(47),r=n(9),o=n(8);!function(e,t){t.RCF=t.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[r.c.wordSnake]=function(){function t(e){this._initialize(e)}return t.prototype={_initialize:function(t){if(RCF.Utils.isEmpty(t))throw"Empty Activity passed into the interaction constructor (TextInput)";this.$activity=t,this.$selector=this.$activity.find("*[data-rcfinteraction=wordsnake]"),this.deviceMode=RCF.Application.getDeviceMode();const n=this.deviceMode!==s.a.desktop;var a=function(t){var n=t.data("selectionUID")||0,a=t.find("li.ui-selecting");if(a.filter(".rangeMade").each((function(){var n=e(this).data("selectedRange");n&&t.find(n).removeClass("highlight0 highlight1 highlight2 highlight3 highlight4 rangeMade").removeAttr("data-selid").removeData("selectedRange")})),a.length>1){n++;var i=function(e,t){for(var n=e.data("selectionUID")||0,a=!1,i="",s=t.first().prev(),r=t.last().next();!a;)i="highlight"+n++%5,s.length>0?s.hasClass(i)||r.length>0&&r.hasClass(i)||(a=!0):r.length>0&&r.hasClass(i)||(a=!0);return e.data("selectionUID",n),i}(t,a),s=a.map((function(){return"#"+this.id})).get().join(",");a.data("selectedRange",s).removeClass("ui-selecting").addClass("rangeMade").removeAttr("data-selid").attr("data-selid","selection_"+n).addClass(i)}else a.removeClass("ui-selecting");t.removeData("startElem").removeAttr("selecting")},i=function(e,t,n){var a=e.find("li"),i=a.index(t),s=a.index(n),r=Math.min(i,s),o=Math.max(i,s)+1,l=a.slice(r,o),c=l.filter(".example");if(a.removeClass("ui-selecting"),c.length>0){var d=a.index(c.first()),f=a.index(c.last());i<d?o=d:r=f+1,l=a.slice(r,o)}l.addClass("ui-selecting")};this.$selector.filter("[data-interactive=y]").each((function(){var t=e(this),s=t.find(".wordSnake"),r=!0,o=this;n&&(r=!1),r&&(r="y"===t.attr("data-draggable")),r?(t.on("mousedown",".wordSnake li.letter:not(.example)",(function(t){1===t.which&&(s.attr("selecting","y").data("startElem",e(this)),e(this).addClass("ui-selecting")),o.mouseDown=!0})),t.on("mousemove",".wordSnake li.letter:not(.example)",(function(){o.mouseDown&&i(s,s.data("startElem"),e(this))})),t.on("rcf.stopselecting",".wordSnake",(function(){o.mouseDown=!1,a(s)})),t.on("mouseup",".wordSnake li",(function(e){o.mouseDown&&a(s),e.preventDefault()})),e(document).on("mouseup",(function(){o.mouseDown=!1,a(s)}))):(t.addClass("mobile"),t.on("click",".wordSnake li.letter:not(.example)",(function(){var t=null,n=null;"y"===s.attr("selecting")?(t=s.data("startElem"),n=e(this),s.removeAttr("selecting").removeData("startElem"),i(s,t,n),a(s),t=null,n=null):((t=e(this)).addClass("ui-selecting"),s.attr("selecting","y").data("startElem",t))})))})),e(document).on("mouseup",(function(){e(".wordSnake[selecting='y']").length>0&&e(".wordSnake[selecting='y']").trigger("rcf.stopselecting")}));var r=0;this.$activity.on("rcf.single.answer","*[data-rcfinteraction=wordsnake]",(function(t,n,a){var i=e(this);if(n.elm===i.attr("data-rcfid")){r=a%5;var s=n.value[a],o=e.map(s.split(","),(function(e){return"#"+e})).join(",");i.find(o).attr("data-selid","selection_"+a).attr("class","letter rangeMade highlight"+r)}}))},showAnswers:function(t,n){for(var a in t.answers){var i=t.answers[a],s=i.elm;if(!RCF.Utils.isEmpty(s)){var r=this.$selector.filter("[data-rcfid='"+s+"']");if(!RCF.Utils.isEmpty(r))for(var o in r.find("li.letter").each((function(){var t=e(this);t.data("userSelection",{className:t.attr("class"),selectionID:t.attr("data-selid")})})),r.removeData("startElem").removeAttr("selecting").find("li.letter:not(.example)").attr("class","letter").removeAttr("data-selid").removeData("selectedRange"),r.find("li.letter[data-distractor=y]").addClass("distractor"),i.value){var l=i.value[o],c=e.map(l.split(","),(function(e){return"#"+e})).join(","),d=0;n?"1"==i.verification[o]&&(d=o%5,r.find(c).attr("data-selid","selection_"+o).attr("class","letter rangeMade highlight"+d)):(d=o%5,r.find(c).attr("data-selid","selection_"+o).attr("class","letter rangeMade highlight"+d))}}}},showMarkedAnswers:function(t){for(var n in this.clearMarkedAnswers(),t.answers){var a=t.answers[n],i=a.elm;if(!RCF.Utils.isEmpty(i)&&!RCF.Utils.isEmpty(a.verification)){var s=this.$selector.filter("[data-rcfid="+i+"]");if(!RCF.Utils.isEmpty(s))for(var r in a.value){var o=a.value[r],l=e.map(o.split(","),(function(e){return"#"+e})),c=l.length,d=s.find(l[c-1]),f="1"==a.verification[r]?"correct":"wrong";d.length>0&&e("<span class='markContext'><span class='mark "+f+"'></span></span>").appendTo(d)}}}},showUserAnswers:function(){this.$selector.find("li.letter").each((function(){var t=e(this),n=t.data("userSelection")||{className:"letter",selectionID:""};t.attr("class",n.className),t.attr("data-selid",n.selectionID)}))},isComplete:function(){var t=!0;return this.$selector.filter("[data-interactive='y']:not(.example)").each((function(){var n=e(this).find(".wordSnake"),a=n.find(".letter.distractor").length>0,i=n.find(".letter:not(.example,.distractor)"),s=i.filter(".rangeMade:not(.distractor)");a?0===s.length&&(t=!1):i.length!==s.length&&(t=!1)})),t},getUserAnswers:function(){return this.$selector.filter("[data-interactive=y]:not(.example)").map((function(){var t=e(this),n=e(this).find(".wordSnake"),a="",i=[],s=[],r=n.find(".rangeMade");return r.each((function(t){var n=e(this).attr("data-selid");""===a&&(a=n),n!==a&&(s.push(i.join(",").replace(/#/g,"")),a=n,i=[]),i.push(this.id),t===r.length-1&&s.push(i.join(",").replace(/#/g,""))})),{elm:t.attr("data-rcfid"),type:o.a.list,value:s}})).get()},clearMarkedAnswers:function(){this.$selector.find(".markContext").remove()},close:function(){e(document).off("mouseup")},reset:function(){var e=this.$selector.find(".wordSnake:not(.example)");e.removeData("startElem").removeAttr("selecting").find("li.letter:not(.example)").removeData("userSelection").attr("class","letter").removeAttr("data-selid").removeData("selectedRange"),e.find("li.letter[data-distractor=y]").addClass("distractor")}},t}()}(i.a,window);n(25);function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return c}));class c extends class{constructor(e,t){l(this,"baseInteraction",void 0),l(this,"$selector",void 0),this.baseInteraction=new RCF.Interactions.Marked[t](e),this.$selector=this.baseInteraction.$selector}showAnswers(e,t){"function"==typeof this.baseInteraction.showAnswers&&this.baseInteraction.showAnswers(e,t)}showMarkedAnswers(e){"function"==typeof this.baseInteraction.showMarkedAnswers&&this.baseInteraction.showMarkedAnswers(e)}showUserAnswers(){"function"==typeof this.baseInteraction.showAnswers&&this.baseInteraction.showUserAnswers()}isComplete(){return"function"!=typeof this.baseInteraction.isComplete||this.baseInteraction.isComplete()}getUserAnswers(){return"function"==typeof this.baseInteraction.getUserAnswers?this.baseInteraction.getUserAnswers():[]}clearMarkedAnswers(){"function"==typeof this.baseInteraction.clearMarkedAnswers&&this.baseInteraction.clearMarkedAnswers()}provideFeedback(e){"function"==typeof this.baseInteraction.provideFeedback&&this.baseInteraction.provideFeedback(e)}close(){"function"==typeof this.baseInteraction.close&&this.baseInteraction.close()}reset(){"function"==typeof this.baseInteraction.reset&&this.baseInteraction.reset()}}{constructor(e){super(e,r.c.wordSnake)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfWordSnake.js.map