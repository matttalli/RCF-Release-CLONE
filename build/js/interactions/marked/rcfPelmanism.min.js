(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfPelmanism"],{675:function(t,n,e){"use strict";e.r(n);e(25);var a=e(4);e(6),e(11);var r=e(17);var c=e(99);function i(t,n){Object(c.c)(t,"tries",n)}function o(t,n){Object(c.c)(t,"numSeconds",n)}function s(t){t.removeClass("hurryUp")}function u(t){return t.find(".card")}function d(t){t.removeClass("matched unmatched userAnswer flipped")}function l(t){const n=t.find(".matchedPair"),e=t.find(".playingCard"),a=u(t);n.removeClass("matchedPair"),e.removeClass("playingCard"),d(a)}function f(t){const n="".concat(Object(a.r)());Math.seedrandom(n);const e=function(t){return t.find(".cards")}(t);!function(t){Object(r.b)(t,"data-addedrank data-rank data-sortindex")}(function(t){return t.find(".cardContainer[data-addedrank='y']")}(t)),function(t,n){Object(a.G)(t,".cardContainer",n)}(e,"".concat(n)),i(t,0),o(t,0),s(t),l(t)}var m=e(5),v=e.n(m);e(15),e(16);function p(t){return parseInt(Object(r.a)(t,"data-numpairs")||1)}function h(t){return parseInt(Object(r.a)(t,"data-timelimit")||-1)}function b(t){return Object(r.a)(t,"interval")||0}function C(t){Object(r.b)(t,"interval")}function O(t,n){const e=function(t){return t.find(".timer")}(t);if(Object(a.y)(e))return;const r=parseInt(n/60)%60,c=parseInt(n%60,10);o(t,n),n<11&&function(t){t.addClass("hurryUp")}(t),e.text((r<10?"0"+r:r)+":"+(c<10?"0"+c:c))}function j(t){const n=function(t){return Object(r.a)(t,"data-pairs")||""}(t),e=p(t),c=h(t),i=b(t),s=n.split("|");if(i&&(clearInterval(i),C(t)),c>-1){let n=parseInt(c);o(t,n),O(t,n)}let u=Object(a.J)(s);u=u.splice(0,e),u.forEach(n=>{t.find(".card[data-pairClass='".concat(n,"']")).closest(".cardContainer").addClass("playingCard")})}function g(t){return Object(r.a)(t,"data-timeout")||0}function y(t){const n=b(t),e=g(t);n&&(clearInterval(n),C(t)),e&&(clearTimeout(e),function(t){Object(r.b)(t,"data-timeout")}(t))}function w(t){t.addClass("gameOver")}function P(t,n){t.toggleClass("completed",n)}function k(t){t.addClass("flipped")}function T(t){t.addClass("unmatched")}function I(t){const n=u(t);k(n),T(n)}function $(t){return"y"==Object(r.a)(t,"data-reorderanswers")}var A=e(76),N=e.n(A);function S(t){return t.find(".cardContainer.playingCard")}function x(t){const n=S(t);n.each((t,n)=>{const e=v()(n);Object(r.c)(e,"data-pre-show-answers",t)}),n.length>0&&N()(n,{attr:"data-cardorder",order:"asc"})}function U(t){return parseInt(Object(r.a)(t,"data-flipbackdelay")||1200)}function E(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(y(t),s(t),n||I(t),$(t)){const e=U(t);setTimeout(()=>{w(t),P(t,n),x(t)},e)}else w(t),P(t,n)}function B(t){return Object(c.a)(t,"tries")||0}function R(t){return Object(c.a)(t,"numSeconds")||0}function _(t,n){Object(r.c)(t,"data-timeout",n)}function G(t){return Object(r.a)(t,"data-pairclass")||""}function J(t){const n=t.closest(".cardContainer");!function(t){t.removeClass("unmatched")}(t),function(t){t.addClass("matched")}(t),k(t),function(t){t.addClass("userAnswer")}(t),n.addClass("matchedPair")}function M(t){Object(c.b)(t,"firstPick")}var q=t=>{const n=S(t),e=t.find(".matched").length;return n.length===e};function z(t){return t.hasClass("matched")}function D(t){return t.hasClass("unmatched")}function F(t){const n=function(t){return t.closest(".pelmanismContainer")}(t);let e=function(t){return Object(c.a)(t,"firstPick")||v()([])}(n),s=B(n);const u=h(n);let d=R(n),l=b(n);const f=U(n),m=0===s&&u>-1&&0===l;let p,C=g(n),j=Object(a.v)(t)||"",y=Object(a.v)(e)||"";if(t.addClass("flipped"),m&&(d=parseInt(u),o(n,d),l=function(t){return setInterval(()=>{let n=R(t);--n<0&&(n=0),O(t,n),o(t,n),n<1&&E(t,!1)},1e3)}(n),function(t,n){Object(r.c)(t,"interval",n)}(n,l)),Object(a.y)(e)&&(e=t,y=Object(a.v)(e)||"",Number(C)>0&&(clearTimeout(C),_(n,null)),function(t,n){Object(c.c)(t,"firstPick",n)}(n,e),n.find(".card.unmatched[data-cardid!='".concat(y,"']")).removeClass("unmatched flipped")),j===y)return;s++,i(n,s);n.find(".numAttempts").html(""+s);if(G(t)===G(e))return J(t),J(e),M(n),void(q(n)&&E(n,!0));T(e),T(t),p=t,M(n);C=function(t,n,e){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500;return setTimeout(()=>{t.hasClass("gameOver")||(!z(n)&&D(n)&&n.removeClass("flipped unmatched"),!z(e)&&D(e)&&e.removeClass("flipped unmatchd")),_(t,null)},a)}(n,e,p,f<500?500:f>5e3?5e3:f),_(n,C)}function H(t){const n=u(t),e=S(t),r=function(t){const n=t.find(".card .front").css("transition-duration")||"500ms";return Object(a.m)(n)}(t);t.removeClass("completed gameOver hurryUp"),i(t,0),M(t),d(n),function(t,n){t.find(".numAttempts").html("".concat(n))}(t,0),setTimeout(()=>{e.removeClass("playingCard matchedPair shownAnswer"),f(t),j(t)},r+200)}function K(t,n){const e=function(t){return t.find("*[data-rcfinteraction='pelmanism']")}(n);t.$activity=n,t.$selector=e,Object(a.y)(e)||(f(e),function(t){t.each((t,n)=>{j(v()(n))})}(e),function(t){t.on("click","*[data-rcfinteraction=pelmanism]:not(.gameOver) .card:not(.flipped)",(function(){F(v()(this))})),t.on("click",".shuffleButton",(function(){H(v()(this).closest("[data-rcfinteraction='pelmanism']"))}))}(n))}e(32),e(33);var L=(t,n)=>{var e,a;const r=h(t);l(t);const c=Number((null===(e=n.value)||void 0===e?void 0:e.tries)||0);if(((null===(a=n.value)||void 0===a?void 0:a.pairs)||[]).forEach(n=>{t.find(".cardContainer.".concat(n)).addClass("matchedPair playingCard"),t.find(".card.".concat(n)).addClass("matched userAnswer")}),r>-1){var o;const[e,a]=(null===(o=n.value)||void 0===o||null===(o=o.timeTaken)||void 0===o?void 0:o.split(":"))||[0,0],c=r-(60*Number(e)+Number(a));O(t,c)}i(t,c),w(t),P(t,!0),$(t)&&x(t),setTimeout(()=>{k(t.find(".playingCard.matchedPair .card"))},100)},Q=e(393),V=e(8);var W=(t,n)=>{Object(Q.a)(t,n,!1,t=>{var n;null!==(n=t.value)&&void 0!==n&&n.completion&&t.value.completion===V.b.won&&L(t.$interaction,t)})};e(48);function X(t){return t.hasClass("completed")}var Y=t=>t.hasClass("gameOver");var Z=t=>{const n=X(t),e=Y(t),a=q(t),r=B(t);return a?V.b.won:!n&&e?V.b.lost:!n&&!e&&r>0?V.b.inProgress:V.b.notStarted};var tt=t=>t.find(".playingCard.matchedPair").length/2;var nt=t=>{const n=t.find(".cardContainer.matchedPair .card.matched").map((t,n)=>v()(n).attr("data-pairclass")).get();return[...new Set(n)]};var et=t=>{const n=Object(a.v)(t)||"",e=p(t),r=B(t),c=tt(t),i=h(t),o=R(t),s=i>-1?i-o:0,u=nt(t),d=Z(t);return{elm:n,markType:V.d.unmarked,markedBy:V.c.nobody,type:V.a.gamePelmanism,ignoreNextAnswer:"y",value:{completion:d,tries:r,correct:c,outOf:e,timeTaken:Object(a.x)(s),pairs:u}}};function at(t){t.each((t,n)=>{y(v()(n))})}function rt(t,n,e){return(n=function(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var a=e.call(t,n||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,"default",(function(){return ct}));class ct{constructor(t){rt(this,"$selector",void 0),rt(this,"$activity",void 0);K(this,t)}showAnswers(t){W(this.$selector,t)}isComplete(){return function(t){let n=!0;return t.each((t,e)=>{X(v()(e))||(n=!1)}),n}(this.$selector)}getUserAnswers(){return this.$selector.map((t,n)=>et(v()(n))).get()}close(){at(this.$selector)}reset(){var t;at(t=this.$selector),t.each((t,n)=>{H(v()(n))})}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfPelmanism.js.map