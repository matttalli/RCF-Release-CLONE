(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfWordSearch"],{335:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r(25);var i=r(339);function n(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class o{constructor(t,e){n(this,"$activity",void 0),n(this,"$selector",void 0),n(this,"interactionFunctions",void 0),this.$activity=t,this.interactionFunctions=e}clearMarkedAnswers(){Object(i.a)(this.$selector)}getUserAnswers(t){return Object(i.b)(this,this.interactionFunctions.getUserAnswer,t)}isComplete(t){return Object(i.c)(this,this.interactionFunctions.isComplete,t)}showAnswers(t,e,r){Object(i.d)(this,t,e,this.interactionFunctions.showAnswer,r)}showMarkedAnswers(t,e){Object(i.e)(this,t,this.interactionFunctions.showMarkedAnswer,e)}showUserAnswers(t){Object(i.f)(this,this.interactionFunctions.showAnswer,t)}reset(){this.interactionFunctions.reset(this.$selector)}}},337:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));r(6),r(13);var i=r(5),n=r.n(i),o=r(4);function s(t,e){return Object(o.y)(e)?n()([]):t.filter((t,r)=>{let i=n()(r).closest(".itemBasedQuestion");return Object(o.v)(i)===e})}},682:function(t,e,r){"use strict";r.r(e);var i={};r.r(i),r.d(i,"showAnswer",(function(){return C})),r.d(i,"showMarkedAnswer",(function(){return y})),r.d(i,"getUserAnswer",(function(){return x})),r.d(i,"isComplete",(function(){return W})),r.d(i,"reset",(function(){return R}));r(6),r(11),r(15),r(16);function n(t,e){let r="";e.forEach(t=>{r+=function(t){return"<li><span data-selid='".concat(t.id,"' data-item='").concat(t.word,"' class='wordSearchSelection markable dev-markable-container'><span>").concat(t.word,"</span><span class='mark'>    </span><a class='removeWordListItem'>x</a></span></span></li>")}(t)}),t.html(r)}function o(t){return t.find(".wordSearchGridContainer")}var s=r(99),a=r(5),c=r.n(a);function l(t,e){t.each((t,r)=>{const i=c()(r);let n=Object(s.a)(i,"selectionID")||"";n.indexOf("|"+e+"|")<0&&(n+="|"+e+"|"),Object(s.c)(i,"selectionID",n)})}var d=r(17);function u(t){return Number(Object(d.a)(t,"data-gridsize")||10)}function h(t){return Object(d.a)(t,"data-usediagonal")||""}function f(t){return Object(d.a)(t,"data-usevertical")||""}function w(t){return Object(d.a)(t,"data-usereverse")||""}function v(t){return Object(d.a)(t,"data-words")||""}function m(t){return"y"===Object(d.a)(t,"data-interactive")}function g(t){return Object(d.a)(t,"data-rcfid")||""}function b(t){return t.find(".rcfWordSearchGridChosenWords .wordSearchWords")}function p(t,e){return t.find(".rcfWSCell[data-words*='|"+e+"|']")}function j(t){return"y"===Object(d.a)(t,"data-isFixed")}var O=r(338);function C(t,e){const r=t.$interaction,i=m(r);let a=[];const c=o(r),d=Object(s.a)(c,"selectionHandler");d.clearHighlighting();for(let i in t.value){const n=t.value[i];if(!e||Object(O.a)(t,i)){const t=p(r,n),e="showAnswers_"+i;l(t,e),a.push({id:e,word:n,$cells:t})}}i&&n(r.find(".wordSearchWords"),a),d.setSelections(a)}var S=r(340);var y=t=>{const e=t.$interaction;if(!m(e))return;t.value.forEach((r,i)=>{const n=Object(O.a)(t,i),o=e.find(".dev-markable-container[data-item='".concat(r,"']"));Object(S.a)(o,n)})},I=(r(48),r(8));var x=t=>{const e=o(t),r=m(t),i=Object(s.a)(e,"selectionHandler")||{userSelections:null};let n=[];r&&i&&i.selectedWords&&(n=i.selectedWords.map(t=>t.word));return{elm:g(t)||"",type:I.a.list,value:n}};r(13);var W=t=>!m(t)||function(t){const e=o(t);return Object(s.a)(e,"wordList").words.filter(t=>!t.example).length===function(t){return t.find(".wordsContainer .wordSearchWords li")}(t).length}(t),D=r(336);var $=t=>{const e=o(t),r=Object(s.a)(e,"selectionHandler");Object(D.a)(t),function(t){t.removeData("selectionID"),t.find(".isWord").removeClass("showAnswer"),t.find(".wordSearchWords li").remove()}(t),r&&r.clearSelections()};function R(t){t.each((t,e)=>{const r=c()(e);$(r)})}var G=r(4);function T(t,e){t.each((t,r)=>{let i=c()(r),n=Object(s.a)(i,"selectionID")||"";n.indexOf("|"+e+"|")<0&&(n+="|"+e+"|"),Object(s.c)(i,"selectionID",n)})}function A(t,e,r){const i=c()(t.currentTarget),a=e.elm;if(isNaN(r))return;const l=Number(r);if(a!==Object(G.v)(i))return;let d,u,h=[];const f=b(i),w=o(i),v=Object(s.a)(w,"selectionHandler");for(let t=0;t<l+1;t++){const r=e.value[t];d=p(i,r),u="showAnswers_"+t,T(d,u);const n={id:u,word:r,$cells:d};h.push(n)}m(i)&&n(f,h),v.setSelections(h)}var L=t=>t.find("*[data-rcfinteraction='wordSearch']");r(25);function M(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class P{constructor(){M(this,"DEFAULT",void 0),M(this,"wordIndex",void 0),M(this,"value",void 0),M(this,"containsWord",void 0),M(this,"example",void 0),this.DEFAULT="-",this.wordIndex=[],this.value=this.DEFAULT,this.containsWord=!1,this.example=!1}isUnwritten(){return this.value===this.DEFAULT}getWordIndexes(){let t="";return this.wordIndex&&(t=Array.from(this.wordIndex).map(t=>"word".concat(t)).join(" ")),t}}function k(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class E{constructor(t,e){k(this,"value",void 0),k(this,"example",void 0),k(this,"wordIndex",void 0),k(this,"originalValue",void 0),k(this,"cellsUsed",void 0),k(this,"isPlaced",void 0),k(this,"row",void 0),k(this,"col",void 0),k(this,"size",void 0),k(this,"startRow",void 0),k(this,"startCol",void 0),k(this,"direction",void 0),this.value=t.word.toUpperCase(),this.example=!!t.example&&"y"==t.example,this.wordIndex=e,this.originalValue=this.value,this.startRow=t.startRow,this.startCol=t.startCol,this.direction=t.direction,this.cellsUsed=[],this.isPlaced=!1,this.row=-1,this.col=-1,this.size=-1,this.size=this.value.length}setContainedIn(t){t.wordIndex.push(this.wordIndex),t.example||(t.example=this.example),t.containsWord=!0,this.cellsUsed.push(t)}isSimilarTo(t){const e=Object(G.I)(this.originalValue),r=Object(G.I)(this.value);return this.originalValue==t||this.value==t||e==t||r==t}}function F(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class z{constructor(t){F(this,"words",void 0),F(this,"fixed",void 0),F(this,"useReverse",void 0),this.words=[],this.useReverse="y"===t}loadWords(t){const e=JSON.parse(t),r=this;r.fixed="y"===e.fixed,e.words&&e.words.length>0&&(r.words=e.words.map((t,e)=>{const i=new E(t,e);return r.fixed||!r.useReverse||t.example||10*Math.random()>7&&(i.value=Object(G.I)(i.value)),i}))}add(t){this.fixed||this.useReverse&&!t.example&&10*Math.random()>7&&(t.value=Object(G.I)(t.value)),this.words[this.words.length]=t}size(){return this.words.length}get(t){return this.words[t]}getOriginalWord(t){const e=this.words.find(e=>e.isSimilarTo(t));return e?e.originalValue:null}}var U=Math.seedrandom;r(59),r(100),r(102);function H(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const N={n:{verticalIncrement:-1,horizontalIncrement:0},ne:{verticalIncrement:-1,horizontalIncrement:1},e:{verticalIncrement:0,horizontalIncrement:1},se:{verticalIncrement:1,horizontalIncrement:1},s:{verticalIncrement:1,horizontalIncrement:0},sw:{verticalIncrement:1,horizontalIncrement:-1},w:{verticalIncrement:0,horizontalIncrement:-1},nw:{verticalIncrement:-1,horizontalIncrement:-1}};class V{constructor(t,e){H(this,"cells",void 0),H(this,"directions",void 0),H(this,"validGrid",void 0),H(this,"numRows",void 0),H(this,"numCols",void 0),H(this,"wordList",void 0),H(this,"invalidWords",void 0),this.directions=[],this.directions.push("Horizontal"),e&&"y"===e&&this.directions.push("Vertical"),"y"===t&&(this.directions.push("LeftDiagonal"),this.directions.push("RightDiagonal")),this.validGrid=!0}initializeGrid(t,e){this.numCols=e,this.numRows=t,this.cells=new Array(t);for(let r=0;r<t;r++){this.cells[r]=new Array(e);for(let t=0;t<e;t++){const e=new P;this.cells[r][t]=e}}}fillGrid(t,e){return t.fixed?this._fillFixedGrid(t,e):this._fillDynamicGrid(t)}_fillDynamicGrid(t){let e=[];const r=this.numRows,i=this.numCols;let n=0,o=0;for(this.wordList=t,t.words.forEach(t=>{const s=t.value,a=t;let c=0,l=0,d=0;for(;c<20;){const t=this.directions[Math.floor(Math.random()*this.directions.length)],u=this.directionInfo(s,t,i,r);if(u.maxX<0||u.maxY<0||u.maxY<u.minY||u.maxX<u.minX){e.push(s);break}l=Math.round(Math.random()*(u.maxX-u.minX)+u.minX),n=l,d=Math.round(Math.random()*(u.maxY-u.minY)+u.minY),o=d;let h,f=!0,w=0,v=0;for(v=0;v<s.length;v++){if(h=this.cells[o][n],!h.isUnwritten()){if(h.value!==s.charAt(v)){f=!1;break}w++}o+=u.dy,n+=u.dx}if(f&&!(w>=s.length)){for(n=l,o=d,v=0;v<s.length;v++)h=this.cells[o][n],h.value=s.charAt(v),a.setContainedIn(h),a.isPlaced=!0,o+=u.dy,n+=u.dx;break}c++}c>=20&&(e.push(s),this.validGrid=!1)}),o=0;o<r;o++)for(n=0;n<i;n++)this.cells[o][n].isUnwritten()&&(this.cells[o][n].value=String.fromCharCode(Math.floor(65+26*Math.random())));return this.validGrid}_fillFixedGrid(t,e){const r=this;return r.wordList=t,r.invalidWords=[],t.words.forEach(t=>{const i=t.startRow-1,n=t.startCol-1,{verticalIncrement:o,horizontalIncrement:s}=N[t.direction];for(let a=0;a<t.value.length;a++){const c=t.value.charAt(a),l=i+a*o,d=n+a*s;if(l<0||l>r.numRows-1||d<0||d>r.numCols){r.invalidWords.push(t.value),r.validGrid=!1;break}const u="r".concat(l,"c").concat(d),h=e.find('td[data-cellid="'.concat(u,'"]')),f=r.cells[l][d];if(h.text().trim()!==c){r.invalidWords.push(t.value),r.validGrid=!1;break}f.value=c,t.setContainedIn(f),t.isPlaced=!0}}),r.validGrid}updateHTML(t){const e=t.closest(".wordSearchContainer");if(this.validGrid)for(let t=0;t<this.numRows;t++)for(let r=0;r<this.numCols;r++){const i=this.cells[t][r],n="r".concat(t,"c").concat(r),o=e.find('td[data-cellid="'.concat(n,'"]'));let s="";if(i.containsWord){o.addClass("isWord");let t=i.getWordIndexes().trim().replace(/word/g,"").split(" ");for(let e=0;e<t.length;e++)s+="|".concat(this.wordList.words[t[e]].originalValue,"|");o.addClass(i.getWordIndexes()),i.example&&o.addClass("example"),o.attr("data-words",s)}i.isUnwritten()&&(i.value=o.text())}else t.html("\n\t\t\t\t<div class='errorMessage'>\n\t\t\t\t\tThe following words cannot fit into the grid with the given start row / column values\n\t\t\t\t\t<ul>\n\t\t\t\t\t".concat(this.invalidWords.map(t=>"<li>".concat(t.toString(),"</li>")).join(" "),"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>"))}getHTML(){let t="<div class='rcfWordSearchGrid ".concat(this.validGrid?"":"tooSmall","'><table class='rcfTableGrid' cellspacing=0 cellpadding=0>"),e="";const r="grd"+parseInt(100*Math.random());for(let i=0;i<this.numRows;i++){t+="<tr>";for(let n=0;n<this.numCols;n++){const o=r+"_r"+i+"c"+n,s=this.cells[i][n];let a="";if(s.containsWord){let t=s.getWordIndexes().trim().replace(/word/g,"").split(" ");for(let e=0;e<t.length;e++)a+="|"+this.wordList.words[t[e]].originalValue+"|"}e=s.containsWord?"isWord "+s.getWordIndexes():"",e+=s.example?" example ":"",t+="<td id='".concat(o,"' data-cellid='r").concat(i,"c").concat(n,"' class='rcfWSCell ").concat(e,"' data-words='").concat(a,"'>").concat(s.value,"</td>")}t+="</td>"}return t+="</table>"+(this.validGrid?"":"<span>Not all words can fit in a grid this small</span>")+"</div>",t}directionInfo(t,e,r,i){let n=0,o=0,s=r-1,a=i-1,c=0,l=0;switch(e){case"Horizontal":s=r-t.length,n=0,c=1;break;case"Vertical":o=0,a=i-t.length,l=1;break;case"LeftDiagonal":a=i-1,o=t.length-1,l=-1,s=r-t.length,n=0,c=1;break;case"RightDiagonal":o=0,a=i-t.length,l=1,s=r-t.length,n=0,c=1}return{maxX:s,maxY:a,minX:n,minY:o,dx:c,dy:l}}}function _(t){let{$wordSearchContainer:e,wordList:r,useDiagonal:i,useVertical:n,seedString:o}=t,s=0,a=u(e),c=function(t){const e=u(t);return Number(Object(d.a)(t,"data-gridRows")||e)}(e),l=function(t){const e=u(t);return Number(Object(d.a)(t,"data-gridCols")||e)}(e);const h=function(t){return Number(Object(d.a)(t,"data-longestword")||0)}(e),f=j(e);let w=a>0?a:10;!f&&h>w&&(w=h+2,l=w,c=w);const v=new V(i,n);if(v.initializeGrid(c,l),f)return v.fillGrid(r,e),v.updateHTML(e),v;for(;s<8&&!v.fillGrid(r,e);)s<5?(U(o+"_retry_"+s),s++,s%2==0&&w++):s++,v.validGrid=!0,v.initializeGrid(w,w);return v}function X(t,e){const r=o(t),{useDiagonal:i,useVertical:n,useReverse:a,words:c,isFixed:l}=function(t){return{useDiagonal:h(t),useVertical:f(t),useReverse:w(t),words:v(t),isFixed:j(t)}}(t);let d=new z(a);d.loadWords(c);const u=_({$wordSearchContainer:t,wordList:d,useDiagonal:i,useVertical:n,seedString:e});return l||r.append(u.getHTML()),Object(s.c)(r,"grid",u),Object(s.c)(r,"wordList",d),u}function Y(t){return t.find(".ws-glowing, .ws-highlight")}function B(t,e){return"r".concat(t,"c").concat(e)}var J=r(36);var Q=(t,e)=>{t.on("mousedown","td",r=>{const i=c()(r.currentTarget);e.fingerDown=!0,1===r.which&&(t.find(".ws-start").removeClass("ws-start"),i.addClass("ws-start ws-highlight"),e.$startCell=i)})};var q=(t,e)=>{t.on("mousemove","td",r=>{if(!e.fingerDown)return;const i=c()(r.currentTarget);e.$currentCell=i,e.$startCell=Object(G.y)(e.$startCell)?t.find("td.ws-start"):e.$startCell,Object(G.y)(e.$startCell)?e.fingerDown=!1:e.allowSelection()&&(t.find(".ws-glowing").removeClass("ws-glowing"),e.getSelectedCells().addClass("ws-glowing"))})};var K=(t,e)=>{if(e.fingerDown){const r=Y(t);e.fingerDown=!1,e.makeSelection(r)}},Z=r(37);var tt=(t,e)=>{t.on("mouseup",()=>{e.fingerDown=!1;const r=Y(t);e.makeSelection(r)}),Z.a.addEventListener("mouseup",()=>{K(t,e)})};var et=(t,e)=>{Q(t,e),q(t,e),tt(t,e)};var rt=(t,e)=>{t.on("touchstart","td",r=>{const i=c()(r.currentTarget);t.find(".ws-start").removeClass("ws-start"),i.addClass("ws-start ws-highlight"),e.$startCell=i,e.fingerDown=!0})};var it=(t,e)=>{t.on("touchmove",r=>{if(Object(G.F)(r),!e.fingerDown)return;const i=r.originalEvent.touches?r.originalEvent.touches[0]:null;if(!i)return;const n=Z.a.elementFromPoint(i.clientX,i.clientY);n&&(e.$currentCell=c()(n),e.allowSelection()&&(t.find(".ws-glowing").removeClass("ws-glowing"),e.getSelectedCells().addClass("ws-glowing")))})};var nt=(t,e)=>{t.on("touchend","td",r=>{e.fingerDown=!1;const i=Y(t);e.makeSelection(i),Object(G.F)(r)}),Z.a.addEventListener("touchend",()=>{K(t,e)})};var ot=(t,e)=>{rt(t,e),it(t,e),nt(t,e)};function st(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class at{constructor(t){st(this,"$wordSearch",void 0),st(this,"$startCell",void 0),st(this,"$currentCell",void 0),st(this,"selectedWords",void 0),st(this,"fingerDown",void 0);this.$wordSearch=t,this.selectedWords=[];const e=function(t){return t.closest(".wordSearchContainer")}(t);"y"===Object(d.a)(e,"data-interactive")&&(this.fingerDown=!1,function(t,e){Object(J.f)()?ot(t,e):et(t,e)}(t,this))}getSelectedCells(){const t=this.getGridSelection();let e=[];const r=function(t){return parseInt(t.currentRow>t.startRow?1:t.currentRow<t.startRow?-1:0)}(t),i=function(t){return parseInt(t.currentCol>t.startCol?1:t.currentCol<t.startCol?-1:0)}(t),n=B(t.currentRow,t.currentCol);let o=t.startRow,s=t.startCol;for(e.push("#"+this.$startCell[0].id);;){let t;if(o+=r,s+=i,t=B(o,s),e.push("#"+this.$wordSearch.find("[data-cellid='"+t+"']")[0].id),t===n)break}const a=c()(e.join(","),this.$wordSearch);return a.filter(".example").length===a.length?c()([]):a}setSelections(t){this.clearSelections();let e=0;t.forEach(t=>{const{id:r,word:i,$cells:n}=t;this.getSelectionByWord(i)||(Object(s.c)(n,"selectionID",r),n.addClass("ws-selected"),e++,this.selectedWords.push(t))}),Object(s.c)(this.$wordSearch,"selectionID",e)}clearHighlighting(){this.$wordSearch.find("td").removeData("selectionID").removeData("selected").removeClass("ws-glowing ws-armed ws-highlight ws-selected")}clearSelections(){this.clearHighlighting(),this.selectedWords=[]}getSelection(t){let e=this.selectedWords.map((function(t){return t.id})).indexOf(parseInt(t));return-1!==e?this.selectedWords[e]:null}getSelectionByWord(t){let e=this.selectedWords.map((function(t){return t.word})).indexOf(t);return-1!==e?this.selectedWords[e]:null}removeSelection(t){this.selectedWords.forEach((e,r)=>{if(e.id==t){e.$cells.removeClass("ws-glowing").each((e,r)=>{const i=c()(r);let n=Object(s.a)(i,"selectionID")||"";n=n.indexOf("|")>-1?n.replace("|"+t+"|",""):n.replace(t,""),Object(s.c)(i,"selectionID",n),n.length<1&&i.removeClass("ws-selected")}),this.selectedWords.splice(r,1)}})}makeSelection(t){const e=this.$wordSearch;let r=Object(s.a)(e,"selectionID")||0,i="";const n=this;if(r++,Object(s.c)(e,"selectionID",r),t.removeClass("ws-glowing ws-highlight"),t.length>1&&(t.each((t,e)=>{const r=c()(e),n=Object(s.a)(r,"cell");n&&(i+=n.value||"")}),!this.getSelectionByWord(i))){t.each((t,e)=>{const i=c()(e);if(Object(s.a)(i,"cell")){i.addClass("ws-selected");let t=Object(s.a)(i,"selectionID")||"";t+="|"+r+"|",Object(s.c)(i,"selectionID",t),Object(s.c)(i,"selected",!0)}});const o=Object(s.a)(e,"wordList").getOriginalWord(i)||i;i=o;const a={id:"".concat(r),word:i,$cells:t};n.selectedWords.push(a),e.trigger("rcf.selectionChanged",[n.selectedWords])}t.removeClass("ws-start"),e.find("td.ws-start").removeClass("ws-start"),n.$startCell=null}getGridSelection(){const t=/r(\d+)c(\d+)/,e=t.exec(Object(d.a)(this.$startCell,"data-cellid")),r=t.exec(Object(d.a)(this.$currentCell,"data-cellid"));return{startRow:parseInt(e[1]),startCol:parseInt(e[2]),currentRow:parseInt(r[1]),currentCol:parseInt(r[2])}}allowSelection(){const t=this.getGridSelection(),e=Math.abs(t.startRow-t.currentRow),r=Math.abs(t.startCol-t.currentCol);return e<1&&r<1||e>0&&(e===r||r<1)||e<1}}var ct=t=>{const e=o(t),r=new at(e);Object(s.c)(e,"selectionHandler",r)};function lt(t,e){t.on("mouseover",".wordSearchSelection",t=>{!function(t,e){let r=c()(t),i=Object(d.a)(r,"data-selid")||"",n=e.getSelection(i);n&&n.cells&&(n.cells.addClass("ws-glowing"),setTimeout(()=>{n.cells.removeClass("ws-glowing")},400))}(t.currentTarget,e)}),t.on("click",".removeWordListItem",t=>{!function(t,e){const r=c()(t.currentTarget).closest(".wordSearchSelection"),i=r.parent(),n=Object(d.a)(r,"data-selid");e.removeSelection(n),i.fadeOut(200,()=>{i.remove()}),t.preventDefault(),t.stopPropagation()}(t,e)})}var dt=t=>{const e=o(t),r=b(t);e.on("rcf.selectionChanged",(t,e)=>{n(r,e)});const i=Object(s.a)(e,"selectionHandler");lt(r,i)};var ut=(t,e)=>{const r=o(t),i=m(t);if(!(!j(t)||function(t){return"y"===Object(d.a)(t,"data-isValid")}(t)))return;const n=X(t,e);n.validGrid&&(!function(t){Object(d.b)(t,"data-words")}(t),ct(t),i&&(!function(t,e){let r=t.cells;e.find("tr").each((t,e)=>{c()(e).find("td").each((e,i)=>{let n=r[t][e],o=c()(i);Object(s.c)(o,"cell",n)})})}(n,r),dt(t)))};function ht(t,e){if(Object(G.y)(e))throw"Empty Activity passed to WordSearchGrid interaction constructor";t.$activity=e,t.$selector=L(e);let r=function(t){let e="";return e=Object(d.a)(t,"id")||"",e+=Object(d.a)(t,"data-seed")||"",e}(e);Math.seedrandom(r),t.$selector.each((t,e)=>{const i=c()(e);ut(i,r)}),function(t){t.on("rcf.single.answer","*[data-rcfinteraction='wordSearch']",A)}(e)}var ft=r(335);r.d(e,"default",(function(){return wt}));class wt extends ft.a{constructor(t){super(t,i),ht(this,t)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfWordSearch.js.map