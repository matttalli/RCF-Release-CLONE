(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfMovingTargets"],{707:function(t,e,a){"use strict";a.r(e);a(25),a(6),a(15),a(16);const s="Load",i="Play";function r(t,e,a,s){return t.add.sprite(t.camera.width/2-e,t.camera.height/2-a,s)}var n=a(348),o=a(104);function c(t,e,a,s){const{speed:i,assets:{targetBackgroundMoving:r}}=e;a.forEach(t=>{t.body.velocity.setTo(parseInt(i),0)}),s&&"y"===r&&s.autoScroll(i,0),Object(n.a)(t,o.b.isPlaying)}var u=a(352);function g(t){if(Object(u.e)(this.$gameStage))return;const e=t.x-this.game.camera.width/2;var a,s,i;this.gameTargets.forEach(a=>{a.x-=e+t.width/2}),a=this.$gameStage,s=this.gameTargets,i=this.targetBackground,s.forEach(t=>{t.body.velocity.setTo(0,0)}),i&&i.autoScroll(0,0),Object(n.a)(a,o.b.isPaused),t.id===this.currentClue.key?0===this.remainingClues.length?(this.successAudio.onStop.addOnce(()=>{this.gameOverAudio.play(),Object(n.a)(this.$gameStage,o.b.isGameOverScreen),Object(u.h)(this.$gameStage)}),this.successAudio.play()):(this.currentClue=this.remainingClues.pop(),this.successAudio.onStop.addOnce(()=>{this.currentClue.onStop.addOnce(()=>{c(this.$gameStage,this.gameSettings,this.gameTargets,this.targetBackground)}),this.currentClue.play()}),this.successAudio.play()):(this.failAudio.onStop.addOnce(()=>{this.currentClue.onStop.addOnce(()=>{c(this.$gameStage,this.gameSettings,this.gameTargets,this.targetBackground)}),this.currentClue.play()}),this.failAudio.play())}a(48);var d=a(4);function l(t,e,a,s,i){const r=a.length;Object(u.l)(s);const n=function(t,e){let a=e.targets.map(e=>t.add.audio(e.id));return a=Object(d.K)(a),a}(t,e),o=n.pop();let g=function(t){let e=[];for(let a=0;a<t;a++)e[a]=-300-300*a;return e}(r);g=Object(d.K)(g);let l=0;return a.forEach(t=>{t.x=g[l],l++}),o.play(),c(s,e,a,i),{currentClue:o,remainingClues:n}}function h(t,e,a){return new class extends t{preload(){this.remainingClues=[],this.currentClue=null,this.gameTargets=null,this.collisionTarget=null,this.clueButton=null,this.successAudio=null,this.failAudio=null,this.gameOverAudio=null,this.$gameStage=e,this.gameSettings=a}create(){!function(t,e){const{speed:a,assets:{sceneBackground:s,targetBackground:i,foreground:r,sceneBackgroundMoving:n,targetBackgroundMoving:o,foregroundMoving:c,foregroundBounce:u}}=e,{world:{width:g,height:d}}=t;if(s){const e=t.add.tileSprite(0,0,g,d,"sceneBackground");"y"===n&&e.autoScroll(-.6*parseInt(a),0)}if(i){const e=t.add.tileSprite(0,120,g,d-150,"targetBackground");"y"===o&&e.autoScroll(parseInt(a),0)}if(r){const e=t.add.tileSprite(0,d-50,g,100,"foreground");"y"===c&&e.autoScroll(-1.2*parseInt(a),0),"y"===u&&t.add.tween(e).to({y:d-100},1500,Phaser.Easing.Cubic.InOut,!0,0,Number.MAX_VALUE,!0)}}(this.game,a),this.gameTargets=function(t,e){const a=t.add.group();return a.enableBody=!0,a.physicsBodyType=Phaser.Physics.ARCADE,e.targets.forEach((t,s)=>{let i;try{const e=t.image.split("/").pop();i=a.create(-300-300*s,160,e)}catch(e){console.log("Error loading target ["+t.id+"] \n\n"+e)}i&&(i.id=t.id,i.body.velocity.setTo(parseInt(e.speed),0),i.body.acceleration.setTo(0,0))}),a}(this.game,a),r(this.game,224,141,"crosshairs"),this.collisionTarget=r(this.game,15,15,"collisionTarget"),this.clueButton=this.game.add.button(this.game.world.width-140,10,"clueButton",()=>{e.hasClass("complete")||this.currentClue.play()},this),this.clueButton.input.useHandCursor=!0,this.game.scale.pageAlignHorizontally=!0,this.failAudio=this.game.add.audio("fail"),this.successAudio=this.game.add.audio("success"),this.gameOverAudio=this.game.add.audio("gameover");const t=l(this.game,a,this.gameTargets,e,this.targetBackground);this.currentClue=t.currentClue,this.remainingClues=t.remainingClues}update(){let t=0,e=null;this.gameTargets.forEach(t=>{t.overlap(this.collisionTarget)?t.inputEnabled||(t.inputEnabled=!0,t.input.useHandCursor=!0,t.events.onInputDown.add(g,this)):(t.inputEnabled=!1,t.events.onInputDown.removeAll())}),this.gameTargets.forEach(a=>{a.x<t&&(t=a.x),a.x>a.width*this.gameTargets.length&&(e=a)}),null!=e&&(e.x=t-300)}}}function m(t,e,a,r){return new class extends t{constructor(){super({width:700,height:480,enableDebug:!1,parent:e[0].id,transparent:!0});const t=function(t,e,a){return new class extends t{preload(){!function(t,e){!function(t,e,a){["sceneBackground","targetBackground","foreground"].forEach(e=>{const s=t[e];s&&a.load.image(e,s)}),["crosshairs","collisionTarget","clueButton"].forEach(e=>{const s=t[e];if(!s)throw'Image asset expected in ("assets"): "'+e+'"';a.load.image(e,s)}),e.forEach(t=>{a.load.image(t.image.split("/").pop(),t.image,!0)})}(e.assets,e.targets,t),function(t,e,a){["fail","success","gameover"].forEach(e=>{const s=t[e];if(!s)throw'Audio asset expected in ("audio"): "'+e+'"';a.load.audio(e,s)}),e.forEach(t=>{a.load.audio(t.id,t.audio)})}(e.audio,e.targets,t)}(this.game,a),this.game.stage.disableVisibilityChange=!0}create(){Object(u.m)(e)}}}(r.State,e,a),n=h(r.State,e,a);this.state.add(s,t,!1),this.state.add(i,n,!1)}}}var p=a(451),f=a(532),b=a(625);function y(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"default",(function(){return v}));class v{constructor(t){y(this,"game",void 0),y(this,"$activity",void 0),y(this,"$selector",void 0);this.game=function(t,e){t.$selector=Object(u.d)(e,"movingTargets");const a=Object(u.c)(t,".rcfMovingTargets"),r=Object(f.a)(a),c=window.Phaser;Object(b.a)(e,a);const g=m(c.Game,a,r,window.Phaser);return g.state.start(s),Object(p.a)(e,".rcfMovingTargets",".startGameButton",()=>{g.paused=!1,Object(n.a)(a,o.b.isPlaying),g.state.start(i)}),g}(this,t)}reset(){const t=Object(u.c)(this,".rcfMovingTargets");Object(u.l)(t),this.game.state.start(i)}pause(){this.game.paused=!0}resume(){this.game.paused=!1}close(){this.game.destroy()}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfMovingTargets.js.map