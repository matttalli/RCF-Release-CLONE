(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfVendorGamesShared"],{368:function(e,t,a){"use strict";a(25),a(31);var i=a(532),n=a(645),r=a(451),s=a(646);var o=e=>{const t=e.attr("data-initialiseFunction")||"createGame";if("function"==typeof window[t])return window[t]};a(6),a(13),a(15),a(16);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f=(e,t)=>{e.gameData.settings&&t&&t.settings&&(e.gameData.settings=m(m({},e.gameData.settings),t.settings),delete t.settings),e.gameData=m(m(m({},e.gameData),e.textDictionary),t)},g=a(14);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=e=>{const t=Object(g.a)();e.gameData.settings=b(b({},e.gameData.settings),{},{fontSource:"".concat(t,"fonts/Castledown/castledown_bold.woff2")})},_=a(60);var O=()=>({textDictionary:{WELL_DONE:_.a.t("interactions.fiabGames.wellDone"),YOU_GOT_POINTS:_.a.t("interactions.fiabGames.youGotPoints"),YOU_GOT_1_POINT:_.a.t("interactions.fiabGames.youGot1Point"),GAME_OVER:_.a.t("interactions.fiabGames.gameOver"),GAME_PAUSED:_.a.t("interactions.fiabGames.gamePaused"),PLAYER_COUNT_SCREEN_PROMPT:_.a.t("interactions.fiabGames.playerCountScreenPrompt"),CHARACTER_SELECTION_SCREEN_SOLO_PLAYER:_.a.t("interactions.fiabGames.characterSelectionScreenSoloPlayer"),CHARACTER_SELECTION_SCREEN_MULTI_PLAYER:_.a.t("interactions.fiabGames.characterSelectionScreenMultiPlayer"),SELECT_ROUNDS_SCREEN_PROMPT:_.a.t("interactions.fiabGames.selectRoundsScreenPrompt"),STARTING_PLAYER_SCREEN_PROMPT:_.a.t("interactions.fiabGames.startingPlayerScreenPrompt"),ACTIVITY_SELECTOR_SCREEN_PROMPT:_.a.t("interactions.fiabGames.activitySelectorScreenPrompt"),ACTIVITY_RESULT_NORMAL_OUTCOME:_.a.t("interactions.fiabGames.activityResultNormalOutcome"),ACTIVITY_RESULT_SLIME_OUTCOME:_.a.t("interactions.fiabGames.activityResultSlimeOutcome"),GAME_RESULT_SCREEN_PROMPT_WIN_SOLO:_.a.t("interactions.fiabGames.gameResultScreenPromptWinSolo"),GAME_RESULT_SCREEN_PROMPT_LOSS_SOLO:_.a.t("interactions.fiabGames.gameResultScreenPromptLossSolo"),GAME_RESULT_SCREEN_PROMPT_MULTIPLE_ALL_LOSERS:_.a.t("interactions.fiabGames.gameResultScreenPromptMultipleAllLosers"),WINNERS:_.a.t("interactions.fiabGames.winners"),WINNER:_.a.t("interactions.fiabGames.winner"),PLAYER:_.a.t("interactions.fiabGames.player"),PLAYER_NAME:_.a.t("interactions.fiabGames.playerName"),EXIT_PROMPT:_.a.t("interactions.fiabGames.exitPrompt"),ANSWER_LABEL_1:_.a.t("interactions.fiabGames.answerLabel1"),ANSWER_LABEL_2:_.a.t("interactions.fiabGames.answerLabel2"),ANSWER_LABEL_3:_.a.t("interactions.fiabGames.answerLabel3"),ANSWER_LABEL_4:_.a.t("interactions.fiabGames.answerLabel4"),SLIME_FINISHED:_.a.t("interactions.fiabGames.slimeFinished"),SLIME_FINISHED_MULTI:_.a.t("interactions.fiabGames.slimeFinishedMulti"),SLIME_ADDED_TO:_.a.t("interactions.fiabGames.slimeAddedTo"),READY_PLAYER:_.a.t("interactions.fiabGames.readyPlayer"),GO:_.a.t("interactions.fiabGames.go"),ALL_LIVES_LOST:_.a.t("interactions.fiabGames.allLivesLost"),HOW_MANY_PLAYERS:_.a.t("interactions.fiabGames.playerCountScreenPrompt"),SELECT_AVATAR:_.a.t("interactions.fiabGames.characterSelectionScreenSoloPlayer"),SELECT_AVATARS:_.a.t("interactions.fiabGames.characterSelectionScreenMultiPlayer"),PLAYER_WINS:_.a.t("interactions.fiabGames.playerWins"),POINTS:_.a.t("interactions.fiabGames.points"),"1_POINT":_.a.t("interactions.fiabGames.1point"),HOW_MANY_CUBES:_.a.t("interactions.fiabGames.howManyCubes"),HOW_MANY_SECTIONS:_.a.t("interactions.fiabGames.howManySections"),TIE:_.a.t("interactions.fiabGames.tie"),TIMES_UP:_.a.t("interactions.fiabGames.timesUp")}}),h=a(152),p=a(90);var v=e=>{const t=e.attr("data-levelassetsurl")||"";return Object(h.a)(e)===p.a.capePreview?"":"".concat(t,"/")};a(11);var y=e=>e.find(".fiab-gameContainer");var P=e=>e.find(".fiab-gameStage"),d=a(4),G=a(647),A=a(8);var R=e=>{const{$gameStage:t}=e;switch(t.closest("[data-rcfinteraction]").attr("data-rcfinteraction")){case G.a.BUBBLES_GAME:case G.a.BARRELS_GAME:case G.a.SNAP_GAME:case G.a.WHACKAMOLE_GAME:case G.a.LANECHANGER_GAME:case G.a.COGS_GAME:case G.a.DICE_GAME:case G.a.SPINNER_GAME:default:return A.a.gameVendor}};var L=e=>{let t={completion:"not-started",livesLeft:0,correct:0,totalItemsFound:0,timeTaken:""};try{t=e.gameInstance.getUserAnswers()}catch(e){console.error("error getting user answers from fiab game instance",e)}const a=e.$gameStage.closest("[data-rcfinteraction]"),i=Object(d.v)(a)||"",n=R(e);return[{elm:i,markType:A.d.unmarked,markedBy:A.c.nobody,type:n,value:t}]};var I=e=>e.find(".resumeGameButton");var C=e=>e.find(".playGameButton");var T=e=>{C(e).prop("disabled",!0)};var N=e=>{C(e).prop("disabled",!1)},w=a(348);function M(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j={isStartScreen:"IS_START_SCREEN",isPlaying:"IS_PLAYING",isResuming:"IS_RESUMING",isGameOverScreen:"IS_GAME_OVER_SCREEN",isGameWonScreen:"IS_GAME_WON_SCREEN",isPaused:"IS_PAUSED",isQuestionCompleteScreen:"IS_QUESTION_COMPLETE_SCREEN"};t.a=class{constructor(e){M(this,"$activity",void 0),M(this,"$selector",void 0),M(this,"gameInstance",void 0),M(this,"$gameContainer",void 0),M(this,"$gameStage",void 0),M(this,"$resumeGameButton",void 0),M(this,"gameData",void 0),M(this,"textDictionary",void 0),M(this,"gameInitialized",void 0),this.$activity=e,this.$gameContainer=y(e),this.$resumeGameButton=I(this.$gameContainer),this.$gameStage=P(e),this.gameData=Object(i.a)(this.$gameStage),this.gameData.assetPath=v(e),this.textDictionary=O()}showAnswers(){}async initialiseGame(e){const t=o(this.$gameContainer);if(!t)return void console.error("initialise function for game not found on window object");f(this,e),this.setGameAudioFormat(),S(this),this.gameInstance=t();const a=this.$gameStage.get(0);return Object(s.a)(this.$gameContainer),T(this.$gameContainer),new Promise(e=>{try{console.log((new Date).toLocaleString(),"[FIAB Game] - Initialising game instance with final settings:",this.gameData),this.gameInstance.initialize(this.$activity.get(0),a,this.gameData,j,t=>{this.vendorGameInitialized(t),e()})}catch(e){console.error("error initialising fiab game instance",e)}})}setGameAudioFormat(){Object(n.a)(this.gameData)}vendorGameInitialized(e){e?console.error("error initializing fiab game instance",e):(N(this.$gameContainer),this.$gameContainer.get(0).addEventListener("rcf.game.change.screen",this.gameChangeScreenEvent.bind(this)),Object(r.a)(this.$activity,".fiab-gameContainer",".playGameButton",()=>{this.gameInstance.start()}),this.$resumeGameButton.on("click",e=>{e.stopPropagation(),this.resume()}))}gameChangeScreenEvent(e){const t=e.detail.event;console.info(new Date,"[FIAB Game Instance message received]: ",t),this.gameInitialized||(this.gameInitialized=!0)}close(){try{this.$gameContainer.get(0).removeEventListener("rcf.game.change.screen",this.gameChangeScreenEvent.bind(this)),this.gameInstance.close()}catch(e){console.error("error closing fiab game instance",e)}}reset(){try{this.gameInstance.reset(),Object(s.a)(this.$gameContainer)}catch(e){console.error("error resetting fiab game instance",e)}}pause(){try{this.$gameContainer.hasClass("start")||(this.$gameContainer.addClass("paused"),this.gameInstance.pause())}catch(e){console.error("error pausing fiab game instance",e)}}resume(){try{this.$gameContainer.removeClass("paused"),Object(w.a)(this.$activity,j.isResuming),this.gameInstance.resume()}catch(e){console.error("error resuming fiab game instance",e)}}getUserAnswers(){return L(this)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfVendorGamesShared.js.map