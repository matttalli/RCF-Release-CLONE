(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfColouring"],{718:function(t,e,r){"use strict";r.r(e);r(25);var i=r(5),a=r.n(i),o=r(4),c=(r(6),r(11),r(17));function n(t){t.$activity.on("click","".concat(t.selector,".playing .playClueButton"),()=>{const e=Object(c.a)(t.$currentTargetItem,"data-audio-clue");e&&t.game.playAudio(e)}),t.$activity.on("click","".concat(t.selector,".playing .colourPaletteItem:not(.current)"),()=>{t.game.playAudio({audio:[t.game.audio.incorrectAudio,Object(c.a)(t.$currentTargetItem,"data-audio-clue")]})}),t.$activity.on("click","".concat(t.selector,".playing .colourPaletteItem.current"),e=>{a()(e.currentTarget).addClass("selected"),t.$colouringScene.addClass(a()(e.currentTarget).attr("data-rcf-class"))}),t.$activity.on("click","".concat(t.selector,".playing .colourItem"),e=>{!function(t,e){const r=t.$colouringScene.find(".colourPaletteItem.selected"),i=a()(e.currentTarget),n=Object(c.a)(i,"data-rcf-colour-id");if(t.game.stopAudio(),Object(o.y)(r)||!i.hasClass("current")||n!==Object(c.a)(r,"data-rcf-colour-id"))return void t.game.playAudio({audio:[t.game.audio.incorrectAudio,Object(c.a)(t.$currentTargetItem,"data-audio-clue")]});t.items.setItemCorrect(i);let s=t.$currentTargetItem.next();0!==s.length?(t.items.setCurrentTargetItem(s),t.game.playAudio({audio:[t.game.audio.correctAudio,Object(c.a)(t.$currentTargetItem,"data-audio-clue")]})):t.game.gameOver()}(t,e)}),t.$colouringScene.on("click",".startGameButton",()=>{t.game.playing()})}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class u{constructor(t){s(this,"gameStates",void 0),s(this,"audio",void 0),s(this,"interaction",void 0),s(this,"$activity",void 0),s(this,"currentState",void 0),this.gameStates={START_SCREEN:0,PLAYING:1,GAME_OVER:2},this.audio=this.initAudio(t),this.interaction=t,this.$activity=t.$activity}setGameState(t){switch(this.currentState=t,this.currentState){case this.gameStates.START_SCREEN:this.playAudio(this.audio.gameStartAudio);break;case this.gameStates.PLAYING:{this.interaction.items.initialise(),this.interaction.items.setCurrentTargetItem(this.interaction.$colourTargetItems.first()),this.interaction.$colouringScene.addClass("playing");let t=Object(c.a)(this.interaction.$currentTargetItem,"data-audio-clue");Object(o.y)(t)||this.playAudio(t);break}case this.gameStates.GAME_OVER:this.playAudio({audio:[this.audio.correctAudio,this.audio.gameOverAudio]}),this.interaction.resetScene(),this.interaction.$colourTargetItems.removeClass("current selected")}}initAudio(t){return{gameStartAudio:Object(c.a)(t.$colouringScene,"data-audio-gamestart"),gameOverAudio:Object(c.a)(t.$colouringScene,"data-audio-gameover"),correctAudio:Object(c.a)(t.$colouringScene,"data-audio-correct"),incorrectAudio:Object(c.a)(t.$colouringScene,"data-audio-incorrect")}}start(){this.setGameState(this.gameStates.START_SCREEN)}playing(){this.setGameState(this.gameStates.PLAYING)}gameOver(){this.setGameState(this.gameStates.GAME_OVER)}playAudio(t){this.stopAudio(),this.$activity.trigger("rcf.play.audio",[t])}stopAudio(){this.$activity.trigger("rcf.stop.audio")}}r(13),r(48);var l=r(76),d=r.n(l);function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class g{constructor(t){m(this,"interaction",void 0),this.interaction=t}initialise(){this.interaction.$colouringScene.removeClass("complete gameOver"),this.interaction.$colouringScene.find('*[data-addedrank="y"]').removeAttr("data-addedrank").removeAttr("data-sortindex").removeAttr("data-rank");const t=this.interaction.$colouringScene,e=t.find(".colourItemsContainer");Object(o.G)(e,".colourItem",(new Date).getTime().toString());const r=t.find(".colourItem");r.length>0&&d()(r,{attr:"data-sortindex",order:"asc"}),this.interaction.$colourTargetItems=r,this.interaction.$paletteItems=t.find(".coloursContainer .colourPaletteItem").removeClass("selected current"),t.removeClass(this.interaction.$paletteItems.map((t,e)=>a()(e).attr("data-rcf-class")).get().join(" ")),this.interaction.$colourTargetItems.find("img[old-src]").each((t,e)=>{const r=a()(e);r.attr("src",r.attr("old-src")).removeAttr("old-src")})}setItemCorrect(t){const e=t.attr("data-correctimage"),r=t.find("img"),i=this.interaction.$currentPaletteItem?this.interaction.$currentPaletteItem:a()(""),o=Object(c.a)(i,"data-rcf-class"),n=o||"";this.interaction.$colouringScene.removeClass(n),t.addClass("correct").removeClass("current"),r.attr("old-src",r.attr("src")).attr("src",e)}setCurrentTargetItem(t){this.interaction.$colourTargetItems.removeClass("current selected"),this.interaction.$paletteItems.removeClass("current selected"),this.interaction.$currentTargetItem=a()(),Object(o.y)(t)||(this.interaction.$currentTargetItem=t,this.interaction.$currentTargetItem.addClass("current"),this.interaction.$currentPaletteItem=this.interaction.$paletteItems.filter("[data-rcf-colour-id='".concat(this.interaction.$currentTargetItem.attr("data-rcf-colour-id"),"']")),this.interaction.$currentPaletteItem.addClass("current"))}}function h(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"default",(function(){return v}));class v{constructor(t){h(this,"$activity",void 0),h(this,"selector",void 0),h(this,"$selector",void 0),h(this,"$colouringScene",void 0),h(this,"$currentTargetItem",void 0),h(this,"$colourTargetItems",void 0),h(this,"$paletteItems",void 0),h(this,"$currentPaletteItem",void 0),h(this,"game",void 0),h(this,"items",void 0),function(t,e){if(Object(o.y)(e))throw"Empty activity passed to Colouring constructor";if(t.selector='*[data-rcfinteraction="colouring"]',t.$activity=e,t.$selector=function(t){return t.find('*[data-rcfinteraction="colouring"]')}(e),t.$colouringScene=t.$selector.jquery?t.$selector.first():a()(""),Object(o.y)(t.$colouringScene))throw"No colouring scene in activity !";t.game=new u(t),t.items=new g(t),n(t),t.resetScene(),t.game.start()}(this,t)}resetScene(){this.$colouringScene.removeClass("complete").removeClass("playing").removeClass("complete gameOver")}reset(){var t;(t=this).resetScene(),t.game.start(),t.items.initialise()}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfColouring.js.map