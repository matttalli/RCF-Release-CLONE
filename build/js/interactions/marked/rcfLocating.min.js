(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfLocating"],{683:function(t,n,e){"use strict";e.r(n);e(25),e(6),e(13);var c=e(4);e(11);function i(t){return t.find(".locating_answer")}function o(t){return t.find('*[data-rcfinteraction="locating"]')}var r=e(5),a=e.n(r);function s(t){let n=a()("#rcfLocatingMask");const e=t.closest(".activityContainer");return n.length<1&&(n=a()('<div class="rcfMask" id="rcfLocatingMask"></div>').appendTo(e)),n}var l=e(373);function u(t){return t.find(".locatingItem")}function f(t){const n=Object(c.i)(t),e=Object(c.v)(t);return e?n.find(".locating_popup[data-locatingid=".concat(e,"]")):a()([])}function g(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.toggleClass("locatingSelecting",n)}function v(t){return t.find("input[type=text]")}function p(t){return t.attr("data-type")}function d(t){return t.find(".locating_popup")}var h=e(99);function b(t){const n=i(t);return Object(h.a)(n,"chosen-answer")||""}var j=e(359);const O=Object.freeze({list:"list",typeIn:"typein"});var m=t=>{const n=Object(c.i)(t),e=d(n),i=s(n);Object(j.a)(e),Object(l.a)(i)};var w=t=>{g(t.find(".locatingSelecting"),!1)};var y=t=>{w(t),m(t)};e(102);var $=e(17);function k(t){const n=Object($.a)(t,"data-locatingid")||"";return o(Object(c.i)(t)).filter("[data-rcfid='".concat(n,"']"))}var S=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||t.length<1)return"";const e=n?Object(c.h)(t):t;return" <span class='locatingAnswerBracket leftBracket'>(</span><span class='contentLocatingAnswer'>".concat(e,"</span><span class='locatingAnswerBracket rightBracket'>)</span>")};function I(t,n,e){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.data("chosen-answer",n).html(S(e,c)).show()}function A(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const e=u(t);e.toggleClass("answered",n)}function T(t){return t.closest(".locating_popup")}function _(t){t.removeData("chosen-answer").removeData("user-answer").html("").hide()}function C(t,n){if(!n||n.length<1)return"";const e=f(t).find(".locatingSpanPopup[data-rcfid=".concat(n,"]"));return e?e.text():""}var x=e(8);function B(t,n,e){t.on("click",".locating .locatingItem:not(.markable, .example),.locating .locating_answer:not(.example)",t=>{!function(t,n,e,i){const o=t.closest(".locating"),r=f(o);let a=p(o);const s=u(o);let h;const m=d(Object(c.i)(o));if(Object(j.a)(m),g(e,!1),g(s,!0),Object(l.b)(i),Object(j.b)(r),a===O.typeIn)Object(j.c)(n,r,t),h=v(r),h.val(function(t){return t.find(".contentLocatingAnswer").text()}(o)),h.focus();else{const e=b(o);r.toggleClass("withAnswer",!Object(c.y)(e)),Object(j.c)(n,r,t)}}(a()(t.currentTarget),t,n,e)})}function L(t,n){t.on("click",()=>{!function(t,n){y(n),Object(l.a)(t)}(t,n)})}function M(t,n){t.on("click",".locatingSpanPopup",e=>{!function(t,n,e){const o=Object(c.v)(t)||"",r=k(T(t)),a=u(r),s=i(r),f=d(n),v=!t.hasClass("clear");v?I(s,o,t.html().trim()):_(s),A(r,v),g(a,!1),Object(j.a)(f),Object(l.a)(e)}(a()(e.currentTarget),t,n)})}function P(t,n){t.on("click",".locating_popup .okButton",t=>{!function(t,n){const e=v(t),c=k(t),o=u(c),r=i(c);let a=e.val().toString(),s=a.length>0;s?I(r,a,a,!0):_(r),A(c,s),g(o,!1),Object(j.a)(t),Object(l.a)(n)}(T(a()(t.currentTarget)),n)}),t.on("click",".locating_popup .cancelButton",t=>{!function(t,n){g(u(k(t)),!1),Object(j.a)(t),Object(l.a)(n)}(T(a()(t.currentTarget)),n)}),t.on("keyup",".locating_popup",t=>{const n=t.keyCode;13===n?a()(t.currentTarget).find(".okButton").trigger("click"):27===n&&a()(t.currentTarget).find(".cancelButton").trigger("click")})}function D(t,n){t.on("rcf.single.answer","*[data-rcfinteraction=locating]",(t,e)=>{!function(t,n,e){const o=n.elm,r=Object(c.v)(t)||"",a=d(t.closest(".activity"));if(r!=o)return;Object(j.a)(a),Object(l.a)(e);const s=n,u=s.type,f=i(t),g=p(t);let v="",h="";u===x.a.simple?h=s.value:u!==x.a.list&&u!==x.a.choice||(h=s.value[0]),v=g===O.list?C(t,h):h,I(f,h,v),A(t,!0)}(a()(t.currentTarget),e,n)})}function E(t,n){if(Object(c.y)(n))throw"Empty activity passed to Locating constructor";t.$activity=n,t.$selector=o(n),t.$locatingInteractionsSelector=t.$selector.filter(":not(.example)"),t.$answerSelector=i(t.$locatingInteractionsSelector),t.$selector.find(".locating_answer.example").show(),t.$mask=s(n),function(t,n,e){B(t,n,e),L(e,n),M(t,e),P(t,e),D(t,e)}(t.$activity,t.$locatingInteractionsSelector,t.$mask)}e(15),e(16);var R=e(336);function U(t,n){let e,c,o;const r=t.$interaction,a=t.type;e=p(r),c=function(t,n){if(t===x.a.simple)return n.value;if(t===x.a.list||t===x.a.choice)return Array.isArray(n.value)?n.value[0]:n.value||"";return null}(a,t),o=e===O.list?C(r,c):c;const s=i(r);let l=!1,u=b(r)||"";Object(R.c)(s,u),n?(l=!!t.verification&&"1"==t.verification[0],l?I(s,c,o):_(s),A(r,l)):(l=!!o&&o.length>0,l?I(s,c,o):_(s),A(r,l))}var z=e(353);var N=e(342),q=e(371),F=e(340);var G=e(407);function H(t,n){Object(N.a)(t);Object(G.a)(t,n).forEach(t=>function(t){const n=t.$interaction,e=!!t.verification&&"1"==t.verification[0],c=Object(q.a)(n);Object(F.a)(c,e)}(t))}e(48);function J(t,n,e){return(n=function(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var c=e.call(t,n||"default");if("object"!=typeof c)return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.d(n,"default",(function(){return K}));class K{constructor(t){J(this,"$activity",void 0),J(this,"$locatingInteractionsSelector",void 0),J(this,"$selector",void 0),J(this,"$answerSelector",void 0),J(this,"$mask",void 0),E(this,t)}clearMarkedAnswers(){Object(N.a)(this.$locatingInteractionsSelector)}showAnswers(t,n){y(this.$locatingInteractionsSelector),function(t,n,e){Object(z.a)(t,n).forEach(t=>U(t,e))}(this.$locatingInteractionsSelector,t,n)}isComplete(){return function(t){let n=!0;return t.each((t,e)=>{let i=b(a()(e))||"";i=Object(c.O)(i),i.length<1&&(n=!1)}),n}(this.$locatingInteractionsSelector.filter(":not(.distractor)"))}getUserAnswers(){return this.$locatingInteractionsSelector.map((t,n)=>{const e=a()(n);let i=b(e);return i=Object(c.M)(i),e.hasClass("distractor")||(i=Object(c.O)(i)),{elm:Object(c.v)(e),type:x.a.simple,value:i}}).get()}showMarkedAnswers(t){y(this.$locatingInteractionsSelector),H(this.$locatingInteractionsSelector,t)}showUserAnswers(){y(this.$locatingInteractionsSelector),this.$locatingInteractionsSelector.each((t,n)=>{const e=a()(n),o=i(e),r=Object(R.b)(o),s=p(e);let l="";if(Object(c.y)(r))return _(o),void A(e,!1);s===O.list?l=C(e,r):s===O.typeIn&&(l=r),I(o,r,l),A(e,!0)})}close(){d(this.$activity).remove()}reset(){var t;y(this.$locatingInteractionsSelector),(t=this.$answerSelector).removeData("user-answer").removeData("chosen-answer").text("").hide().closest(".locating").find(".locatingItem").removeClass("answered locatingSelecting"),m(t)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfLocating.js.map