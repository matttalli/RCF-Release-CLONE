(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfSequenceTileMaze"],{455:function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function r(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.g.offsetWidth,n=t+100;return e.j.style.width=n+"px",e.i.scrollLeft=n,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function o(e,n){function r(){var e=o;i(e)&&null!==e.g.parentNode&&n(e.l)}var o=e;t(e.h,r),t(e.i,r),i(e)}function a(e,t,n){t=t||{},n=n||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=n}var c=null,s=null,l=null,h=null;function u(e){return null===h&&(h=!!e.document.fonts),h}function d(e,t){var n=e.style,r=e.weight;if(null===l){var i=document.createElement("div");try{i.style.font="condensed 100px sans-serif"}catch(e){}l=""!==i.style.font}return[n,r,l?e.stretch:"","100px",t].join(" ")}a.prototype.load=function(e,t){var i=this,a=e||"BESbswy",l=0,h=t||3e3,f=(new Date).getTime();return new Promise((function(e,t){if(u(i.context)&&!function(e){return null===s&&(u(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&603>parseInt(e[1],10)):s=!1),s}(i.context)){var p=new Promise((function(e,t){!function n(){(new Date).getTime()-f>=h?t(Error(h+"ms timeout exceeded")):i.context.document.fonts.load(d(i,'"'+i.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),m=new Promise((function(e,t){l=setTimeout((function(){t(Error(h+"ms timeout exceeded"))}),h)}));Promise.race([m,p]).then((function(){clearTimeout(l),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function s(){var t;(t=-1!=y&&-1!=b||-1!=y&&-1!=v||-1!=b&&-1!=v)&&((t=y!=b&&y!=v&&b!=v)||(null===c&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=c&&(y==w&&b==w&&v==w||y==g&&b==g&&v==g||y==x&&b==x&&v==x)),t=!t),t&&(null!==O.parentNode&&O.parentNode.removeChild(O),clearTimeout(l),e(i))}var u=new n(a),p=new n(a),m=new n(a),y=-1,b=-1,v=-1,w=-1,g=-1,x=-1,O=document.createElement("div");O.dir="ltr",r(u,d(i,"sans-serif")),r(p,d(i,"serif")),r(m,d(i,"monospace")),O.appendChild(u.g),O.appendChild(p.g),O.appendChild(m.g),i.context.document.body.appendChild(O),w=u.g.offsetWidth,g=p.g.offsetWidth,x=m.g.offsetWidth,function e(){if((new Date).getTime()-f>=h)null!==O.parentNode&&O.parentNode.removeChild(O),t(Error(h+"ms timeout exceeded"));else{var n=i.context.document.hidden;!0!==n&&void 0!==n||(y=u.g.offsetWidth,b=p.g.offsetWidth,v=m.g.offsetWidth,s()),l=setTimeout(e,50)}}(),o(u,(function(e){y=e,s()})),r(u,d(i,'"'+i.family+'",sans-serif')),o(p,(function(e){b=e,s()})),r(p,d(i,'"'+i.family+'",serif')),o(m,(function(e){v=e,s()})),r(m,d(i,'"'+i.family+'",monospace'))}))}))},e.exports=a}()},456:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(5),i=n.n(r);const o=()=>i()(".tileMazeCollection ul"),a=()=>i()(".itemsCollected ul"),c=()=>i()(".tileMazeCollection .itemCounter"),s=()=>i()(".collectionCounterValue")},510:function(e,t,n){"use strict";var r=n(19),i=n(66),o=n(26),a=[].push;r({target:"Iterator",proto:!0,real:!0,forced:!0},{toArray:function(){var e=[];return i(o(this),a,{that:e,IS_ITERATOR:!0}),e}})},537:function(e,t,n){"use strict";var r=n(5),i=n.n(r),o=n(456);t.a=()=>{let e=0;return Object(o.a)().each((function(){e+=parseFloat(i()(this).text())})),e}},539:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(334);const i=e=>{if(!e)return;const t=new r.Sprite(r.Loader.shared.resources[e].texture);return t.path=e,t}},575:function(e){e.exports=JSON.parse('{"frames":{"life":{"frame":{"x":0,"y":0,"w":40,"h":40},"anchor":{"x":0.5,"y":1}},"lost_life":{"frame":{"x":40,"y":0,"w":40,"h":40},"anchor":{"x":0.5,"y":1}},"horizontal_action_1":{"frame":{"x":0,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"horizontal_action_2":{"frame":{"x":150,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"horizontal_action_3":{"frame":{"x":300,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_1":{"frame":{"x":0,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_2":{"frame":{"x":150,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_3":{"frame":{"x":300,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"idle_1":{"frame":{"x":0,"y":440,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"idle_2":{"frame":{"x":150,"y":440,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_1":{"frame":{"x":0,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_2":{"frame":{"x":150,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"bounce_back":{"frame":{"x":300,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"start":{"frame":{"x":0,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"finish":{"frame":{"x":150,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"empty":{"frame":{"x":300,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_1":{"frame":{"x":0,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_2":{"frame":{"x":150,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_3":{"frame":{"x":300,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_1":{"frame":{"x":0,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_2":{"frame":{"x":150,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_3":{"frame":{"x":300,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_1":{"frame":{"x":0,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_2":{"frame":{"x":150,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_3":{"frame":{"x":300,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"transparent":{"frame":{"x":448,"y":0,"w":1,"h":1},"anchor":{"x":0.5,"y":1}}},"meta":{"app":"https://www.leshylabs.com/apps/sstool/","version":"Leshy SpriteSheet Tool v0.8.4","image":"spritesheet.png","size":{"w":450,"h":1340},"scale":1}}')},698:function(e,t,n){"use strict";n.r(t);n(25),n(31),n(6),n(11);var r=n(615),i=n(576),o=n(4),a=n(345),c=n(334),s=n(534),l=n(601),h=n(535);n(13),n(86);var u=e=>e.some(e=>e.steps.length-e.steps.filter(e=>"y"===e.optional).length<3);var d=e=>e.some(e=>e.steps.some(e=>e.correctItems.some(e=>e.correct&&""===e.value)));var f=e=>e.some(e=>e.steps.some(e=>0===e.correctItems.length));var p=(e,t)=>{let n="";u(e)&&(n+="Invalid path given, please include at least 3 non-optional steps\n"),d(e)&&(n+="Empty Correct answer given\n"),f(e)&&(n+="Step with no correct answers found\n"),n&&Object(a.n)(t,n)},m=n(96),y=n(577),b=n(578),v=n(579),w=n(468),g=n(536),x=n(620),O=n(454),j=n(8),I=(n(48),n(580)),_=n(581),E=n(457),T=n(538);n(32),n(15),n(16),n(33);var P=e=>{const t=e[e.length-1],n=t.value,r=t.stepIndex,i=t.correct?"correctItem":"distractor";return e.pop(),{label:n,stepIndex:r,type:i}};var C=e=>e[Object(o.t)(0,e.length)].value;function S(e,t,n,r){const i=r+n,a=i+1;if(Object(o.D)()<.05||i>=e.length)return P(t);{const{correctItems:n,incorrectItems:r}=e[i];return n.length>0&&r.length>0?Object(o.D)()<=.5?{label:C(n),type:"correctItem",stepIndex:a}:{label:C(r),type:"distractor",stepIndex:a}:n.length>0?{label:C(n),type:"correctItem",stepIndex:a}:r.length>0?{label:C(r),type:"distractor",stepIndex:a}:P(t)}}var k=(e,t,n,r,i,o)=>{const{label:a,type:c,stepIndex:s}=S(e,t,n,r),l=""!=a&&!!a;Object(E.a)(i[o.column][o.row],{used:!0,drawMe:l,label:a,type:c,associatedIndex:r,stepIndex:s})};function L(e,t,n,r,i){let a=t.slice(),c=[...n];t.forEach((s,l)=>{const h=Object(o.K)(a);let u=[];h.forEach(a=>{const s=Object(T.a)(e,a.position,r,i),{associatedIndex:h}=e[a.position.column][a.position.row];s.forEach(r=>{0===c.length&&(c=Object(o.K)([...n])),k(t,c,l,h,e,r),u.push(e[r.column][r.row])})}),a=u.slice()})}var M=n(582);n(172),n(173);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return Object(o.K)(t.concat(e.map((e,t)=>[...e.correctItems.map(e=>$($({},e),{},{stepIndex:t+1})),...e.incorrectItems])).flat())}var N=e=>e.filter(e=>"n"===e.optional||Math.random()<.5),W=n(628);function q(e){let{steps:t,distractors:n}=e,r=[[]],i=!1;const a=2*t.length,c=2*t.length;for(;!i;){const e=N(Object(o.e)(t)),s=A(e,n);r=Object(I.a)(a,c);const l=Object(_.a)(a,c);let h=l,u={column:0,row:0};Object(E.a)(r[l.column][l.row],{used:!0,drawMe:!0,type:"start",associatedIndex:0,stepIndex:0,path:!0});for(let t=0;t<e.length;t++){const n=Object(T.a)(r,h,a,c);u=n[Object(o.t)(0,n.length)];const{correctItems:s}=e[t],l=Object(o.t)(0,s.length);if(i=u,!i)break;Object(E.a)(r[u.column][u.row],{used:!0,drawMe:!0,label:s[l].value,type:"correctItem",associatedIndex:t+1,stepIndex:t+1,path:!0}),e[t].position=h,h=u}if(i){const t=Object(T.a)(r,u,a,c);u=t[Object(o.t)(0,t.length)],i=u,u&&(Object(E.a)(r[u.column][u.row],{used:!0,drawMe:!0,type:"finish",associatedIndex:e.length,stepIndex:e.length+1,path:!0}),L(r,e,s,a,c),Object(M.a)(r),Object(W.a)(r,s))}}return r}const K=e=>e.value.length>3;var B=e=>!e.steps.some(e=>e.correctItems.some(K))&&(!e.steps.some(e=>e.incorrectItems.some(K))&&!e.distractors.some(K));function R(e){return e.map(e=>({grid:q(e),id:e.id,isMathsGame:B(e)}))}var G=n(540),F=n(627);var Q=n(5),H=n.n(Q);var J=n(584),U=n(585);var V=async(e,t,n)=>{await e.playBounceBackAnimation(),await Object(U.a)(e,t,n)},X=n(586),Y=n(383);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=async(e,t,n,r,i)=>{const o=e.tileLocation,c=t.camera.tileLocation;if(!t.canMove||!Object(F.a)(o,c))return;t.stopAnimation();const s=o.column,l=o.row,h=n[c.column][c.row],u=n[s][l],{sprite:d,id:f}=h,{sprite:p,id:y}=u,b=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);if(await Object(G.a)(t,o),Object(J.b)(u))return m.a.log("incorrect !"),e.off("pointerup"),e.visible=!1,void await Object(X.a)(t,b,i);Object(J.f)(h,u)?Object(J.h)(r,y)?Object(J.e)(r,y)?(d&&(d.children[0].visible=!0),H()(".tileMazeCollection ul li:last-child").remove(),r.pop()):(await V(t,b,i),m.a.log("trying to step back too far")):(await V(t,b,i),m.a.log("trying to move backwards to a square that you have not visited")):Object(J.c)(u)||Object(J.d)(u)?Object(J.c)(u)&&(Object(J.g)(h,u)?(m.a.log("not finished yet"),await V(t,b,i)):(m.a.log("finished"),t.stopAnimation(),setTimeout(()=>i.trigger(Y.b.questionComplete),100))):Object(J.g)(h,u)?(m.a.log("trying to step forward too far"),await V(t,b,i)):(p&&(p.children[0].visible=!1),function(e){const t='<li class="collectionItem">'.concat(e.label,"</li>");Object(a.e)().append(t),e.showing=!1}(u),r.push(f))};n(510);var ne=()=>Object(a.e)().find("li").toArray().map(e=>e.innerHTML).join(" "),re=n(621),ie=n(151),oe=n(393),ae=n(423);function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return se}));class se{constructor(e){ce(this,"game",void 0),ce(this,"$activity",void 0),ce(this,"$selector",void 0),ce(this,"data",void 0),ce(this,"viewport",void 0),ce(this,"state",void 0),this.$activity=e,this.$selector=e.find("*[data-rcfinteraction='sequenceTileMaze']").first()}async initialise(){this.data=Object(i.a)(this.$selector),this.state=new x.a(this.data,R,te,ne),p(this.data.questions,this.$activity);const e=Object(o.e)(this.data),t=Object(a.h)(this.$activity),n=t[0].clientWidth,c=Object(y.a)(t);this.game=Object(b.a)(n,c,t),t.append(this.game.view),this.viewport=Object(v.a)(this.game,n,c),this.game.stage.addChild(this.viewport);try{await Object(re.a)(e),await Object(r.a)(this.$activity,this.state,e,this.game,this.viewport)}catch(e){Object(a.n)(this.$activity,e)}}showAnswers(e){Object(oe.a)(this.$selector,e,!1,e=>{Object(ae.c)(this.$selector,e)})}getUserAnswers(){const e=Object(ae.b)(this.$selector);return e?[e]:[{elm:Object(o.v)(this.$selector)||"",markType:j.d.unmarked,markedBy:j.c.nobody,type:j.a.gameSequenceTileMaze,ignoreNextAnswer:"y",value:{completion:Object(g.a)(this.$selector),livesLeft:this.state.lives,correct:this.state.numberCorrect,outOf:this.state.numberOfQuestionsInGame,timeTaken:this.state.gameDuration}}]}close(){Object(ie.a)("tileMaze"),w.b(),c.Loader.shared.reset(),c.Loader.shared.destroy(),c.utils.clearTextureCache(),c.utils.destroyTextureCache(),this.viewport.destroy(),this.game.stage.removeChildren(),this.game.destroy(),Object(l.a)(this.$activity)}reset(){m.a.log("reset game"),this.state.initialiseStateForNewGame(O.a.resetQuestions),Object(s.a)(this.viewport),Object(h.a)(this.$activity)}pause(){}resume(){}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfSequenceTileMaze.js.map