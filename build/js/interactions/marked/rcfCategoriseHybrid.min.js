(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfCategoriseHybrid"],{335:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(25);var n=r(339);function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(e,t){c(this,"$activity",void 0),c(this,"$selector",void 0),c(this,"interactionFunctions",void 0),this.$activity=e,this.interactionFunctions=t}clearMarkedAnswers(){Object(n.a)(this.$selector)}getUserAnswers(e){return Object(n.b)(this,this.interactionFunctions.getUserAnswer,e)}isComplete(e){return Object(n.c)(this,this.interactionFunctions.isComplete,e)}showAnswers(e,t,r){Object(n.d)(this,e,t,this.interactionFunctions.showAnswer,r)}showMarkedAnswers(e,t){Object(n.e)(this,e,this.interactionFunctions.showMarkedAnswer,t)}showUserAnswers(e){Object(n.f)(this,this.interactionFunctions.showAnswer,e)}reset(){this.interactionFunctions.reset(this.$selector)}}},337:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(6),r(13);var n=r(5),c=r.n(n),a=r(4);function i(e,t){return Object(a.y)(t)?c()([]):e.filter((e,r)=>{let n=c()(r).closest(".itemBasedQuestion");return Object(a.v)(n)===t})}},685:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"showAnswer",(function(){return T})),r.d(n,"showMarkedAnswer",(function(){return x})),r.d(n,"getUserAnswer",(function(){return D})),r.d(n,"isComplete",(function(){return P})),r.d(n,"reset",(function(){return R}));r(25),r(6),r(15),r(16);var c=r(149),a=r(4);r(11);var i=r(5),o=r.n(i),s=r(10);function d(e){return!Object(a.y)(e.closest(".category"))}function u(e,t){const r=e.find("li[data-rcfid='".concat(t,"']"));return!Object(a.y)(r)}var l=r(347);var b=r(17);var f=r(99),v=r(29),g=r(156),O=r(554),j=r(518),m=r(420);function p(e){const t=Object(m.a)(e);try{t.draggable("destroy")}catch(e){}}var y=r(365),h=r(369),w=r(392);var C=r(418),k=r(350),A=r(404);function F(e,t,r,n){const c=Object(a.v)(t)||"",i=Object(k.a)(t),m=d(t);if(Object(a.y)(c))return!1;if(u(e,c))return!1;let F=o()("");if(i?F=t:m&&(F=r.getWordItem(c)),Object(a.y)(F))return!1;const S=Object(a.i)(e),T=Object(A.a)(S);Object(l.a)(F);const I=function(e){const t=e.clone();return t.removeClass("dragged"),t.removeClass("active"),t.removeAttr("data-restrictcount data-displaycount"),t}(t),$=Object(b.a)(e,"data-categoryid")||"",x=Object(C.a)(t),W=Object(a.v)(x)||"";return function(e,t){e.find("ul").append(t)}(e,I),m&&n&&Object(f.c)(t,"remove-me",!0),m&&!n&&(p(t),t.remove()),T&&function(e){const t=e,r=Object(v.a)(),n=e.closest('[data-rcfinteraction="categorise"]');t.draggable({scroll:!0,scrollSensitivity:r.draggingScrollSensitivity,scrollSpeed:10,cursor:"pointer",hoverClass:"dragOverDrop",helper:t=>{const r=o()(t.currentTarget);Object(g.a)(r);const n=Object(a.v)(r)||"",c=Object(O.a)(r);return e.addClass("dragged"),Object(b.c)(c,"id",n+"_clone"),Object(y.a)(c.find(".mark")),c},start:()=>{Object(h.a)(t,!0),Object(w.a)(t,!0);const r=Object(b.a)(e,"data-audiolink");Object(a.y)(r)||e.trigger("rcf.play.audio",[r])},stop:()=>{Object(j.a)(e)||e.removeClass("dragged"),Object(f.a)(e,"remove-me")&&(Object(f.b)(e,"remove-me"),p(e),e.remove()),Object(h.a)(n,!1),Object(w.a)(n,!1),setTimeout(()=>{s.b(s.a.updateCategoriesSize,n)},50)}})}(I),setTimeout(()=>{s.b(s.a.updateCategoriesSize,x)},50),e.trigger(s.a.categoriseAnswerChanged,[W,$,c]),!0}var S=r(338);var T=(e,t)=>{const{$interaction:r}=e,n=Object(c.a)(r);e.value.forEach(e=>{!function(e,t,r,n){const c=function(e,t){return e.find(".category[data-rcfid='".concat(t,"']"))}(e,t.elm);if(Object(a.y)(c))return;t.value.forEach((e,a)=>{const i=r.getWordItem(e);(n&&Object(S.a)(t,a)||!n)&&(F(c,i,r,!1),r.removeWordItem(i))})}(r,e,n,t)})},I=r(340);var $=(e,t,r)=>{const n=e.find(".dragItem[data-rcfid='".concat(t,"']"));Object(a.y)(n)||Object(I.a)(n,r)};var x=e=>{const t=e.$interaction;e.value.forEach(e=>{const r=e.elm,n=t.find(".category[data-rcfid='".concat(r,"']"));Object(a.y)(n)||e.value.forEach((t,r)=>{const c=!!e.verification&&"1"==e.verification[r];$(n,t,c)})})};r(48);function W(e){return e.find("li:not(.example)").map((e,t)=>Object(a.v)(o()(t))).get()}var E=r(8);function H(e){return e.map((e,t)=>function(e){return{elm:Object(a.v)(e),type:E.a.list,value:W(e)}}(o()(t))).get()}function D(e){const t=e.find(".category");return{elm:Object(a.v)(e)||"",type:E.a.composite,value:H(t)}}var P=e=>{const t=e.find(".category li:not(.example)");return!Object(a.y)(t)},z=r(336);function R(e){const t=e.find(".category li:not(.example)"),r=e.find(".category");Object(c.a)(e).reset(),t.remove(),r.css("height",""),Object(z.a)(e),s.b("update.categories.size")}var B=r(408);function M(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=Object(a.v)(e)||"";if(Object(g.a)(e),!d(e))return;const c=t.getWordItem(n);if(Object(a.y)(c))return;const i=e.closest('[data-rcfinteraction="categorise"]');t.addWordItem(c),t.makeItemActiveIfNoneAlreadyActive(c),r?(Object(l.a)(e),Object(f.c)(e,"remove-me",!0)):(p(e),e.remove(),setTimeout(()=>{s.b(s.a.updateCategoriesSize,i)},50))}function N(e,t){const r=t.getWordItems();Object(B.a)(r,t),function(e){const t=e.$wordBox,r=Object(C.a)(t),n=Object(a.v)(r);t.droppable({cursor:"pointer",tolerance:"intersect",hoverClass:"dragOverDrop",accept:e=>{const t=Object(C.a)(e),r=Object(a.v)(t);return n===r&&!Object(k.a)(e)},drop:(t,r)=>{M(r.draggable,e,!0)}})}(t),function(e){const t=e.$wordBox,r=Object(C.a)(t),n=r.find(".category .dropTarget"),c=Object(a.v)(r)||"";n.droppable({hoverClass:"dragOverDrop",revert:"invalid",greedy:"true",tolerance:"pointer",accept:function(e){const t=o()(this),r=Object(a.v)(e)||"",n=Object(C.a)(e),i=Object(a.v)(n);return c===i&&!u(t,r)},drop:function(t,r){const n=r.draggable;return F(o()(this),n,e,!0)}})}(t)}var U=r(555),_=r(559);function Q(e,t){const r=t.$wordBox,n=e,c=e.find(".category .dropTarget.rcfDroppable");r.on("click",e=>{e.originalEvent&&e.originalEvent.rcfHandled||function(e,t){let r=e.find(".dev-droppable.selected");Object(a.y)(r)||M(r,t,!1)}(n,t)}),r.on("click",".clickAndStickable:not(.example,.selected)",e=>{const r=o()(e.currentTarget);r.hasClass("ui-draggable-draggable")||(Object(U.a)(r,c,t),e.originalEvent&&(e.originalEvent.rcfHandled=!0))}),Object(_.a)(r)}var q=r(474);function G(e){return e.find(".clickAndStickable.selected")}var J=r(179),K=r(175);var L=e=>{e.toggleClass("selected",!Object(K.a)(e)),Object(J.a)(e)};function V(e,t){Q(e,t),function(e,t){e.on("click",".rcfDroppable.clickAndStickable [data-audiolink]:not(.inlinePlayerContainer)",(function(){Object(q.a)(o()(this))})),e.on("click",".rcfDroppable.clickAndStickable .inlinePlayerContainer[data-audiolink]",(function(e){Object(q.a)(o()(this)),Object(a.F)(e)})),e.on("click",".rcfDroppable.dropTarget li.clickAndStickable",t=>{const r=G(e),n=o()(t.currentTarget);Object(a.v)(r)!==Object(a.v)(n)&&Object(g.a)(r),L(n),Object(a.F)(t)}),e.on("click",".rcfDroppable.dropTarget",r=>{const n=o()(r.currentTarget),c=G(e);Object(a.y)(c)||(Object(g.a)(c),F(n,c,t,!1)&&Object(k.a)(c)&&(t.removeWordItem(c),t.setNextWordItemActive(c)),Object(a.F)(r))})}(e,t)}var X=r(174);var Y=r(401);function Z(e,t){const r=Object(c.a)(t),n=Object(A.a)(e),a=Object(X.a)(e);r.randomizeItems(),a?(N(0,r),V(t,r)):n?N(0,r):V(t,r),!a&&function(e){return e.hasClass("mobile")}(t)&&function(e){const t=e.find(".category:even"),r=e.find(".category:odd");t.addClass("leftCategory"),r.addClass("rightCategory"),t.each((e,t)=>{const r=o()(t);r.next(".category").add(r).wrapAll("<div class='mobileCategoryContainer'>")})}(t);const i=r.getWordItems();Object(Y.a)(t,i)}var ee=r(520);var te=r(151);function re(e,t){const r=function(e){return e.find("[data-rcfinteraction='categorise'].categorise.dev-hybrid")}(t);r.each((e,r)=>{const n=o()(r);Z(t,n)}),function(e){e.on("rcf.single.answer",'.categorise.dev-hybrid[data-rcfinteraction="categorise"]:not(.example)',(function(e,t,r){const n=o()(e.currentTarget);if(t.elm!=Object(a.v)(n))return;const c=Object(ee.a)(n,t,r);T(c,!1)}))}(t),function(e){e.on(s.a.categoriseAnswerChanged,(t,r,n,c)=>{const i=Object(v.a)();if(!i.feedbackOptions)return;const o=Object(b.a)(e,"id")||"",s=i.feedbackOptions?i.feedbackOptions.onAnswerChanged:null;Object(a.y)(s)||"function"!=typeof s||s({activity_id:o,id:o,answers:[{elm:r,type:E.a.composite,value:[{elm:n,type:E.a.list,value:[c]}]}]})})}(t),e.$selector=r,e.$activity=t;const n=t.attr("id");Object(te.b)("categorise-".concat(n),()=>{setTimeout(()=>{s.b(s.a.updateCategoriesSize)},50)}),s.b(s.a.updateCategoriesSize)}r(13);const ne=(e,t)=>{const r=Object(c.a)(e),n=Object(a.v)(t)||"";r.addWordItem(r.getWordItem(n)),t.remove()};var ce=r(335);function ae(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"default",(function(){return ie}));class ie extends ce.a{constructor(e){super(e,n),ae(this,"$selector",void 0),ae(this,"$activity",void 0),ae(this,"isComplex",void 0),re(this,e)}provideFeedback(e){!function(e,t){const r=t.answers[0].elm,n=e.filter("[data-rcfid='".concat(r,"']"));if(Object(a.y)(n))return;const c=t.answers[0].value[0].elm,i=t.answers[0].value[0].value[0],o="1"==t.answers[0].value[0].verification[0],s=n.find(".category[data-rcfid='".concat(c,"'] li.dragItem[data-rcfid='").concat(i,"']"));window.RCF&&window.RCF.Handlers&&window.RCF.Handlers.FeedbackHandler&&window.RCF.Handlers.FeedbackHandler.provideFeedback&&RCF.Handlers.FeedbackHandler.provideFeedback(n,s,o,ne)}(this.$selector,e)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfCategoriseHybrid.js.map