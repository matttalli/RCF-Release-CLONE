(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfListenAndColour"],{694:function(t,e,n){"use strict";n.r(e);n(25),n(31),n(6),n(11);var r=n(5),c=n.n(r),a=(n(102),n(13),n(15),n(16),n(4));n(170),n(171),n(59),n(100);function o(t){return t[0].getAttribute("class")||""}function i(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(o(t))}function s(t,e){!i(t,e)&&t[0].setAttribute("class",(o(t)&&o(t)+" ")+e)}var l=n(17);function u(t){return(Object(l.a)(t,"data-svgElements")||"").trim().split(" ")}function f(t,e){return t.filter(".listenAndColour[data-rcfid=".concat(e,"]"))}function v(t){return t.find(".listenAndColourPalette li.colourPaletteItem:not(.eraser)")}function d(t){return t.find("svg")}function m(t){const e=v(t),n=d(t);e.filter("[data-svgExampleElements]").each((t,e)=>{const r=c()(e),o=function(t){let e=Object(l.a)(t,"data-svgExampleElements")||"";if(Object(a.y)(e))return[];return e.trim().split(" ")}(r),i=Object(l.a)(r,"data-colourvalue")||"";Object(a.y)(i)||o.forEach(t=>{s(n.find("#".concat(t))," example ".concat(i," "))})})}var b=n(571);var h=t=>{t.addClass("selected"),t.siblings().removeClass("selected")};var y=t=>{t.on("click",".colourPaletteItem",t=>{const e=c()(t.currentTarget);h(e)})};n(86);var j=(t,e)=>d(t).find("#".concat(e));var w=(t,e)=>{t.attr("class","clickableElement ".concat(e))};var O=(t,e,n)=>{const r=d(t);Object(a.y)(r)||e.value.some(e=>{const r=e.elm;if(r===n){const n=function(t,e){return t.find("li[data-colourvalue=".concat(e,"]"))}(t,r);return!Object(a.y)(n)&&(h(n),e.value.forEach(e=>{const n=j(t,e);w(n,r)}),!0)}return!1})};var p=t=>{t.on("rcf.single.answer",".listenAndColour",(t,e,n)=>{const r=c()(t.currentTarget);O(r,e,n)})};var g=t=>{const e=function(t){const e=function(t){return t.find(".listenAndColourPalette")}(t).find(".selected");return Object(l.a)(e,"data-colourvalue")||""}(t.closest(".listenAndColour"));w(t,e)};var E=t=>{const e=u(t),n=d(t);e.forEach(t=>{s(n.find("#".concat(t))," clickableElement")}),t.on("click",".clickableElement:not(.example)",t=>{g(c()(t.currentTarget))})};var $=(t,e)=>{y(t),p(t),e.each((t,e)=>{const n=c()(e);E(n)})},C=n(573),k=n(624);var A=async(t,e)=>{if(t.$activity=e,t.$selector=e.find(".listenAndColour"),Object(b.a)(e))try{await Object(C.a)(e),Object(k.a)(t.$selector)}catch(t){throw console.error(t),new Error(t)}t.$selector.each((t,e)=>{m(c()(e))}),$(t.$activity,t.$selector)};n(48);var T=(t,e,n)=>{const r=e.elm,c=e.value.map(e=>t.find("#".concat(e)));if(Object(a.y)(c.length))return;const o=!n||n&&"1"==e.verification[0]?r:"";c.forEach(t=>{w(t,o)})};var x=(t,e,n)=>{const r=e.elm;if(Object(a.y)(r))return;const c=t.filter("[data-rcfid=".concat(r,"]"));if(Object(a.y)(c))return;const o=d(c);e.value.forEach(t=>T(o,t,n))};var P=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.answers.forEach(e=>{x(t,e,n)})},I=n(336);var L=t=>{let e=[];t.each((t,n)=>{const r=c()(n),a=Object(I.b)(r);e=e.concat(a)});const n=Object(a.i)(t),r=Object(l.a)(n,"id");P(t,{elm:r,answers:e})},R=n(342);var M=(t,e)=>{for(var n in Object(R.a)(t),e.answers){const c=e.answers[n],o=c.elm;if(Object(a.y)(o))continue;const i=f(t,o);if(Object(a.y)(i))continue;const s=d(i),l=v(i);for(var r in c.value){const t=c.value[r],e=t.elm,n=l.filter("[data-colourValue=".concat(e,"]")),o=s.find(".".concat(e,":not(.example)")).length>0;if(Object(a.y)(n))continue;if(n.hasClass("distractor")){t.value.length>0&&n.find(".mark").addClass("wrong");continue}if(!o)continue;const i="0"==t.verification[0]?"wrong":"correct";n.find(".mark").addClass(i)}}},S=n(8);var U=t=>t.map((t,e)=>{const n=c()(e),r=Object(a.v)(n)||"",o=v(n),i=d(n);return{elm:r,type:S.a.composite,markType:S.d.byItem,value:o.map((t,e)=>{const n=c()(e),r=Object(l.a)(n,"data-colourvalue")||"";return{elm:r,type:S.a.list,markType:S.d.byList,value:i.find(".".concat(r,":not(.example)")).map((function(){return c()(this)[0].id})).get()}}).get()}}).get();var _=t=>{let e=!1;return t.each((t,n)=>{const r=c()(n),o=u(r),i=d(r);o.forEach(t=>{const n=i.find("#".concat(t));if(!Object(a.y)(n)){const t=n.attr("class");Object(a.y)(t)||"clickableelement"===t.trim().toLowerCase()||(e=!0)}})}),e};var N=t=>{t.each((t,e)=>{const n=c()(e),r=U(n);I.c(n,r)})};var V=t=>{t.each((t,e)=>{!function(t){const e=v(t),n=u(t),r=d(t);e.removeClass("selected"),n.forEach(t=>{r.find("#".concat(t)).attr("class","clickableElement")})}(c()(e))})};var q=t=>{V(t)};function z(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"default",(function(){return B}));class B{constructor(t){z(this,"$activity",void 0),z(this,"$selector",void 0),this.$activity=t}async initialise(){await A(this,this.$activity)}clearMarkedAnswers(){Object(R.a)(this.$selector)}showAnswers(t,e){N(this.$selector),e||q(this.$selector),P(this.$selector,t,e)}isComplete(){return _(this.$selector)}getUserAnswers(){return U(this.$selector)}showMarkedAnswers(t){M(this.$selector,t)}showUserAnswers(){L(this.$selector)}reset(){q(this.$selector)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfListenAndColour.js.map