(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfRotatingMatching"],{335:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(25);var a=n(339);function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class s{constructor(t,e){r(this,"$activity",void 0),r(this,"$selector",void 0),r(this,"interactionFunctions",void 0),this.$activity=t,this.interactionFunctions=e}clearMarkedAnswers(){Object(a.a)(this.$selector)}getUserAnswers(t){return Object(a.b)(this,this.interactionFunctions.getUserAnswer,t)}isComplete(t){return Object(a.c)(this,this.interactionFunctions.isComplete,t)}showAnswers(t,e,n){Object(a.d)(this,t,e,this.interactionFunctions.showAnswer,n)}showMarkedAnswers(t,e){Object(a.e)(this,t,this.interactionFunctions.showMarkedAnswer,e)}showUserAnswers(t){Object(a.f)(this,this.interactionFunctions.showAnswer,t)}reset(){this.interactionFunctions.reset(this.$selector)}}},337:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6),n(13);var a=n(5),r=n.n(a),s=n(4);function c(t,e){return Object(s.y)(e)?r()([]):t.filter((t,n)=>{let a=r()(n).closest(".itemBasedQuestion");return Object(s.v)(a)===e})}},674:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"showAnswer",(function(){return et})),n.d(a,"showMarkedAnswer",(function(){return st})),n.d(a,"getUserAnswer",(function(){return dt})),n.d(a,"isComplete",(function(){return ft})),n.d(a,"reset",(function(){return kt}));n(6),n(13);var r=n(338);var s=(t,e)=>t.filter(t=>{const{value:n}=t;return!(Array.isArray(n)&&n.length<1)&&(!("string"==typeof n&&n.length<1)&&(!e||Object(r.a)(t)))});n(11);var c=t=>{const e=t.closest(".flickity-enabled");return window.Flickity.data(e[0])},i=(n(15),n(16),n(5)),o=n.n(i);const l={draggable:">1",pageDots:!1,prevNextButtons:!1,wrapAround:!1,cellAlign:"center"},d={draggable:!1,pageDots:!1,prevNextButtons:!1,wrapAround:!1,cellAlign:"center"};var f=t=>t.find(".custom-prev-next-button");var v=t=>{const e=o()(t.element);f(e).each((t,e)=>{o()(e).attr("disabled","")})};n(32),n(33);var m=t=>{for(let e of t.element.children)if(e.hasAttribute("data-rcfid"))return e.getAttribute("data-rcfid")};var h=(t,e)=>{for(const[n,a]of t.cells.entries())if(m(a)===e)return a.index=n,a};var u=(t,e)=>void 0!==h(t,e),g=n(76),p=n.n(g);var b=t=>{p()(t,{attr:"data-sortindex",order:"asc"})};var C=(t,e)=>{t.element.classList.remove("hidden"),e.append(t.element);const n=e.getCellElements();b(n),e.reloadCells()};n(25);var w=(t,e,n)=>{const a=h(t,e);if(void 0===a)throw new Error("selectFlickityCell cannot find the cell with id ".concat(e));const r=a.index,s=void 0===n||n;t.select(r,!0,s)},M=n(17);var y=t=>{const e=(t instanceof Element?o()(t):t).closest(".rotatingMatchingContainer");return Object(M.a)(e,"data-rcfid")||"undefined"};let x={};const L=t=>{const e=y(t);return x[e]};var A=(t,e)=>{if(u(t,e))w(t,e);else{const n=L(t.$element);for(const a of n)m(a)===e&&(C(a,t),w(t,e))}};let k={};const $=t=>{const e=y(t);return k[e]},O=t=>{const e=y(t.$element);return k[e]=t,k[e]};var j=t=>{const e=o()(t.element);f(e).each((t,e)=>{o()(e).removeAttr("disabled")})};var T=t=>t.cells.length<2;var I=t=>{let e=!0;return f(o()(t.element)).each((t,n)=>{o()(n).attr("disabled")&&(e=!1)}),e};var E=t=>0===t.selectedIndex;var P=t=>t.selectedIndex===t.cells.length-1;var F=t=>{const e=f(t.$element),n=e.first(),a=e.last();E(t)&&P(t)?e.removeClass("extremity-selected"):E(t)?(n.addClass("extremity-selected"),a.removeClass("extremity-selected")):P(t)?(a.addClass("extremity-selected"),n.removeClass("extremity-selected")):e.hasClass("extremity-selected")&&e.removeClass("extremity-selected")};var B=t=>{T(t)?I(t)&&v(t):I(t)||j(t),F(t)};var N=(t,e,n)=>{t.on("click",()=>{n.previous(!0)}),e.on("click",()=>{n.next(!0)})};var Z=t=>{t.find(".flickity-enabled").addBack(".flickity-enabled").each((t,e)=>{const n=o()(e),a=c(n),r=o()('<button class="flickity-button flickity-prev-next-button custom-prev-next-button previous" type="button" data-rcfTranslate="" aria-label="[ components.button.previous ]"><svg class="flickity-button-icon" viewBox="0 0 110 100"><title>Previous</title><path d="M 10, 50 L 60, 100 L 70, 90 L 30, 50 L 70, 10 L 60, 0 Z" class="arrow" transform="translate(5)"/><g class="return-arrow"><path d="M 00, 50 L 50, 100 L 60, 90 L 20, 50 L 60, 10 L 50, 0 Z" class="return-arrow"/><path d="M 00, 50 L 50, 100 L 60, 90 L 20, 50 L 60, 10 L 50, 0 Z" class="return-arrow" transform="translate(45)"/></g></svg></button>'),s=o()('<button class="flickity-button flickity-prev-next-button custom-prev-next-button next" type="button" data-rcfTranslate="" aria-label="[ components.button.next ]"><svg class="flickity-button-icon" viewBox="0 0 100 100"><title>Next</title><path d="M 10, 50 L 60, 100 L 70, 90 L 30, 50 L 70, 10 L 60, 0 Z" class="arrow" transform="translate(105, 100) rotate(180)"/><g class="return-arrow" transform="translate(100, 100) rotate(180)"><path d="M 00, 50 L 50, 100 L 60, 90 L 20, 50 L 60, 10 L 50, 0 Z" class="return-arrow"/><path d="M 00, 50 L 50, 100 L 60, 90 L 20, 50 L 60, 10 L 50, 0 Z" class="return-arrow" transform="translate(45)"/></g></svg></button>');n.append(r,s),N(r,s,a),B(a)})};var S=t=>{t.$element.addClass("disabled"),t.$element.attr("disabled","disabled");const e=o()(t.selectedElement).children().last().attr("data-rcfid");f(t.$element).remove(),t.destroy(),t.$element.flickity(d);const n=t.$element.data("flickity");A(n,e),O(n),Z(n.$element),v(n)};var R=t=>!c(t);var U=(t,e)=>{const n=t.attr("data-rcfid"),a=e.attr("data-rcfid");t.parent().addClass("connected"),e.parent().addClass("connected"),t.parent().attr("data-connectedtarget",a),e.parent().attr("data-connecteditem",n);const r=c(e);t.hasClass("example")||R(e)||r.$element.hasClass("disabled")||S(r)};var z=t=>{const e=t.cells[0].element,n=L(e);if(n)for(const e of n){e.element.classList.contains("hidden")&&C(e,t)}};var D=(t,e)=>t.find("[data-rcfid='".concat(e,"']"));var G=(t,e,n)=>{t.forEach(t=>{e.find(".matchItemContainer.is-selected").hasClass("example")||z(n);const{elm:a,value:r}=t,s=D(e,r),c=D(e,a);U(s,c)})};var J=t=>t.find(".rotatingMatchItemContainer:not(.connected) .rotatingMatchItem");var _=t=>t.find(".rotatingMatchItemContainer.is-selected .rotatingMatchItem");var q=(t,e,n)=>{const a=t.find(".rotatingMatchItemContainer:not(.connected) .rotatingMatchItem"),r=void 0===n||n;if(a.length>0){const n=a.first().attr("data-rcfid");if(1===a.length)w(e,n,r);else{const s=_(t).parent().attr("data-sortindex");let c="";a.each((t,e)=>{const n=o()(e).parent().attr("data-sortindex");if(s<n)return c=o()(e).attr("data-rcfid"),!1}),w(e,""!==c?c:n,r)}}};var Q=(t,e)=>{const n=e.find(".rotatingMatchItem"),a=c(n);G(t,e,$(e));if(J(e).length>0)q(e,a);else{const t=n.last().attr("data-rcfid");w(a,t),S($(e))}};var H=t=>{t.on("change",()=>{F(t)})};var K=t=>{if(t.$element.hasClass("disabled")){t.$element.removeClass("disabled"),t.$element.removeAttr("disabled");const e=o()(t.selectedElement).children().last().attr("data-rcfid");f(t.$element).remove(),t.destroy(),t.$element.flickity(l);const n=t.$element.data("flickity");O(n),H(n),A(n,e),Z(n.$element)}};var V=(t,e,n)=>{const a=o()('<div class="rotatingMatchPair"></div>'),r=D(t,e).parent(),s=D(t,n).parent();return r.hasClass("example")&&a.addClass("example"),a.append(r),a.append(s),a};var W=(t,e,n)=>{t.each((t,a)=>{const r=o()(a),s=Object(M.a)(r,"data-rcfid"),c=Object(M.a)(r.parent(),"data-connectedtarget");V(e,s,c).appendTo(n)}),n.appendTo(e)};var X=t=>t.find(".rotatingMatchPairContainer").length>0;var Y=(t,e)=>{const n=X(t)?t.find(".rotatingMatchPairContainer"):o()('<div class="rotatingMatchPairContainer"></div>');if(e.length>1){const e=t.find(".rotatingMatchItemContainer .rotatingMatchItem");W(e,t,n)}else{if(0==t.find(".rotatingMatchPair.example").length){const e=t.find(".rotatingMatchItem.example");W(e,t,n)}e.forEach(e=>{const a=e.value,r=e.elm,s=D(t,a),c=D(t,r);U(s,c);V(t,a,r).appendTo(n)})}return n};var tt=(t,e)=>{const n=e.find(".rotatingMatchItem"),a=c(n);e.addClass("showingAnswers"),G(t,e,$(e)),z($(e)),K($(e)),a.destroy(),$(e).destroy(),f(e).remove(),Y(e,t)};var et=(t,e)=>{const n=t.$interaction,a=s(t.value,e);e?Q(a,n):tt(a,n)},nt=n(340);var at=(t,e)=>{e.value.forEach(e=>{if(Object(r.a)(e)){const n=t.find("[data-rcfid='".concat(e.elm,"']")).closest(".rotatingMatchPair");Object(nt.a)(n,!0)}}),t.each((t,e)=>{const n=o()(e);n.hasClass("correctAnswer")||n.hasClass("example")||Object(nt.a)(n,!1)})};var rt=t=>t.find(".rotatingMatchTargetContainer.is-selected .rotatingMatchTarget");var st=t=>{const e=t.$interaction;if(e.addClass("markedAnswers"),e.hasClass("showingAnswers")){const n=e.find(".rotatingMatchPairContainer");at(n.first().children(),t)}else{const n=_(e),a=rt(e),r=c(n),s=c(a);z(s),r.destroy(),s.destroy(),f(e).remove();const i=Y(e,t.value);at(i.children(),t)}},ct=n(4),it=(n(48),n(8));var ot=t=>{const e=t.find(".rotatingMatchTarget"),n=Object(M.a)(t,"data-connecteditem");return{elm:Object(ct.v)(e)||"",type:it.a.simple,value:n||""}};var lt=t=>L(t).filter(t=>!t.element.classList.contains("example")).map(t=>ot(o()(t.element)));var dt=t=>({elm:Object(ct.v)(t)||"",type:it.a.composite,markType:it.d.byItem,value:lt(t)});var ft=t=>{let e=!1;return t.find(".rotatingMatchItemContainer:not(.example)").each((t,n)=>{let a=Object(M.a)(o()(n),"data-connectedtarget");a&&a.length>0&&(e=!0)}),e};var vt=t=>{t.find("button.connect").attr("disabled","")};var mt=t=>{const e=t.getCellElements();for(let n of e)n.classList.contains("connected")&&(n.classList.add("hidden"),t.remove(n))};const ht=t=>{t.find("button.connect").addClass("connected")},ut=t=>{t.find("button.connect").removeClass("connected")};var gt=t=>{const e=t.find(".rotatingMatchTargets .rotatingMatchTarget.example");if(e.length>0){const n=$(t);let a=!1;e.each((e,r)=>{const s=o()(r),c=s.attr("data-matchitem-rcfid"),i=t.find("[data-rcfid='".concat(c,"']"));if(U(i,s),i.parent().hasClass("is-selected")){a=!0;const e=s.attr("data-rcfid");A(n,e),vt(t),v(n),ht(t)}}),a&&!n.$element.hasClass("disabled")?S(n):a||mt(n)}},pt=n(553);var bt=t=>{const{Flickity:e}=window;return new e(t[0],l)};var Ct=t=>{const e=t.cells[0].element,n=L(e);for(const e of n){const n=e.element.classList.contains("hidden"),a=!e.element.classList.contains("connected");n&&a&&C(e,t)}};var wt=t=>!!t.find("button.connect").attr("disabled");var Mt=t=>{t.find("button.connect").removeAttr("disabled")};var yt=(t,e)=>{e.selectedElement.classList.contains("example")&&!wt(t)?vt(t):!e.selectedElement.classList.contains("example")&&wt(t)&&Mt(t),e.selectedElement.classList.contains("connected")?(mt($(t)),A($(t),e.selectedElement.getAttribute("data-connectedtarget")),$(t).$element.hasClass("disabled")||S($(t)),ht(t)):(Ct($(t)),mt($(t)),K($(t)),ut(t)),$(t).reloadCells(),F(e),B($(t))};var xt=(t,e,n)=>{e.on("change",()=>{yt(t,e)}),H(n)};var Lt=t=>{const e=t.find(".rotatingMatchItems"),n=t.find(".rotatingMatchTargets"),a=t.find(".rotatingMatchItemContainer"),r=t.find(".rotatingMatchTargetContainer");if(t.hasClass("markedAnswers")||t.hasClass("showingAnswers")){const s=t.find(".rotatingMatchPair");s.each((t,e)=>{Object(pt.a)(o()(e))}),e.append(a),n.append(r),s.parent().remove(),b(r),t.removeClass("markedAnswers"),t.removeClass("showingAnswers");const c=bt(e),i=bt(n);O(i),Z(t),xt(t,c,i)}};var At=(t,e)=>{if(t.removeClass("connected"),e.removeClass("connected"),t.removeAttr("data-connectedtarget"),e.removeAttr("data-connecteditem"),1===e.length){const t=c(e);K(t)}};var kt=t=>{t.each((t,e)=>{const n=o()(e);if(!n.hasClass("markedAnswers")&&!n.hasClass("showingAnswers")){const t=n.find(".rotatingMatchTargetContainer.is-selected .rotatingMatchTarget"),e=c(t);z(e)}const a=n.find(".rotatingMatchItemContainer"),r=n.find(".rotatingMatchTargetContainer");Lt(n),z(c(r)),At(a,r),b(a.get()),b(r.get());const s=c(a),i=c(r);s.reloadCells(),i.reloadCells(),s.select(0),i.select(0),gt(n)})};var $t=(t,e)=>t.parent().hasClass("connected")&&e.parent().hasClass("connected");var Ot=t=>{const e=_(t),n=rt(t),a=c(e),r=c(n),s=!!document.querySelector("script[src-hammerhead-stored-value]")?0:500;$t(e,n)?(At(e.parent(),n.parent()),ut(t)):(U(e,n),ht(t),setTimeout(()=>{q(t,a,!1)},s)),F(a),B(r)};var jt=t=>{t.find(".connectButton > button").on("click",()=>{Ot(t)})};var Tt=t=>{const e=_(t),n=c(e);new ResizeObserver(()=>{n.resize(),$(t).resize()}).observe(t[0])};n(106);var It=t=>{const e=t.$interaction,n=t.value;X(e)?Y(e,n):et(t,!1)};var Et=(t,e,n)=>{const a=o()(t.currentTarget),r=JSON.parse(JSON.stringify(e)),s=r.value.filter(t=>t.elm===n);r.value=s,r.$interaction=a,It(r)};var Pt=t=>{t.on("rcf.single.answer","*[data-rcfinteraction='rotatingMatching']",Et)};var Ft=t=>t.find(".rotatingMatchItems");var Bt=t=>t.find(".rotatingMatchTargets");var Nt=t=>{const e=Bt(t);Object(ct.G)(e,".rotatingMatchTargetContainer","seed:rotatingMatchTargets")};var Zt=t=>{const e=Ft(t);Object(ct.G)(e,".rotatingMatchItemContainer","seed:rotatingMatchItems")};function St(t,e){const n=e.find("*[data-rcfinteraction='rotatingMatching']");t.$activity=e,t.$selector=n,n.each((t,e)=>{const a=o()(e);Nt(a),Zt(a);const r=Ft(a),s=Bt(a),c=bt(r),i=bt(s);O(i),Z(n),((t,e)=>{const n=y(t);x[n]=[...e],x[n]})(a,i.cells),xt(a,c,i),jt(a),Tt(a),gt(a)}),Pt(e)}var Rt=n(335);n.d(e,"default",(function(){return Ut}));class Ut extends Rt.a{constructor(t){super(t,a),St(this,t)}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfRotatingMatching.js.map