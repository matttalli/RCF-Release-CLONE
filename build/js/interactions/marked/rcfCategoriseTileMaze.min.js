(window.rcfRunTime_24113=window.rcfRunTime_24113||[]).push([["interactions/marked/rcfCategoriseTileMaze"],{455:function(e,t,i){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function n(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.g.offsetWidth,i=t+100;return e.j.style.width=i+"px",e.i.scrollLeft=i,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function o(e,i){function n(){var e=o;r(e)&&null!==e.g.parentNode&&i(e.l)}var o=e;t(e.h,n),t(e.i,n),r(e)}function a(e,t,i){t=t||{},i=i||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=i}var c=null,s=null,l=null,h=null;function u(e){return null===h&&(h=!!e.document.fonts),h}function d(e,t){var i=e.style,n=e.weight;if(null===l){var r=document.createElement("div");try{r.style.font="condensed 100px sans-serif"}catch(e){}l=""!==r.style.font}return[i,n,l?e.stretch:"","100px",t].join(" ")}a.prototype.load=function(e,t){var r=this,a=e||"BESbswy",l=0,h=t||3e3,f=(new Date).getTime();return new Promise((function(e,t){if(u(r.context)&&!function(e){return null===s&&(u(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&603>parseInt(e[1],10)):s=!1),s}(r.context)){var m=new Promise((function(e,t){!function i(){(new Date).getTime()-f>=h?t(Error(h+"ms timeout exceeded")):r.context.document.fonts.load(d(r,'"'+r.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),p=new Promise((function(e,t){l=setTimeout((function(){t(Error(h+"ms timeout exceeded"))}),h)}));Promise.race([p,m]).then((function(){clearTimeout(l),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function s(){var t;(t=-1!=y&&-1!=w||-1!=y&&-1!=b||-1!=w&&-1!=b)&&((t=y!=w&&y!=b&&w!=b)||(null===c&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),c=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=c&&(y==v&&w==v&&b==v||y==g&&w==g&&b==g||y==x&&w==x&&b==x)),t=!t),t&&(null!==O.parentNode&&O.parentNode.removeChild(O),clearTimeout(l),e(r))}var u=new i(a),m=new i(a),p=new i(a),y=-1,w=-1,b=-1,v=-1,g=-1,x=-1,O=document.createElement("div");O.dir="ltr",n(u,d(r,"sans-serif")),n(m,d(r,"serif")),n(p,d(r,"monospace")),O.appendChild(u.g),O.appendChild(m.g),O.appendChild(p.g),r.context.document.body.appendChild(O),v=u.g.offsetWidth,g=m.g.offsetWidth,x=p.g.offsetWidth,function e(){if((new Date).getTime()-f>=h)null!==O.parentNode&&O.parentNode.removeChild(O),t(Error(h+"ms timeout exceeded"));else{var i=r.context.document.hidden;!0!==i&&void 0!==i||(y=u.g.offsetWidth,w=m.g.offsetWidth,b=p.g.offsetWidth,s()),l=setTimeout(e,50)}}(),o(u,(function(e){y=e,s()})),n(u,d(r,'"'+r.family+'",sans-serif')),o(m,(function(e){w=e,s()})),n(m,d(r,'"'+r.family+'",serif')),o(p,(function(e){b=e,s()})),n(p,d(r,'"'+r.family+'",monospace'))}))}))},e.exports=a}()},456:function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return s}));var n=i(5),r=i.n(n);const o=()=>r()(".tileMazeCollection ul"),a=()=>r()(".itemsCollected ul"),c=()=>r()(".tileMazeCollection .itemCounter"),s=()=>r()(".collectionCounterValue")},537:function(e,t,i){"use strict";var n=i(5),r=i.n(n),o=i(456);t.a=()=>{let e=0;return Object(o.a)().each((function(){e+=parseFloat(r()(this).text())})),e}},539:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(334);const r=e=>{if(!e)return;const t=new n.Sprite(n.Loader.shared.resources[e].texture);return t.path=e,t}},575:function(e){e.exports=JSON.parse('{"frames":{"life":{"frame":{"x":0,"y":0,"w":40,"h":40},"anchor":{"x":0.5,"y":1}},"lost_life":{"frame":{"x":40,"y":0,"w":40,"h":40},"anchor":{"x":0.5,"y":1}},"horizontal_action_1":{"frame":{"x":0,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"horizontal_action_2":{"frame":{"x":150,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"horizontal_action_3":{"frame":{"x":300,"y":40,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_1":{"frame":{"x":0,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_2":{"frame":{"x":150,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"vertical_action_3":{"frame":{"x":300,"y":240,"w":150,"h":200},"anchor":{"x":0.5,"y":1}},"idle_1":{"frame":{"x":0,"y":440,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"idle_2":{"frame":{"x":150,"y":440,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_1":{"frame":{"x":0,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_2":{"frame":{"x":150,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"bounce_back":{"frame":{"x":300,"y":590,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"start":{"frame":{"x":0,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"finish":{"frame":{"x":150,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"empty":{"frame":{"x":300,"y":740,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_1":{"frame":{"x":0,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_2":{"frame":{"x":150,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"background_3":{"frame":{"x":300,"y":890,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_1":{"frame":{"x":0,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_2":{"frame":{"x":150,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"platform_3":{"frame":{"x":300,"y":1040,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_1":{"frame":{"x":0,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_2":{"frame":{"x":150,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"fail_platform_3":{"frame":{"x":300,"y":1190,"w":150,"h":150},"anchor":{"x":0.5,"y":1}},"transparent":{"frame":{"x":448,"y":0,"w":1,"h":1},"anchor":{"x":0.5,"y":1}}},"meta":{"app":"https://www.leshylabs.com/apps/sstool/","version":"Leshy SpriteSheet Tool v0.8.4","image":"spritesheet.png","size":{"w":450,"h":1340},"scale":1}}')},712:function(e,t,i){"use strict";i.r(t);i(25),i(31),i(6),i(11);var n=i(576),r=i(4),o=i(577),a=i(345),c=i(615),s=i(578),l=i(579),h=i(468),u=i(334),d=i(620),f=i(536),m=(i(48),i(583)),p=i(580),y=i(581),w=i(457),b=i(538),v=i(582);i(15),i(16);var g=(e,t)=>{let i=[];return e.forEach(e=>{const{id:t,value:n,image:r,audio:o}=e;i.push({id:t,value:n,correct:!0,stepIndex:0,image:r,audio:o})}),t.forEach(e=>{const{id:t,value:n,image:r,audio:o}=e;i.push({id:t,value:n,correct:!1,stepIndex:0,image:r,audio:o})}),i},x=i(628);var O=function*(e){let t=null;if(!e||!Array.isArray(e))throw new Error("No array passed to the repeating iterable from array function");for(;e.length;){const i=Object(r.J)(e);let n=i.shift();n===t&&(n=i.shift()),t=n,yield n}};var j=function*(e){if(!e||!Array.isArray(e))throw new Error("No array passed to the repeating iterable from array function");for(;e.length;){let t=Object(r.J)(e).shift();yield t}};var T=e=>e.length>2?O(e):j(e),_=i(539);function E(e){let{length:t,items:i,distractors:n}=e,o=[[]],a=!1;const c=2*t,s=2*t;for(;!a;){const e=T(i),l=g(i,n);o=Object(p.a)(c,s);const h=Object(y.a)(c,s);let d=h,f={column:0,row:0};Object(w.a)(o[h.column][h.row],{used:!0,drawMe:!0,type:"start",associatedIndex:0,stepIndex:0,path:!0});for(let i=0;i<t;i++){const t=Object(b.a)(o,d,c,s);f=t[Object(r.t)(0,t.length)];const n=e.next();if(n.done)continue;const l=n.value;if(a=f,!a)break;Object(w.a)(o[f.column][f.row],{used:!0,drawMe:!0,label:l.value,type:"correctItem",associatedIndex:i+1,stepIndex:i+1,path:!0,image:Object(_.a)(l.image),audio:l.audio?new m.a.Sound.from(u.Loader.shared.resources[l.audio]):void 0,itemId:l.id}),d=f}if(a){const e=Object(b.a)(o,f,c,s);f=e[Object(r.t)(0,e.length)],a=f,f&&(Object(w.a)(o[f.column][f.row],{used:!0,drawMe:!0,type:"finish",associatedIndex:t,stepIndex:t+1,path:!0}),Object(v.a)(o),Object(x.a)(o,l))}}return o}function C(e){return e.map(e=>({grid:E(e),id:e.id,isMathsGame:!1}))}i(13);var I=i(540),P=i(627);var L=i(584),k=i(586),S=i(383);var A=(e,t)=>{e&&e.sprite&&e.platformTexture&&e.failPlatformTexture&&(e.sprite.texture=t?e.platformTexture:e.failPlatformTexture,e.sprite.interactive=t)};var z=(e,t)=>{e&&(e.children[0].visible=t)},$=i(96);function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function N(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var W=async(e,t,i,n,r)=>{const o=e.tileLocation,c=t.camera.tileLocation;if(!t.canMove||!Object(P.a)(o,c))return;t.stopAnimation();const s=o.column,l=o.row,h=i[c.column][c.row],u=i[s][l],{sprite:d,id:f,itemId:m}=h,{sprite:p,id:y,audio:w}=u,b=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){N(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},c);if(await Object(I.a)(t,o),w&&w.play(),Object(L.b)(u))return $.a.log("incorrect !"),e.off("pointerup"),e.visible=!1,void await Object(k.a)(t,b,r);if(Object(L.h)(n,y)){if(n.length>1){const e=Object(L.a)(i,n[n.length-2]);A(e,!0)}return z(d,!0),function(e){const t=Object(a.e)(),i=Object(a.e)().find("#".concat(e)),n=parseInt(i.html(),10);1===n?t.find("li:last-child").remove():i.html(n-1)}(m),void n.pop()}if($.a.log("correct"),n.length>1){const e=Object(L.a)(i,n[n.length-1]);A(e,!1)}if(!Object(L.c)(u))return z(p,!1),function(e){const t=e.image?'<img src="'.concat(e.image.path,'"/>'):e.label,i=Object(a.e)(),n=Object(a.e)().find("#".concat(e.itemId));if(0===n.length){const n='<li class="collectionItem'.concat(e.image?" hasImage":"",'">').concat(t,'<span class="itemCounter" id="').concat(e.itemId,'">1</span></li>');i.append(n)}else n.html(parseInt(n.html(),10)+1);e.showing=!1}(u),void n.push(f);Object(L.c)(u)&&($.a.log("finished"),t.stopAnimation(),setTimeout(()=>r.trigger(S.b.questionComplete),100))},D=i(456),G=i(537);var F=()=>(Object(D.b)().text(Object(G.a)()),Object(D.d)().clone().appendTo(Object(D.c)().empty())),J=i(534),q=i(535),B=i(454),K=i(621);i(172),i(32),i(173),i(33);const Q=e=>!!e.image||!!e.audio,R=e=>{const t=[];return e.image&&t.push(e.image),e.audio&&t.push(e.audio),t};var U=e=>{let t=[];return e.forEach(e=>{t.push(e.items.filter(e=>Q(e)).map(e=>R(e))),t.push(e.distractors.filter(e=>Q(e)).map(e=>R(e)))}),[...new Set(t.flat(5))]},V=i(151),H=i(8),X=i(393),Y=i(423);function Z(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"default",(function(){return ee}));class ee{constructor(e){Z(this,"game",void 0),Z(this,"$activity",void 0),Z(this,"$selector",void 0),Z(this,"data",void 0),Z(this,"viewport",void 0),Z(this,"state",void 0),this.$activity=e,this.$selector=e.find("*[data-rcfinteraction='categoriseTileMaze']").first()}async initialise(){this.data=Object(n.a)(this.$selector),this.state=new d.a(this.data,C,W,F);const e=Object(r.e)(this.data),t=Object(a.h)(this.$activity),i=t[0].clientWidth,h=Object(o.a)(t);this.game=Object(s.a)(i,h,t),t.append(this.game.view),this.viewport=Object(l.a)(this.game,i,h),this.game.stage.addChild(this.viewport);try{await Object(K.a)(e,U(e.questions)),await Object(c.a)(this.$activity,this.state,e,this.game,this.viewport)}catch(e){Object(a.n)(this.$activity,e)}}showAnswers(e){Object(X.a)(this.$selector,e,!1,e=>{Object(Y.c)(this.$selector,e)})}getUserAnswers(){const e=Object(Y.b)(this.$selector);return e?[e]:[{elm:Object(r.v)(this.$selector)||"",markType:H.d.unmarked,markedBy:H.c.nobody,type:H.a.gameCategoriseTileMaze,ignoreNextAnswer:"y",value:{completion:Object(f.a)(this.$selector),livesLeft:this.state.lives,correct:this.state.numberCorrect,itemsFound:this.state.totalGamePoints,outOf:this.state.numberOfQuestionsInGame,timeTaken:this.state.gameDuration}}]}close(){Object(V.a)("tileMaze"),h.b(),u.Loader.shared.reset(),u.Loader.shared.destroy(),u.utils.clearTextureCache(),u.utils.destroyTextureCache(),this.viewport.destroy(),this.game.stage.removeChildren(),this.game.destroy()}reset(){this.state.initialiseStateForNewGame(B.a.resetQuestions),Object(J.a)(this.viewport),Object(q.a)(this.$activity)}pause(){}resume(){}}}}]);
/* build created on 15/08/2025 16:19 */
//# sourceMappingURL=http://localhost:4000/source-maps/interactions/marked/rcfCategoriseTileMaze.js.map